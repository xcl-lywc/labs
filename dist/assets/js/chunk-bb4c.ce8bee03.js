(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bb4c"],{"13ac":function(e,t,s){},"28a5":function(e,t,s){s("214f")("split",2,function(e,t,a){"use strict";var i=s("aae3"),n=a,r=[].push,o="split",l="length",c="lastIndex";if("c"=="abbc"[o](/(b)*/)[1]||4!="test"[o](/(?:)/,-1)[l]||2!="ab"[o](/(?:ab)*/)[l]||4!="."[o](/(.?)(.?)/)[l]||"."[o](/()()/)[l]>1||""[o](/.?/)[l]){var u=void 0===/()??/.exec("")[1];a=function(e,t){var s=String(this);if(void 0===e&&0===t)return[];if(!i(e))return n.call(s,e,t);var a,o,p,d,m,f=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,_=void 0===t?4294967295:t>>>0,b=new RegExp(e.source,h+"g");u||(a=new RegExp("^"+b.source+"$(?!\\s)",h));while(o=b.exec(s)){if(p=o.index+o[0][l],p>v&&(f.push(s.slice(v,o.index)),!u&&o[l]>1&&o[0].replace(a,function(){for(m=1;m<arguments[l]-2;m++)void 0===arguments[m]&&(o[m]=void 0)}),o[l]>1&&o.index<s[l]&&r.apply(f,o.slice(1)),d=o[0][l],v=p,f[l]>=_))break;b[c]===o.index&&b[c]++}return v===s[l]?!d&&b.test("")||f.push(""):f.push(s.slice(v)),f[l]>_?f.slice(0,_):f}}else"0"[o](void 0,0)[l]&&(a=function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)});return[function(s,i){var n=e(this),r=void 0==s?void 0:s[t];return void 0!==r?r.call(s,n,i):a.call(String(n),s,i)},a]})},"3dfd":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",{staticClass:"mard10"},[s("el-col",{staticClass:"mard10",attrs:{span:12}},[s("el-form-item",{attrs:{label:"问卷名称：",prop:"questionnaire.name",rules:[{required:!0,message:"请输入任务名称",trigger:"blur"},{validator:function(t,s,a){e.common.wordNumberValid(t,s,a,"single")},trigger:"blur"}]}},[e.isEdit?s("el-input",{model:{value:e.questionnaire.name,callback:function(t){e.$set(e.questionnaire,"name",t)},expression:"questionnaire.name"}}):s("span",[e._v(e._s(e.questionnaire.name))])],1)],1),0==e.type?s("el-col",{staticClass:"mard10",attrs:{span:12}},[s("el-form-item",{attrs:{label:"问卷类型：",prop:"type"}},[e.isEdit?s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.questionnaire.type,callback:function(t){e.$set(e.questionnaire,"type",t)},expression:"questionnaire.type"}},e._l(e.optionsType,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})):s("span",[e._v(e._s(e.questionaireType(e.questionnaire.type)))])],1)],1):e._e(),s("el-col",{staticClass:"mart10",attrs:{span:24}},[s("el-form-item",{attrs:{label:"问卷要求：",prop:"questionnaire.description",rules:[{required:!0,message:"请输入任务名称",trigger:"blur"},{validator:function(t,s,a){e.common.wordNumberValid(t,s,a,"textarea")},trigger:"blur"}]}},[e.isEdit?s("el-input",{attrs:{type:"textarea",rows:6},model:{value:e.questionnaire.description,callback:function(t){e.$set(e.questionnaire,"description",t)},expression:"questionnaire.description"}}):s("span",[e._v(e._s(e.questionnaire.description))])],1)],1)],1),s("el-card",{attrs:{shadow:"never"}},[e._l(e.questionnaire.qItems,function(t,a){return s("div",{key:a,staticClass:"questions-box mart5"},[s("div",[e._v(e._s(a+1)+"、")]),s("el-card",{staticClass:"questions-content",attrs:{shadow:"never"}},[s("el-row",{staticClass:"mard10"},[s("el-col",{staticClass:"div-flex",attrs:{span:17}},[s("div",{staticClass:"label-2 label marr5"},[e._v("题干: ")]),e.isEdit?s("el-input",{model:{value:t.question,callback:function(s){e.$set(t,"question",s)},expression:"item.question"}}):s("div",[4!=t.type?s("span",[e._v(e._s(t.question))]):s("span",[e._v(e._s(t.question)+"（"+e._s(t.score)+"分）")])])],1),s("el-col",{staticClass:"text-right question-type",attrs:{offset:1,span:5}},[e._v("\n            "+e._s(e.numMatchingText(t.type))+"\n          ")]),s("el-col",{staticClass:"text-right ",attrs:{span:1}},[e.isEdit?s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-close",circle:""},on:{click:function(t){e.del("question",a)}}}):e._e()],1)],1),s("el-row",{staticClass:"mard10"},[s("el-col",{attrs:{span:22}},[1==t.type||2==t.type?s("div",{staticStyle:{"margin-left":"60px"}},[e._l(t.options,function(t,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isDelete,expression:"!itemOption.isDelete"}],key:i,staticClass:"div-flex mart10 flex-align-items"},[s("div",{staticClass:"label-2 label marr5"},[e._v("选项"+e._s(i+1)+": ")]),s("div",[e.isEdit?s("el-input",{model:{value:t.answer,callback:function(s){e.$set(t,"answer",s)},expression:"itemOption.answer"}}):s("div",[e._v(e._s(t.answer))])],1),s("div",[e.isEdit?s("el-input",{staticClass:"input-with-pa",attrs:{placeholder:""},model:{value:t.score,callback:function(s){e.$set(t,"score",s)},expression:"itemOption.score"}},[s("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("分数")]),s("span",{attrs:{slot:"append"},slot:"append"},[e._v("分")])]):s("div",[e._v("（"+e._s(t.score)+"分）")])],1),e.isEdit?s("el-button",{staticClass:"marl5",attrs:{type:"danger",size:"mini",icon:"el-icon-close",circle:""},on:{click:function(t){e.del("option",a,i)}}}):e._e()],1)}),2==t.type&&e.isEdit?s("div",{staticClass:"div-flex flex-align-items mart10"},[e._v("\n                最多能选择"),s("el-input-number",{staticClass:"marl5 marr5",attrs:{min:1,max:t.options.length},model:{value:t.max_option,callback:function(s){e.$set(t,"max_option",s)},expression:"item.max_option"}}),e._v("项\n              ")],1):e._e(),s("el-button",{directives:[{name:"show",rawName:"v-show",value:(1==t.type||2==t.type)&&e.isEdit,expression:" (item.type == 1 || item.type == 2) && isEdit"}],staticClass:"mart10",staticStyle:{"margin-left":"65px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addOption(a)}}},[e._v("添加选项")])],2):e._e(),4==t.type&&e.isEdit?s("div",{staticClass:"mart10",staticStyle:{"margin-left":"13px"}},[s("el-input",{staticClass:"input-with-pa",attrs:{placeholder:""},model:{value:t.score,callback:function(s){e.$set(t,"score",s)},expression:"item.score"}},[s("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("分数")]),s("span",{attrs:{slot:"append"},slot:"append"},[e._v("分")])])],1):e._e(),s("div",{staticClass:"text-right"},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:e.questionnaire.id&&e.isEdit,expression:" questionnaire.id && isEdit"}],staticClass:"mart10",attrs:{type:"primary",size:"small"},on:{click:function(s){e.saveAppointQuestion(t)}}},[e._v("保存")])],1)])],1)],1)],1)}),e.isEdit?s("div",{staticClass:"text-right mart10"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addQution("radioQuestion")}}},[e._v("添加单选题")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addQution("chekboxQuestion")}}},[e._v("添加多选题")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addQution("shortAnswerQuestion")}}},[e._v("添加评语")])],1):e._e()],2)],1)},i=[],n=(s("ac6a"),{props:{questionnaire:{default:null},isEdit:!1,type:{default:0}},data:function(){return{checkbox:!1,optionsType:[{value:1,label:"评价教学"},{value:2,label:"互评"},{value:3,label:"自评"}],questionTemplate:{radioQuestion:{question:"我是第二道试题 ",type:1,options:[{answer:"我是第二试题的第一选项",score:1,isDelete:!1},{answer:"我是第2试题的第二选项",score:2,isDelete:!1},{answer:"我是第2试题的第二选项",score:3,isDelete:!1}]},chekboxQuestion:{question:"我是第二道试题 ",type:2,max_option:1,options:[{answer:"我是第二试题的第一选项",score:1,isDelete:!1},{answer:"我是第二试题的第二选项",score:2,isDelete:!1}]},shortAnswerQuestion:{question:"我是第二道试题",type:4,score:30,analyze:"这是我的习题解析"}},questionTypeText:null}},components:{},computed:{},mounted:function(){},methods:{questionaireType:function(e){switch(e){case 1:return"评价教学";case 2:return"自评";case 3:return"互评"}},numMatchingText:function(e){switch(e){case 1:return this.questionTypeText="单选题";case 2:return this.questionTypeText="多选题";case 3:return this.questionTypeText="判断题";case 4:return this.questionTypeText="评语"}},addQution:function(e){this.questionnaire.qItems.push(JSON.parse(JSON.stringify(this.questionTemplate[e])))},del:function(e,t,s){"question"==e?this._delQution(t):this._delOption(t,s)},_delQution:function(e){if(this.questionnaire.qItems.length<=1)return this.$message.warning("不能删除，必须存在一个题！！！"),!1;this.questionnaire.qItems[e].id?this._pseudoDelQution(e):this.questionnaire.qItems.splice(e,1)},_pseudoDelQution:function(e){var t=this;this.axios.patch("".concat(this.common.basePath,"/question/delete/").concat(this.questionnaire.qItems[e].id),"").then(function(s){t.questionnaire.qItems.splice(e,1)}).catch(function(e){t.$message.error(e)})},_delOption:function(e,t){if(this.questionnaire.qItems[e].options.length<=2)return this.$message.warning("不能删除，必须存在两个选项！！！"),!1;this.questionnaire.qItems[e].options[t].id?this.questionnaire.qItems[e].options[t].isDelete=!0:this.questionnaire.qItems[e].options.splice(t,1)},addOption:function(e){var t=JSON.parse(JSON.stringify(this.questionTemplate.radioQuestion.options[0]));this.questionnaire.qItems[e].options.push(t)},changeRadioRightKey:function(e,t){e.options.forEach(function(e,s){e.answer=s!=t?"false":"true"})},saveAppointQuestion:function(e){var t=this,s=null;s=e.id?"".concat(this.common.basePath,"/question/update"):"".concat(this.common.basePath,"/question/save"),e.paper_id=this.$route.params.id,this.axios.post(s,e).then(function(s){t.paperDetail=s.data.data,s.data.data&&(e.id=s.data.data)}).catch(function(e){t.$message.error(e)})},getQueryQuestionById:function(e){var t=this;this.axios.get("".concat(this.common.basePath,"question/simple/").concat(e.id),"").then(function(t){e=t.data.data}).catch(function(e){t.$message.error(e)})}}}),r=n,o=(s("da46"),s("2877")),l=Object(o["a"])(r,a,i,!1,null,null,null);l.options.__file="Questionnaire.vue";t["a"]=l.exports},aa77:function(e,t,s){var a=s("5ca1"),i=s("be13"),n=s("79e5"),r=s("fdef"),o="["+r+"]",l="​",c=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),p=function(e,t,s){var i={},o=n(function(){return!!r[e]()||l[e]()!=l}),c=i[e]=o?t(d):r[e];s&&(i[s]=c),a(a.P+a.F*o,"String",i)},d=p.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=p},c5f6:function(e,t,s){"use strict";var a=s("7726"),i=s("69a8"),n=s("2d95"),r=s("5dbc"),o=s("6a99"),l=s("79e5"),c=s("9093").f,u=s("11e9").f,p=s("86cc").f,d=s("aa77").trim,m="Number",f=a[m],h=f,v=f.prototype,_=n(s("2aeb")(v))==m,b="trim"in String.prototype,w=function(e){var t=o(e,!1);if("string"==typeof t&&t.length>2){t=b?t.trim():d(t,3);var s,a,i,n=t.charCodeAt(0);if(43===n||45===n){if(s=t.charCodeAt(2),88===s||120===s)return NaN}else if(48===n){switch(t.charCodeAt(1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+t}for(var r,l=t.slice(2),c=0,u=l.length;c<u;c++)if(r=l.charCodeAt(c),r<48||r>i)return NaN;return parseInt(l,a)}}return+t};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(e){var t=arguments.length<1?0:e,s=this;return s instanceof f&&(_?l(function(){v.valueOf.call(s)}):n(s)!=m)?r(new h(w(t)),s,f):w(t)};for(var x,y=s("9e1e")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),q=0;y.length>q;q++)i(h,x=y[q])&&!i(f,x)&&p(f,x,u(h,x));f.prototype=v,v.constructor=f,s("2aba")(a,m,f)}},d60a:function(e,t,s){"use strict";var a=s("13ac"),i=s.n(a);i.a},da38:function(e,t,s){},da46:function(e,t,s){"use strict";var a=s("da38"),i=s.n(a);i.a},ec92:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content-wrap-box"},[s("el-card",{staticClass:"title-card"},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/lesson/testlist"}}},[e._v("实验列表")]),s("el-breadcrumb-item",{attrs:{to:{name:"TestDetail",params:{id:e.$route.params.experiment_id}}}},[e._v("实验详情")]),s("el-breadcrumb-item",{attrs:{to:{name:"QuestionnaireTaskDetail",params:{id:e.$route.params.task_id}}}},[e._v("问卷任务详情")]),s("el-breadcrumb-item",[e._v("答题")])],1)],1),s("div",{staticClass:"router-view-wrap"},[e.paperItem?s("div",{staticClass:"router-view-content"},[s("div",[s("div",[s("el-radio-group",{model:{value:e.participantId,callback:function(t){e.participantId=t},expression:"participantId"}},e._l(e.answerMemberListData,function(t,a){return s("el-radio-button",{attrs:{label:t.id}},[e._v(e._s(t.user_name))])}))],1),s("hr"),s("el-form",{ref:"paperItem",attrs:{model:e.paperItem,"label-width":"120px"}},[s("el-row",{staticClass:"mard10"},[s("el-col",{staticClass:"mard10",attrs:{span:12}},[s("span",[e._v(e._s(e.paperItem.name))])]),s("el-col",{staticClass:"mard10",attrs:{span:12}},[s("span",[e._v(e._s(e.questionaireType(e.paperItem.type)))])]),s("el-col",{staticClass:"mart10",attrs:{span:24}},[s("span",[e._v(e._s(e.paperItem.description))])])],1)],1),s("el-card",{attrs:{shadow:"never"}},e._l(e.qItems,function(t,a){return s("div",{key:a,staticClass:"questions-box mart5"},[s("div",[e._v(e._s(a+1)+"、")]),s("el-card",{staticClass:"questions-content",attrs:{shadow:"never"}},[s("el-row",{staticClass:"mard10"},[s("el-col",{staticClass:"div-flex",attrs:{span:17}},[s("div",{staticClass:"label-2 label marr5"},[e._v("题干: ")]),s("div",[1==t.type?s("span",[e._v(e._s(t.question))]):e._e(),2==t.type?s("span",[e._v(e._s(t.question)+" （最多能选择"+e._s(t.max_option)+"项）")]):e._e(),4==t.type?s("span",[e._v(e._s(t.question)+"（最大分数："+e._s(t.score)+"分）")]):e._e()])]),s("el-col",{staticClass:"text-right question-type",attrs:{offset:1,span:5}},[e._v("\n                  "+e._s(e.numMatchingText(t.type))+"\n                ")])],1),s("el-row",{staticClass:"mard10"},[s("el-col",{attrs:{span:22}},[s("div",{staticStyle:{"margin-left":"60px"}},[1==t.type?s("el-radio-group",{model:{value:t.answer,callback:function(s){e.$set(t,"answer",s)},expression:"item.answer"}},e._l(t.options,function(t,a){return s("div",{key:a,staticClass:"div-flex mart10 flex-align-items"},[s("el-radio",{staticClass:"marl5",attrs:{disabled:"",label:t.id}},[e._v("\n                          选项"+e._s(a+1)+"：（"+e._s(t.score)+"分）"+e._s(t.answer)+"\n                        ")])],1)})):e._e(),2==t.type?s("el-checkbox-group",{attrs:{max:t.max_option},model:{value:t.answer,callback:function(s){e.$set(t,"answer",s)},expression:"item.answer"}},e._l(t.options,function(t,a){return s("div",{key:a,staticClass:"div-flex mart10 flex-align-items"},[s("el-checkbox",{staticClass:"marl5",attrs:{disabled:"",label:t.id}},[e._v(" \n                          选项"+e._s(a+1)+"：（"+e._s(t.score)+"分）"+e._s(t.answer)+"\n                        ")])],1)})):e._e(),4==t.type?s("div",[s("el-input",{attrs:{disabled:"",type:"textarea",rows:"5"},model:{value:t.answer,callback:function(s){e.$set(t,"answer",s)},expression:"item.answer"}}),s("div",{staticClass:"div-flex mart10"},[e._v("\n                        *得分："),s("el-input-number",{attrs:{disabled:"",max:t.score},model:{value:t.scoreA,callback:function(s){e.$set(t,"scoreA",s)},expression:"item.scoreA"}}),e._v(" 分\n                      ")],1)],1):e._e()],1)])],1)],1)],1)}))],1)]):e._e()])],1)},i=[],n=(s("c5f6"),s("28a5"),s("ac6a"),s("3dfd"),{data:function(){return{questionTypeText:null,paperItem:null,qItems:[],answerMemberListData:[],participantId:"default",sheet_id:null}},watch:{participantId:function(e,t){"default"!=t&&(this._isHasSheetId(),this.getQueryQuestionnaireList())}},mounted:function(){this.getQueryPaperDetail(),this.getQueryAnswerMember()},methods:{getQueryAnswerMember:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/qanswer/member/").concat(this.$route.params.task_id),"").then(function(t){e.answerMemberListData=t.data.data,"default"==e.participantId&&(e.participantId=t.data.data&&t.data.data.length?t.data.data[0].id:""),e._isHasSheetId(),e.getQueryQuestionnaireList()}).catch(function(t){e.$message.error(t)})},questionaireType:function(e){switch(e){case 1:return"评价教学";case 2:return"互评";case 3:return"自评"}},numMatchingText:function(e){switch(e){case 1:return this.questionTypeText="单选题";case 2:return this.questionTypeText="多选题";case 3:return this.questionTypeText="判断题";case 4:return this.questionTypeText="评语"}},getQueryPaperDetail:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/questionnaire/").concat(this.$route.params.questionnaire_id),"").then(function(t){e.paperItem=t.data.data}).catch(function(t){e.$message.error(t)})},getQueryQuestionnaireList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/qitem"),{params:{questionnaire_id:this.$route.params.questionnaire_id,sheet_id:this.sheet_id}}).then(function(t){e.qItems=e._convertQItems(t.data.data.rows)}).catch(function(t){e.$message.error(t)})},_convertQItems:function(e){return e.forEach(function(e){1==e.type?e.answer=e.answer?parseInt(e.answer.answer):null:2==e.type?e.answer=e.answer?e.answer.answer.split(",").map(Number):[]:4==e.type&&(e.scoreA=e.answer?e.answer.score:null,e.answer=e.answer?e.answer.answer:null)}),e},_isHasSheetId:function(){var e=this;this.answerMemberListData&&this.answerMemberListData.forEach(function(t){t.id==e.participantId&&(e.sheet_id=t.sheet_id)})}}}),r=n,o=(s("d60a"),s("2877")),l=Object(o["a"])(r,a,i,!1,null,null,null);l.options.__file="QuestionnaireCheck.vue";t["default"]=l.exports},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-bb4c.ce8bee03.js.map