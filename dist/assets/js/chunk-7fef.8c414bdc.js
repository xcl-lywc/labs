(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fef"],{4558:function(t,e,i){},"49ec":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-wrap-box"},[i("el-card",{staticClass:"title-card"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",[t._v("门户页面")])],1)],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],staticClass:"router-view-wrap"},[i("el-button",{attrs:{disabled:!t.common.checkAuthority("HomeSetting-EditHomeText",!0)},on:{click:t.showAnchorDialog}},[t._v("编辑首页文本")]),i("div",{staticClass:"router-view-content"},[t.common.checkAuthority("HomeSetting-list",!0)?i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:11}},[i("h3",{staticClass:"text-info text-bold text-title"},[t._v("\n            中心简介\n            "),i("el-button",{staticClass:"fr",attrs:{disabled:!t.common.checkAuthority("HomeSetting-add",!0),type:"primary",size:"mini"},on:{click:function(e){t.addItem("carouselData")}}},[t._v("添 加")])],1),t.carouselData&&t.carouselData.length>0?i("div",t._l(t.carouselData,function(e,o){return i("el-card",{key:"中心简介"+o,staticClass:"carousel-card-list"},[i("img",{staticClass:"item-img",attrs:{src:e.img}}),i("p",[t._v(t._s(e.label))]),i("p",[t._v(t._s(e.url))]),i("div",[i("span",{staticClass:"text-info"},[t._v(" 当前序列: "+t._s(o+1)+" ")]),i("el-button",{attrs:{disabled:!t.common.checkAuthority("HomeSetting-sort",!0)||0==o,type:"primary",size:"mini"},on:{click:function(e){t.moveIndex("carouselData",o,"up")}}},[t._v("上移")]),i("el-button",{attrs:{disabled:!t.common.checkAuthority("HomeSetting-sort",!0)||o>=t.carouselData.length-1,type:"primary",size:"mini"},on:{click:function(e){t.moveIndex("carouselData",o,"down")}}},[t._v("下移")]),i("el-button",{attrs:{disabled:!t.common.checkAuthority("HomeSetting-edit",!0),type:"primary",size:"mini"},on:{click:function(i){t.editItem("carouselData",e,o)}}},[t._v("编 辑")]),i("el-button",{attrs:{disabled:!t.common.checkAuthority("HomeSetting-delete",!0),type:"danger",size:"mini"},on:{click:function(e){t.deleteItem("carouselData",o)}}},[t._v("删 除")])],1)])})):i("p",{staticClass:"text-center text-info"},[t._v(" 当前没有轮播数据 ")])]),i("el-col",{attrs:{span:11,offset:2}},[i("h3",{staticClass:"text-info text-bold text-title"},[t._v("\n            Events\n            "),i("el-button",{staticClass:"fr",attrs:{disabled:!t.common.checkAuthority("HomeSetting-add",!0),type:"primary",size:"mini"},on:{click:function(e){t.addItem("carouselEventData")}}},[t._v("添 加")])],1),t.carouselEventData&&t.carouselEventData.length>0?i("div",t._l(t.carouselEventData,function(e,o){return i("el-card",{key:"Events"+o,staticClass:"carousel-card-list"},[i("img",{staticClass:"item-img",attrs:{src:e.img}}),i("p",[t._v(t._s(e.label))]),i("p",[t._v(t._s(e.url))]),i("div",[i("span",{staticClass:"text-info"},[t._v(" 当前序列: "+t._s(o+1)+" ")]),i("el-button",{attrs:{disabled:!t.common.checkAuthority("HomeSetting-sort",!0)||0==o,type:"primary",size:"mini"},on:{click:function(e){t.moveIndex("carouselEventData",o,"up")}}},[t._v("上移")]),i("el-button",{attrs:{disabled:!t.common.checkAuthority("HomeSetting-sort",!0)||o>=t.carouselEventData.length-1,type:"primary",size:"mini"},on:{click:function(e){t.moveIndex("carouselEventData",o,"down")}}},[t._v("下移")]),i("el-button",{attrs:{disabled:!t.common.checkAuthority("HomeSetting-edit",!0),type:"primary",size:"mini"},on:{click:function(i){t.editItem("carouselEventData",e,o)}}},[t._v("编 辑")]),i("el-button",{attrs:{disabled:!t.common.checkAuthority("HomeSetting-delete",!0),type:"danger",size:"mini"},on:{click:function(e){t.deleteItem("carouselEventData",o)}}},[t._v("删 除")])],1)])})):i("p",{staticClass:"text-center text-info"},[t._v(" 当前没有轮播数据 ")])])],1):i("div",{staticClass:"text-center text-info"},[t._v(" 你无权查看此内容 ")])],1),t._m(0)],1),i("el-dialog",{attrs:{title:"new"==t.operateType?"新增":"编辑",visible:t.dialogVisible,width:"80vw"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"dialogForm",attrs:{model:t.dialogForm,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"图片：",prop:"img"}},[t.dialogForm.img?i("img",{attrs:{src:t.dialogForm.img,height:"300"}}):t._e(),i("upload",{attrs:{fileTypes:["jpg","jpeg","png"]},on:{uploadSuccess:t.uploadSuccess}})],1),i("el-form-item",{attrs:{label:"文本：",prop:"label"}},[i("el-input",{model:{value:t.dialogForm.label,callback:function(e){t.$set(t.dialogForm,"label",e)},expression:"dialogForm.label"}})],1),i("el-form-item",{attrs:{label:"链接：",prop:"url"}},[i("el-input",{model:{value:t.dialogForm.url,callback:function(e){t.$set(t.dialogForm,"url",e)},expression:"dialogForm.url"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitData(t.tempList)}}},[t._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"文本",visible:t.dialogAnchorVisible,width:"80vw"},on:{"update:visible":function(e){t.dialogAnchorVisible=e}}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("el-button",{staticClass:"fill-width",attrs:{type:"primary"},on:{click:t.addAnchorPoint}},[t._v("添加段落")]),i("ul",t._l(t.anchorPointList,function(e,o){return i("li",{on:{click:function(i){t.treeNodeClicked(e,o)}}},[i("span",{class:{"text-primary":t.activeAnchorPoint==o}},[t._v(" "+t._s(e.label)+" ")])])}))],1),i("el-col",{attrs:{span:16}},[t.anchorPointForm.text?i("el-form",{ref:"anchorPointForm",attrs:{model:t.anchorPointForm}},[i("el-form-item",{attrs:{label:"段落名"}},[i("el-input",{attrs:{type:"text"},model:{value:t.anchorPointForm.label,callback:function(e){t.$set(t.anchorPointForm,"label",e)},expression:"anchorPointForm.label"}})],1),i("el-form-item",{attrs:{label:"段落文本"}},[i("el-input",{attrs:{type:"textarea",rows:"20"},model:{value:t.anchorPointForm.text,callback:function(e){t.$set(t.anchorPointForm,"text",e)},expression:"anchorPointForm.text"}})],1)],1):i("div",{staticClass:"text-center text-info"},[t._v("请选择段落, 编辑后请点击保存修改")])],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{disabled:!t.anchorPointForm.text,type:"danger"},on:{click:t.deleteAnchor}},[t._v("删除当前段落")]),i("el-button",{attrs:{disabled:!t.anchorPointForm.text,type:"primary"},on:{click:t.saveAnchor}},[t._v("保存修改")])],1)],1)],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"router-view-bottom"},[i("div")])}],n=i("d443"),s={data:function(){return{pageLoading:!1,operateType:"new",dialogVisible:!1,dialogForm:{img:null,label:null,url:null},tempIndex:0,tempList:null,carouselData:[],carouselEventData:[],rules:{img:[{required:!0,message:"请上传图片",trigger:"change"}],label:[{required:!0,message:"请输入显示标题",trigger:"blur"}],url:[{required:!0,message:"请输出正确的链接地址",trigger:"blur"}]},dialogAnchorVisible:!1,anchorPointList:[],activeAnchorPoint:null,anchorPointForm:{label:null,text:null}}},components:{upload:n["a"]},computed:{},mounted:function(){this.common.checkAuthority("HomeSetting-list",!0)&&(this.getCaresoulList("carouselData"),this.getCaresoulList("carouselEventData"))},watch:{carouselData:{handler:function(t,e){},deep:!0}},methods:{getCaresoulList:function(t){var e=this,i={url:"".concat(this.common.basePath,"/home/current"),method:"get",params:{type:"carouselData"==t?1:2}};this.axios(i).then(function(i){e[t]=JSON.parse(i.data.data)||[],e.pageLoading=!1}).catch(function(t){e.$message.error(t),e.pageLoading=!1})},moveIndex:function(t,e,i){this.operateType="index";var o=JSON.parse(JSON.stringify(this[t][e]));this[t].splice(e,1),"up"==i?this[t].splice(e-1,0,o):"down"==i&&this[t].splice(e+1,0,o);JSON.parse(JSON.stringify(this[t]));this.submitData(t)},addItem:function(t){this.operateType="new",this.dialogVisible=!0,this.tempList=t,this.dialogForm={img:null,label:null,url:null},this.$refs.dialogForm&&this.$refs.dialogForm.clearValidate()},editItem:function(t,e,i){this.operateType="edit",this.tempIndex=i,this.tempList=t,this.dialogVisible=!0,this.dialogForm=JSON.parse(JSON.stringify(e)),this.$refs.dialogForm&&this.$refs.dialogForm.clearValidate()},deleteItem:function(t,e){var i=this;this.operateType="delete",this.$confirm("当前删除的内容将无法找回","确认删除",{type:"warning"}).then(function(o){i[t].splice(e,1),i.submitData(t)}).catch(function(t){})},uploadSuccess:function(t){this.dialogForm.img="".concat(this.common.filePath).concat(t.path)},submitData:function(t){var e=this,i=!1;if("delete"!=this.operateType&&"index"!=this.operateType?this.$refs.dialogForm.validate(function(o){o?(i=!0,"new"==e.operateType?e[t].push(JSON.parse(JSON.stringify(e.dialogForm))):"edit"==e.operateType&&(e[t][e.tempIndex]=JSON.parse(JSON.stringify(e.dialogForm)))):(i=!1,e.$message.error("请检查表单填写是否正确"))}):i=!0,i){this.pageLoading=!0;var o={url:"".concat(this.common.basePath,"/home"),method:"post",data:{config:JSON.stringify(this[t]),type:"carouselData"==t?1:2}};this.axios(o).then(function(i){e.getCaresoulList(t),e.$message.success(i.data.meta.message),e.dialogVisible=!1,e.pageLoading=!1}).catch(function(t){e.$message.error(t),e.pageLoading=!1})}},showAnchorDialog:function(){this.dialogAnchorVisible=!0,this.initAnchorPoint(!0)},addAnchorPoint:function(){var t=this;this.$prompt('<span><i class="required-label"></i>段落名</span>',"添加段落",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,inputValidator:function(e){return!!e||(t.$message.error("请检查必填项"),!1)},inputErrorMessage:"请输入段落名"}).then(function(e){var i=e.value;t.anchorPointList.push({label:i,text:"这是初始文本..."})}).catch(function(t){})},allowDrop:function(t,e,i){return"inner"!=i},initAnchorPoint:function(t){var e=this,i={url:"".concat(this.common.basePath,"/home/current"),method:"get",params:{type:3}};this.axios(i).then(function(i){e.anchorPointList=JSON.parse(i.data.data)||[],t&&(e.activeAnchorPoint=null)}).catch(function(t){e.$message.error(t)}),t&&(this.anchorPointForm={label:null,text:null})},treeNodeClicked:function(t,e){console.log(e),this.activeAnchorPoint=e,this.anchorPointForm=t},deleteAnchor:function(){var t=this,e=this;console.log(e.activeAnchorPoint),e.$confirm("删除当前段落后将重新请求数据, 确定删除吗?","删除段落",{type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(i){i.value;e.anchorPointList.splice(e.activeAnchorPoint,1);var o={url:"".concat(t.common.basePath,"/home"),method:"post",data:{config:JSON.stringify(t.anchorPointList),type:3}};t.axios(o).then(function(e){t.$message.success(e.data.meta.message),t.initAnchorPoint(!0)}).catch(function(e){t.$message.error(e)})}).catch(function(t){})},saveAnchor:function(){var t=this;this.anchorPointList[this.activeAnchorPoint]=this.anchorPointForm;var e={url:"".concat(this.common.basePath,"/home"),method:"post",data:{config:JSON.stringify(this.anchorPointList),type:3}};this.axios(e).then(function(e){t.$message.success(e.data.meta.message),t.initAnchorPoint(!1)}).catch(function(e){t.$message.error(e)})}}},r=s,l=(i("e335"),i("2877")),c=Object(l["a"])(r,o,a,!1,null,null,null);c.options.__file="HomeSetting.vue";e["default"]=c.exports},e335:function(t,e,i){"use strict";var o=i("4558"),a=i.n(o);a.a}}]);
//# sourceMappingURL=chunk-7fef.8c414bdc.js.map