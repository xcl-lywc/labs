(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-711d"],{"28a5":function(e,t,a){a("214f")("split",2,function(e,t,s){"use strict";var r=a("aae3"),i=s,n=[].push,o="split",c="length",u="lastIndex";if("c"=="abbc"[o](/(b)*/)[1]||4!="test"[o](/(?:)/,-1)[c]||2!="ab"[o](/(?:ab)*/)[c]||4!="."[o](/(.?)(.?)/)[c]||"."[o](/()()/)[c]>1||""[o](/.?/)[c]){var l=void 0===/()??/.exec("")[1];s=function(e,t){var a=String(this);if(void 0===e&&0===t)return[];if(!r(e))return i.call(a,e,t);var s,o,d,p,m,f=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),_=0,v=void 0===t?4294967295:t>>>0,w=new RegExp(e.source,h+"g");l||(s=new RegExp("^"+w.source+"$(?!\\s)",h));while(o=w.exec(a)){if(d=o.index+o[0][c],d>_&&(f.push(a.slice(_,o.index)),!l&&o[c]>1&&o[0].replace(s,function(){for(m=1;m<arguments[c]-2;m++)void 0===arguments[m]&&(o[m]=void 0)}),o[c]>1&&o.index<a[c]&&n.apply(f,o.slice(1)),p=o[0][c],_=d,f[c]>=v))break;w[u]===o.index&&w[u]++}return _===a[c]?!p&&w.test("")||f.push(""):f.push(a.slice(_)),f[c]>v?f.slice(0,v):f}}else"0"[o](void 0,0)[c]&&(s=function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)});return[function(a,r){var i=e(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,i,r):s.call(String(i),a,r)},s]})},"34d6":function(e,t,a){},"7d98":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap-box"},[a("el-card",{staticClass:"title-card"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/lesson/testlist"}}},[e._v("实验列表")]),a("el-breadcrumb-item",{attrs:{to:{name:"TestDetail",params:{id:e.$route.params.experiment_id}}}},[e._v("实验详情")]),a("el-breadcrumb-item",{attrs:{to:{name:"QuestionnaireTaskDetail",params:{id:e.$route.params.task_id}}}},[e._v("问卷任务详情")]),a("el-breadcrumb-item",[e._v("答题")])],1)],1),a("div",{staticClass:"router-view-wrap"},[e.paperItem?a("div",{staticClass:"router-view-content"},[a("div",[a("div",[a("el-radio-group",{model:{value:e.participantId,callback:function(t){e.participantId=t},expression:"participantId"}},e._l(e.answerMemberListData,function(t,s){return a("el-radio-button",{attrs:{label:t.id}},[e._v(e._s(t.user_name))])}))],1),a("hr"),a("el-form",{ref:"paperItem",attrs:{model:e.paperItem,"label-width":"120px"}},[a("el-row",{staticClass:"mard10"},[a("el-col",{staticClass:"mard10",attrs:{span:12}},[a("span",[e._v(e._s(e.paperItem.name))])]),a("el-col",{staticClass:"mard10",attrs:{span:12}},[a("span",[e._v(e._s(e.questionaireType(e.paperItem.type)))])]),a("el-col",{staticClass:"mart10",attrs:{span:24}},[a("span",[e._v(e._s(e.paperItem.description))])])],1)],1),a("el-card",{attrs:{shadow:"never"}},[e._l(e.qItems,function(t,s){return a("div",{key:s,staticClass:"questions-box mart5"},[a("div",[e._v(e._s(s+1)+"、")]),a("el-card",{staticClass:"questions-content",attrs:{shadow:"never"}},[a("el-row",{staticClass:"mard10"},[a("el-col",{staticClass:"div-flex",attrs:{span:17}},[a("div",{staticClass:"label-2 label marr5"},[e._v("题干: ")]),a("div",[1==t.type?a("span",[e._v(e._s(t.question))]):e._e(),2==t.type?a("span",[e._v(e._s(t.question)+" （最多能选择"+e._s(t.max_option)+"项）")]):e._e(),4==t.type?a("span",[e._v(e._s(t.question)+"（最大分数："+e._s(t.score)+"分）")]):e._e()])]),a("el-col",{staticClass:"text-right question-type",attrs:{offset:1,span:5}},[e._v("\n                  "+e._s(e.numMatchingText(t.type))+"\n                ")])],1),a("el-row",{staticClass:"mard10"},[a("el-col",{attrs:{span:22}},[a("div",{staticStyle:{"margin-left":"60px"}},[1==t.type?a("el-radio-group",{model:{value:t.answer,callback:function(a){e.$set(t,"answer",a)},expression:"item.answer"}},e._l(t.options,function(t,s){return a("div",{key:s,staticClass:"div-flex mart10 flex-align-items"},[a("el-radio",{staticClass:"marl5",attrs:{disabled:!!e.sheet_id,label:t.id}},[e._v("\n                          选项"+e._s(s+1)+"：（"+e._s(t.score)+"分）"+e._s(t.answer)+"\n                        ")])],1)})):e._e(),2==t.type?a("el-checkbox-group",{attrs:{max:t.max_option},model:{value:t.answer,callback:function(a){e.$set(t,"answer",a)},expression:"item.answer"}},e._l(t.options,function(t,s){return a("div",{key:s,staticClass:"div-flex mart10 flex-align-items"},[a("el-checkbox",{staticClass:"marl5",attrs:{disabled:!!e.sheet_id,label:t.id}},[e._v(" \n                          选项"+e._s(s+1)+"：（"+e._s(t.score)+"分）"+e._s(t.answer)+"\n                        ")])],1)})):e._e(),4==t.type?a("div",[a("el-input",{attrs:{disabled:!!e.sheet_id,type:"textarea",rows:"5"},model:{value:t.answer,callback:function(a){e.$set(t,"answer",a)},expression:"item.answer"}}),a("div",{staticClass:"div-flex mart10"},[e._v("\n                        *得分："),a("el-input-number",{attrs:{disabled:!!e.sheet_id,max:t.score},model:{value:t.scoreA,callback:function(a){e.$set(t,"scoreA",a)},expression:"item.scoreA"}}),e._v(" 分\n                      ")],1)],1):e._e()],1)])],1)],1)],1)}),a("div",{staticClass:"text-right mart10"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.sheet_id,expression:"!sheet_id"}],attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")])],1)],2)],1)]):e._e()])],1)},r=[],i=(a("c5f6"),a("28a5"),a("ac6a"),a("cadf"),a("551c"),a("097d"),{data:function(){return{questionTypeText:null,paperItem:null,qItems:[],answerMemberListData:[],participantId:"default",sheet_id:null}},components:{},computed:{},watch:{participantId:function(e,t){"default"!=t&&(this._isHasSheetId(),this.getQueryQuestionnaireList())}},mounted:function(){this.getQueryPaperDetail(),this.getQueryAnswerMember()},methods:{getQueryAnswerMember:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/qanswer/member/").concat(this.$route.params.task_id),"").then(function(t){e.answerMemberListData=t.data.data,"default"==e.participantId&&(e.participantId=t.data.data?t.data.data[0].id:""),e._isHasSheetId(),e.getQueryQuestionnaireList()}).catch(function(t){e.$message.error(t)})},questionaireType:function(e){switch(e){case 1:return"评价教学";case 2:return"互评";case 3:return"自评"}},numMatchingText:function(e){switch(e){case 1:return this.questionTypeText="单选题";case 2:return this.questionTypeText="多选题";case 3:return this.questionTypeText="判断题";case 4:return this.questionTypeText="评语"}},getQueryPaperDetail:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/questionnaire/").concat(this.$route.params.questionnaire_id),"").then(function(t){e.paperItem=t.data.data}).catch(function(t){e.$message.error(t)})},getQueryQuestionnaireList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/qitem"),{params:{questionnaire_id:this.$route.params.questionnaire_id,sheet_id:this.sheet_id}}).then(function(t){e.qItems=e._convertQItems(t.data.data.rows)}).catch(function(t){e.$message.error(t)})},_convertQItems:function(e){return e.forEach(function(e){1==e.type?e.answer=e.answer?parseInt(e.answer.answer):null:2==e.type?e.answer=e.answer?e.answer.answer.split(",").map(Number):[]:4==e.type&&(e.scoreA=e.answer?e.answer.score:null,e.answer=e.answer?e.answer.answer:null)}),e},submit:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/qanswer/answer/").concat(this.$route.params.questionnaire_id,"/").concat(this.participantId,"/").concat(this.$route.params.task_id),this._convertAnswer()).then(function(t){e.getQueryAnswerMember(),e.$message.success(t.data.meta.message)}).catch(function(t){e.$message.error(t)})},_convertAnswer:function(){var e=[];return this.qItems.forEach(function(t){2==t.type?e.push({item_id:t.id,answer:t.answer.join(",")}):4==t.type?e.push({item_id:t.id,answer:t.answer,score:t.scoreA}):e.push({item_id:t.id,answer:t.answer})}),e},_isHasSheetId:function(){var e=this;this.answerMemberListData&&this.answerMemberListData.forEach(function(t){t.id==e.participantId&&(e.sheet_id=t.sheet_id)})}}}),n=i,o=(a("ab45"),a("2877")),c=Object(o["a"])(n,s,r,!1,null,null,null);c.options.__file="QuestionnaireScore.vue";t["default"]=c.exports},aa77:function(e,t,a){var s=a("5ca1"),r=a("be13"),i=a("79e5"),n=a("fdef"),o="["+n+"]",c="​",u=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),d=function(e,t,a){var r={},o=i(function(){return!!n[e]()||c[e]()!=c}),u=r[e]=o?t(p):n[e];a&&(r[a]=u),s(s.P+s.F*o,"String",r)},p=d.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(l,"")),e};e.exports=d},ab45:function(e,t,a){"use strict";var s=a("34d6"),r=a.n(s);r.a},c5f6:function(e,t,a){"use strict";var s=a("7726"),r=a("69a8"),i=a("2d95"),n=a("5dbc"),o=a("6a99"),c=a("79e5"),u=a("9093").f,l=a("11e9").f,d=a("86cc").f,p=a("aa77").trim,m="Number",f=s[m],h=f,_=f.prototype,v=i(a("2aeb")(_))==m,w="trim"in String.prototype,b=function(e){var t=o(e,!1);if("string"==typeof t&&t.length>2){t=w?t.trim():p(t,3);var a,s,r,i=t.charCodeAt(0);if(43===i||45===i){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:s=2,r=49;break;case 79:case 111:s=8,r=55;break;default:return+t}for(var n,c=t.slice(2),u=0,l=c.length;u<l;u++)if(n=c.charCodeAt(u),n<48||n>r)return NaN;return parseInt(c,s)}}return+t};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof f&&(v?c(function(){_.valueOf.call(a)}):i(a)!=m)?n(new h(b(t)),a,f):b(t)};for(var x,g=a("9e1e")?u(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;g.length>I;I++)r(h,x=g[I])&&!r(f,x)&&d(f,x,l(h,x));f.prototype=_,_.constructor=f,a("2aba")(s,m,f)}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-711d.35ba9180.js.map