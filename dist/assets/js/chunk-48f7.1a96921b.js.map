{"version":3,"sources":["webpack:///./src/views/lessonManage/AttendanceSheet.vue?54ec","webpack:///src/views/lessonManage/AttendanceSheet.vue","webpack:///./src/views/lessonManage/AttendanceSheet.vue?12d2","webpack:///./src/views/lessonManage/AttendanceSheet.vue","webpack:///./src/views/lessonManage/AttendanceSheet.vue?de3f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","separator-class","to","path","_v","name","params","id","$route","experiment_id","staticStyle","overflow-x","attendanceSheetData","length","_e","width","border","model","value","callback","$$v","isAllChecked","expression","_l","item","index","_s","taskName","itemTit","indexTit","key","$set","account","itemVal","indexVal","score","scores","disabled","common","checkAuthority","type","on","click","showEditSheetDialog","downloadSheetModule","size","url","isDisabled","fileTypes","buttonText","uploadSuccess","importSheet","title","visible","editSheetDialog","update:visible","$event","ref","editSheetForm","label-width","label","prop","rules","required","message","trigger","taskId","placeholder","slot","editSheet","staticRenderFns","AttendanceSheetvue_type_script_lang_js_","components","upload","Upload","data","accounts","time","mounted","getQueryList","watch","val","forEach","checked","methods","_this","axios","get","concat","basePath","then","response","_listAddCheckedKey","catch","error","$message","checkboxChange","ev","push","deleteAccount","i","splice","_this2","warning","$refs","resetFields","formName","_this3","validate","valid","getTime","post","success","meta","_this4","responseType","_fileBold","lessonManage_AttendanceSheetvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_AttendanceSheet_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_AttendanceSheet_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"assets/js/chunk-48f7.1a96921b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content-wrap-box\"},[_c('el-card',{staticClass:\"title-card\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/lesson/testlist' }}},[_vm._v(\"实验列表\")]),_c('el-breadcrumb-item',{attrs:{\"to\":{ name: 'TestDetail', params: {id: _vm.$route.params.experiment_id} }}},[_vm._v(\"实验详情\")]),_c('el-breadcrumb-item',[_vm._v(\"考勤表\")])],1)],1),_c('div',{staticClass:\"router-view-wrap\"},[_c('div',{staticClass:\"router-view-content\"},[_c('div',{staticStyle:{\"overflow-x\":\"auto\"}},[(!_vm.attendanceSheetData.length)?_c('div',{staticClass:\"text-center\"},[_vm._v(\"\\n          暂无考勤\\n        \")]):_vm._e(),(_vm.attendanceSheetData.length)?_c('table',{staticClass:\"hand-table\",staticStyle:{\"width\":\"max-content\"}},[_c('thead',{attrs:{\"border\":\"1\"}},[_c('tr',[_c('td',[_c('el-checkbox',{model:{value:(_vm.isAllChecked),callback:function ($$v) {_vm.isAllChecked=$$v},expression:\"isAllChecked\"}})],1),_c('td',[_vm._v(\"学 号\")]),_c('td',[_vm._v(\"姓 名\")]),_vm._l((_vm.attendanceSheetData[0].info),function(item,index){return _c('td',[_vm._v(\"\\n                \"+_vm._s(item.taskName)+\"   \\n              \")])}),_c('td',[_vm._v(\"得分\")])],2)]),_c('tbody',_vm._l((_vm.attendanceSheetData),function(itemTit,indexTit){return _c('tr',{key:indexTit},[_c('td',{staticClass:\"tab-index-class\"},[_c('el-checkbox',{model:{value:(itemTit.checked),callback:function ($$v) {_vm.$set(itemTit, \"checked\", $$v)},expression:\"itemTit.checked\"}})],1),_c('td',{staticClass:\"tab-index-class\"},[_vm._v(_vm._s(itemTit.account))]),_c('td',{staticClass:\"tab-index-class\"},[_vm._v(_vm._s(itemTit.name))]),_vm._l((itemTit.info),function(itemVal,indexVal){return _c('td',{key:indexVal,staticClass:\"tab-content-class\"},[_vm._v(_vm._s(itemVal.score))])}),_c('td',{staticClass:\"tab-index-class\"},[_vm._v(_vm._s(itemTit.scores))])],2)}))]):_vm._e()]),_c('div',{staticClass:\"router-view-bottom mart20\"},[_c('div',[_c('el-button',{attrs:{\"disabled\":!_vm.common.checkAuthority('AttendanceSheet_Edit', true),\"type\":\"primary\"},on:{\"click\":_vm.showEditSheetDialog}},[_vm._v(\"\\n              \"+_vm._s(_vm.common.checkAuthority('AttendanceSheet_Edit') ? _vm.common.checkAuthority('AttendanceSheet_Edit').name : '')+\"\\n          \")]),_c('el-button',{attrs:{\"disabled\":!_vm.common.checkAuthority('AttendanceSheet_DownloadSheetModule', true),\"type\":\"primary\"},on:{\"click\":_vm.downloadSheetModule}},[_vm._v(\"\\n            \"+_vm._s(_vm.common.checkAuthority('AttendanceSheet_DownloadSheetModule') ? _vm.common.checkAuthority('AttendanceSheet_DownloadSheetModule').name : '')+\"\\n          \")]),_c('upload',{staticClass:\"fl marl10\",attrs:{\"size\":\"middle\",\"url\":\"/work/import\",\"isDisabled\":!_vm.common.checkAuthority('AttendanceSheet_Import', true),\"fileTypes\":['xls','xlsx'],\"buttonText\":_vm.common.checkAuthority('AttendanceSheet_Import') ? _vm.common.checkAuthority('AttendanceSheet_Import').name : ''},on:{\"uploadSuccess\":_vm.importSheet}})],1)])])]),(_vm.attendanceSheetData.length)?_c('el-dialog',{attrs:{\"width\":\"550px\",\"title\":\"编辑考勤\",\"visible\":_vm.editSheetDialog},on:{\"update:visible\":function($event){_vm.editSheetDialog=$event}}},[_c('el-form',{ref:\"editSheetForm\",attrs:{\"model\":_vm.editSheetForm,\"label-width\":\"110px\"}},[_c('el-form-item',{attrs:{\"label\":\"任务：\",\"prop\":\"taskId\",\"rules\":[{ required: true, message: '请选择任务', trigger: 'blur' } ]}},[_c('el-select',{model:{value:(_vm.editSheetForm.taskId),callback:function ($$v) {_vm.$set(_vm.editSheetForm, \"taskId\", $$v)},expression:\"editSheetForm.taskId\"}},_vm._l((_vm.attendanceSheetData[0].info),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.taskName,\"value\":item.taskId}})}))],1),_c('el-form-item',{attrs:{\"label\":\"类型：\",\"prop\":\"type\",\"rules\":[{ required: true, message: '请选择类型', trigger: 'blur' } ]}},[_c('el-radio-group',{model:{value:(_vm.editSheetForm.type),callback:function ($$v) {_vm.$set(_vm.editSheetForm, \"type\", $$v)},expression:\"editSheetForm.type\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"补卡\")]),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"清空打卡\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"补卡时间：\",\"prop\":\"time\",\"rules\":[{ required: true, message: '请选择补卡时间', trigger: 'blur' } ]}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.editSheetForm.time),callback:function ($$v) {_vm.$set(_vm.editSheetForm, \"time\", $$v)},expression:\"editSheetForm.time\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editSheetDialog = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.editSheet('editSheetForm')}}},[_vm._v(\"保 存\")])],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*********** 考勤表 ************/\r\n<template>\r\n  <div class=\"content-wrap-box\">\r\n    <!-- 头部导航栏 -->\r\n    <el-card class=\"title-card\">\r\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n        <el-breadcrumb-item :to=\"{ path: '/lesson/testlist' }\">实验列表</el-breadcrumb-item>\r\n        <el-breadcrumb-item :to=\"{ name: 'TestDetail', params: {id: $route.params.experiment_id} }\">实验详情</el-breadcrumb-item>\r\n        <el-breadcrumb-item>考勤表</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </el-card>\r\n    <div class=\"router-view-wrap\">\r\n      <!-- 页面主要内容 -->\r\n      <div class=\"router-view-content\"> \r\n        <div style=\" overflow-x: auto; \">\r\n          <div class=\"text-center\" v-if=\"!attendanceSheetData.length\">\r\n            暂无考勤\r\n          </div> \r\n          <table v-if=\"attendanceSheetData.length\" class=\"hand-table\" style=\" width: max-content; \">\r\n            <thead border=\"1\">\r\n              <tr>\r\n                <td><el-checkbox v-model=\"isAllChecked\"></el-checkbox></td>\r\n                <td>学 号</td>\r\n                <td>姓 名</td> \r\n                <td  \r\n                  v-for=\"(item, index) in attendanceSheetData[0].info\">\r\n                  {{item.taskName}}   \r\n                </td>\r\n                <td>得分</td>\r\n              </tr>\r\n            </thead>\r\n            <tbody> \r\n              <tr v-for=\"(itemTit, indexTit) in attendanceSheetData\" :key=\"indexTit\">\r\n                <td class=\"tab-index-class\"> \r\n                  <el-checkbox v-model=\"itemTit.checked\"></el-checkbox>\r\n                </td>\r\n                <td class=\"tab-index-class\">{{itemTit.account}}</td>\r\n                <td class=\"tab-index-class\">{{itemTit.name}}</td>\r\n                <td class=\"tab-content-class\" v-for=\"(itemVal, indexVal) in itemTit.info\" :key=\"indexVal\">{{itemVal.score}}</td>\r\n                <td class=\"tab-index-class\">{{itemTit.scores}}</td>\r\n              </tr> \r\n            </tbody>\r\n          </table>   \r\n        </div>\r\n        <!-- 页面底部 -->\r\n        <div class=\"router-view-bottom mart20\">\r\n          <div>\r\n            <!-- 编辑 -->\r\n            <el-button \r\n              :disabled=\"!common.checkAuthority('AttendanceSheet_Edit', true)\"\r\n              type=\"primary\" @click=\" showEditSheetDialog \">\r\n                {{common.checkAuthority('AttendanceSheet_Edit') ? common.checkAuthority('AttendanceSheet_Edit').name : ''}}\r\n            </el-button>\r\n            <!-- 下载模板 -->\r\n            <el-button \r\n              :disabled=\"!common.checkAuthority('AttendanceSheet_DownloadSheetModule', true)\"\r\n              type=\"primary\" @click=\" downloadSheetModule \">\r\n              {{common.checkAuthority('AttendanceSheet_DownloadSheetModule') ? common.checkAuthority('AttendanceSheet_DownloadSheetModule').name : ''}}\r\n            </el-button> \r\n            <!-- 导入 --> \r\n            <upload \r\n              size=\"middle\"\r\n              class=\"fl marl10\"\r\n              :url=\"`/work/import`\"\r\n              :isDisabled=\"!common.checkAuthority('AttendanceSheet_Import', true)\"\r\n              :fileTypes=\"['xls','xlsx']\"\r\n              :buttonText=\"common.checkAuthority('AttendanceSheet_Import') ? common.checkAuthority('AttendanceSheet_Import').name : ''\" \r\n              @uploadSuccess=\"importSheet\"></upload> \r\n          </div> \r\n        </div>\r\n      </div> \r\n    </div>\r\n    <!-- 编辑考勤 -->\r\n    <el-dialog \r\n      v-if=\"attendanceSheetData.length\"\r\n      width=\"550px\"\r\n      title=\"编辑考勤\" \r\n      :visible.sync=\"editSheetDialog\">\r\n        <el-form ref=\"editSheetForm\" :model=\"editSheetForm\" label-width=\"110px\" >\r\n          <el-form-item \r\n            label=\"任务：\" \r\n            prop=\"taskId\"\r\n            :rules=\"[{ required: true, message: '请选择任务', trigger: 'blur' },]\">\r\n            <el-select v-model=\"editSheetForm.taskId\">\r\n              <el-option \r\n                v-for=\"(item, index) in attendanceSheetData[0].info\"\r\n                :key=\"index\"\r\n                :label=\"item.taskName\"\r\n                :value=\"item.taskId\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item \r\n            label=\"类型：\" \r\n            prop=\"type\"\r\n            :rules=\"[{ required: true, message: '请选择类型', trigger: 'blur' },]\">\r\n            <el-radio-group v-model=\"editSheetForm.type\">\r\n              <el-radio :label=\"1\">补卡</el-radio>\r\n              <el-radio :label=\"2\">清空打卡</el-radio> \r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item \r\n            label=\"补卡时间：\" \r\n            prop=\"time\"\r\n            :rules=\"[{ required: true, message: '请选择补卡时间', trigger: 'blur' },]\">\r\n            <el-date-picker\r\n              v-model=\"editSheetForm.time\"\r\n              type=\"date\"\r\n              placeholder=\"选择日期\">\r\n            </el-date-picker>\r\n          </el-form-item> \r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"editSheetDialog = false\">取 消</el-button> \r\n          <el-button @click=\"editSheet('editSheetForm')\" type=\"primary\">保 存</el-button> \r\n        </div>\r\n      </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n  import upload from \"../../components/Upload.vue\"\r\n  export default {\r\n    components:{   \r\n      'upload':                upload,\r\n    },\r\n    data() {\r\n      return { \r\n        editSheetDialog:     false,\r\n        isAllChecked:        false, //true为全选\r\n        attendanceSheetData: [], \r\n        editSheetForm:       {\r\n          accounts:     [],   //用户学号、工号集合\r\n          taskId:       null, //任务Id\r\n          type:         null, //补卡1，清空2\r\n          time:         null, //\r\n        }\r\n      }\r\n    },\r\n    mounted(){\r\n      this.getQueryList(); \r\n    },\r\n    watch:{\r\n      isAllChecked(val){ \r\n        this.attendanceSheetData.forEach((item) => {\r\n          item.checked = !item.checked;\r\n        });\r\n      }\r\n    },\r\n    methods: {  \r\n      /*\r\n       * 查询课程列表， \r\n       */\r\n      getQueryList(){  \r\n        this.axios.get(`${this.common.basePath}/work/check/experimentId`,{params: {id: this.$route.params.experiment_id}}).then((response) => {\r\n          this.attendanceSheetData = this._listAddCheckedKey(response.data.data);\r\n        }).catch((error) => {\r\n          this.$message.error(error);  \r\n        });\r\n      },\r\n      /*\r\n       * 在列表中添加checked键\r\n       */\r\n      _listAddCheckedKey(data){\r\n        if(data){\r\n          data.forEach((item) => {\r\n            item.checked = false;\r\n          });\r\n        }\r\n        return data;\r\n      },\r\n      checkboxChange(ev, item){\r\n        debugger\r\n        ev ? this.editSheetForm.accounts.push(item.account) : this.deleteAccount(item.account);\r\n      },\r\n      deleteAccount(account){\r\n        for(var i = 0;i<this.editSheetForm.accounts.length;i++){this.editSheetForm.accounts[i]===account ? this.editSheetForm.accounts.splice(i,1) : this.editSheetForm.accounts;};\r\n      },\r\n      showEditSheetDialog(){\r\n        // ---------- 获取被选中人员的账号 --------\r\n        this.editSheetForm.accounts = [];\r\n        this.attendanceSheetData.forEach((item) => {\r\n          if(item.checked){\r\n            this.editSheetForm.accounts.push(item.account);\r\n          }\r\n        });\r\n        // ---------- 验证是否被选中的学生 --------\r\n        if(!this.editSheetForm.accounts.length) {\r\n          this.$message.warning('请选择学生');\r\n          return false;\r\n        }\r\n        this.$refs.editSheetForm ? this.$refs.editSheetForm.resetFields() : '';\r\n        this.editSheetDialog = true;\r\n      },\r\n      editSheet(formName){\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            this.editSheetForm.time = this.editSheetForm.time.getTime();\r\n            this.axios.post(`${this.common.basePath}/work/edit`,this.editSheetForm).then((response) => {\r\n              this.$message.success(response.data.meta.message); \r\n              this.getQueryList();\r\n              this.editSheetDialog = false;\r\n              this.isAllChecked = false;\r\n            }).catch((error) => {\r\n              this.$message.error(error); \r\n              this.editSheetDialog = false; \r\n            });\r\n          } else { \r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      /*\r\n       * 导入表格成功\r\n       */ \r\n      importSheet(){\r\n        this.getQueryList();\r\n      },\r\n      /*\r\n       * 下载表格模板\r\n       */\r\n      downloadSheetModule(){\r\n        this.axios.get(`${this.common.basePath}/work/export`,\r\n          {params: {experiment_id: this.$route.params.experiment_id},responseType: \"blob\"}).then((response) => {\r\n          this.common._fileBold(response);\r\n          this.$message.success('下载成功'); \r\n        }).catch((error) => {\r\n          this.$message.error(error);  \r\n        });\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"less\">\r\n  \r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AttendanceSheet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AttendanceSheet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AttendanceSheet.vue?vue&type=template&id=f91fa878&\"\nimport script from \"./AttendanceSheet.vue?vue&type=script&lang=js&\"\nexport * from \"./AttendanceSheet.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AttendanceSheet.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"AttendanceSheet.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AttendanceSheet.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AttendanceSheet.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}