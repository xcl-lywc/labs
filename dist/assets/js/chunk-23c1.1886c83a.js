(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23c1"],{"964a":function(e,t,s){"use strict";var a=s("bd52"),r=s.n(a);r.a},bd52:function(e,t,s){},c385:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"contentWrap",staticClass:"content-wrap-box"},[s("el-card",{staticClass:"title-card"},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{staticClass:"text-bold"},[s("div",{staticClass:"breadcrumb-div"},[s("div",{staticClass:"fl text-left-div"},[e._v("课程列表")]),s("div",{staticClass:"text-right fr"},[s("el-button",{attrs:{disabled:!e.common.checkAuthority("LessonList_Add",!0),type:"primary"},on:{click:function(t){e.courseOperaDialog=!0,e.$refs.courseForm&&e.$refs.courseForm.resetFields()}}},[e._v("\n              "+e._s(e.common.checkAuthority("LessonList_Add")?e.common.checkAuthority("LessonList_Add").name:"")+"\n            ")]),s("el-button",{attrs:{disabled:!e.common.checkAuthority("LessonList_UseBaseAdd",!0),type:"primary"},on:{click:function(t){e.baseCourseOperaDialog=!0}}},[e._v("\n              "+e._s(e.common.checkAuthority("LessonList_UseBaseAdd")?e.common.checkAuthority("LessonList_UseBaseAdd").name:"")+"\n            ")]),s("el-button",{attrs:{disabled:e.isDisabaledDelBtn(),type:"danger"},on:{click:e.deleteCourse}},[e._v("\n              "+e._s(e.common.checkAuthority("LessonList_Delete")?e.common.checkAuthority("LessonList_Delete").name:"")+"\n            ")])],1)])])],1)],1),s("el-card",{staticClass:"operation-router-view-wrap mar15",attrs:{"body-style":{"padding-bottom":"0px"}}},[s("el-form",{ref:"searchForm",attrs:{model:e.searchForm,inline:!0,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"课程名称：",prop:"name"}},[s("el-input",{model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),s("el-form-item",{attrs:{label:"时间："}},[s("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateTE,callback:function(t){e.dateTE=t},expression:"dateTE"}})],1),s("el-form-item",{attrs:{label:"课程状态：",prop:"condition"}},[s("el-select",{model:{value:e.searchForm.condition,callback:function(t){e.$set(e.searchForm,"condition",t)},expression:"searchForm.condition"}},[s("el-option",{attrs:{value:"1",label:"我参与"}}),s("el-option",{attrs:{value:"2",label:"没老师"}}),s("el-option",{attrs:{value:"3",label:"没学生"}}),s("el-option",{attrs:{value:"4",label:"没实验"}})],1)],1),s("el-form-item",{attrs:{label:"学年：",prop:"c_year"}},[s("el-select",{on:{change:function(t){e.yearChange(t,"search")}},model:{value:e.searchForm.c_year,callback:function(t){e.$set(e.searchForm,"c_year",t)},expression:"searchForm.c_year"}},e._l(e.yearList.rows,function(e,t){return s("el-option",{key:t,attrs:{value:e.id,label:e.name}})}))],1),s("el-form-item",{attrs:{label:"学期：",prop:"c_stage"}},[s("el-select",{model:{value:e.searchForm.c_stage,callback:function(t){e.$set(e.searchForm,"c_stage",t)},expression:"searchForm.c_stage"}},e._l(e.schoolList.rows,function(e,t){return s("el-option",{key:t,attrs:{value:e.id,label:e.name}})}))],1),s("el-form-item",[s("el-button",{attrs:{disabled:!e.common.checkAuthority("LessonList_QueryList",!0),type:"primary"},on:{click:function(t){e.getQueryList(!0)}}},[e._v("\n            "+e._s(e.common.checkAuthority("LessonList_QueryList")?e.common.checkAuthority("LessonList_QueryList").name:"")+"\n          ")]),s("el-button",{attrs:{type:"primary"},on:{click:e.resetSearchForm}},[e._v("置空")])],1)],1)],1),s("div",{ref:"contentWrap",staticClass:"router-view-wrap mart0"},[s("div",{staticClass:"router-view-content"},[s("el-checkbox-group",{attrs:{size:"small"},model:{value:e.ids,callback:function(t){e.ids=t},expression:"ids"}},[s("el-row",{staticClass:"padding-row"},[e._l(e.listData.rows,function(t,a){return e.listData.rows.length?s("el-col",{key:a,attrs:{span:8}},[s("el-card",{staticClass:"card-wrap card-wrap_s"},[s("el-tag",{staticClass:"width-percentage"},[s("h3",{staticClass:"card-title"},[s("el-checkbox",{attrs:{label:t.id,disabled:!e.common.checkAuthority("TestList_Delete",!0)}},[e._v(" ")]),s("span",{staticClass:"card-title cursor-pointer",staticStyle:{"margin-left":"-5px"},on:{click:function(s){e.goToDetail(t.id)}}},[e._v(e._s(t.name))])],1)]),s("div",{staticClass:"card-content cursor-pointer",staticStyle:{height:"210px"}},[s("p",{staticClass:"marl25 marb0 mart5",on:{click:function(s){e.goToDetail(t.id)}}},[e._v("课程代码："+e._s(t.c_code))]),s("p",{staticClass:"marl25 marb0 mart5",on:{click:function(s){e.goToDetail(t.id)}}},[e._v("学年学期："+e._s(t.c_year?t.c_year+"学年"+t.cStageName:"无"))]),s("p",{staticClass:"marl25 marb0 mart5",on:{click:function(s){e.goToDetail(t.id)}}},[e._v("课程教师："+e._s(t.c_teacher))]),s("div",{staticClass:"marl25 marb0 mart5 display-flex",on:{click:function(s){e.goToDetail(t.id)}}},[s("p",{staticClass:"mar0 inline-block"},[e._v("课程简介：")]),s("p",{staticClass:"mar0 inline-block cursor-pointer_T"},[e._v(e._s(t.description))])])]),s("div",{staticClass:"cursor-pointer marl25"},[t.experiments.length?s("div",{staticStyle:{display:"flex"}},[s("p",{staticClass:"inline-block marb0 mart0"},[e._v("实验列表：")]),s("div",{staticClass:"inline-block marb0"},e._l(t.experiments,function(t,a){return s("p",{staticClass:"mar0 marb5"},[s("el-button",{staticClass:" pad0",attrs:{disabled:!e.common.checkAuthority("LessonList_QueryExersiceDetail",!0),type:"text",size:"mini"},on:{click:function(s){e.goToExersice(t.id)}}},[e._v(e._s(t.name))])],1)}))]):e._e(),t.experiments.length?e._e():s("p",{on:{click:function(s){e.goToDetail(t.id)}}},[e._v("\n                  实验列表：暂无实验\n                ")])])],1)],1):e._e()}),e.listData.rows.length?e._e():s("el-col",{staticClass:"padding-row text-center text-info",attrs:{span:24}},[e._v("暂无数据")])],2)],1)],1),s("el-dialog",{attrs:{width:"550px",title:"添加课程",visible:e.courseOperaDialog},on:{"update:visible":function(t){e.courseOperaDialog=t}}},[s("el-form",{ref:"courseForm",attrs:{model:e.courseForm,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"课程名称：",prop:"name",rules:[{required:!0,message:"请输入课程名称",trigger:"blur"},{validator:function(t,s,a){e.common.wordNumberValid(t,s,a,"single")},trigger:"blur"}]}},[s("el-input",{model:{value:e.courseForm.name,callback:function(t){e.$set(e.courseForm,"name",t)},expression:"courseForm.name"}})],1),s("el-form-item",{attrs:{label:"课程代码：",prop:"c_code",rules:[{required:!0,message:"请输入课程代码",trigger:"blur"},{validator:function(t,s,a){e.common.wordNumberValid(t,s,a,"single")},trigger:"blur"}]}},[s("el-input",{model:{value:e.courseForm.c_code,callback:function(t){e.$set(e.courseForm,"c_code",t)},expression:"courseForm.c_code"}})],1),s("el-form-item",{attrs:{label:"课程教师：",prop:"c_teacher",rules:[{required:!0,message:"请输入课程教师",trigger:"blur"},{validator:function(t,s,a){e.common.wordNumberValid(t,s,a,"single")},trigger:"blur"}]}},[s("el-input",{model:{value:e.courseForm.c_teacher,callback:function(t){e.$set(e.courseForm,"c_teacher",t)},expression:"courseForm.c_teacher"}})],1),s("el-form-item",{attrs:{label:"学年：",prop:"c_year",rules:[{required:!0,message:"请输入学年",trigger:"blur"}]}},[s("el-select",{on:{change:function(t){e.yearChange(t,"add")}},model:{value:e.courseForm.c_year,callback:function(t){e.$set(e.courseForm,"c_year",t)},expression:"courseForm.c_year"}},e._l(e.yearList.rows,function(e,t){return s("el-option",{key:t,attrs:{value:e.id,label:e.name}})}))],1),s("el-form-item",{attrs:{label:"学期：",prop:"c_stage",rules:[{required:!0,message:"请选择学期",trigger:"blur"}]}},[s("el-select",{model:{value:e.courseForm.c_stage,callback:function(t){e.$set(e.courseForm,"c_stage",t)},expression:"courseForm.c_stage"}},e._l(e.schoolList.rows,function(e,t){return s("el-option",{key:t,attrs:{value:e.id,label:e.name}})}))],1),s("el-form-item",{attrs:{label:"课程性质：",prop:"c_nature",rules:[{required:!0,message:"请输入课程性质",trigger:"blur"},{validator:function(t,s,a){e.common.wordNumberValid(t,s,a,"single")},trigger:"blur"}]}},[s("el-input",{model:{value:e.courseForm.c_nature,callback:function(t){e.$set(e.courseForm,"c_nature",t)},expression:"courseForm.c_nature"}})],1),s("el-form-item",{attrs:{label:"课程简介：",prop:"description",rules:[{required:!0,message:"请输入课程简介",trigger:"blur"},{validator:function(t,s,a){e.common.wordNumberValid(t,s,a,"textarea")},trigger:"blur"}]}},[s("el-input",{attrs:{type:"textarea",rows:6},model:{value:e.courseForm.description,callback:function(t){e.$set(e.courseForm,"description",t)},expression:"courseForm.description"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.courseOperaDialog=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitCourse("courseForm")}}},[e._v("保存")])],1)],1),s("el-dialog",{attrs:{width:"550px",title:"创建模板课程",visible:e.baseCourseOperaDialog},on:{"update:visible":function(t){e.baseCourseOperaDialog=t}}},[s("el-form",{ref:"baseCourseForm",attrs:{model:e.baseCourseForm,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"模板：",prop:"baseCourseID",rules:[{required:!0,message:"请选择模板",trigger:"blur"}]}},[s("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.baseCourseForm.baseCourseID,callback:function(t){e.$set(e.baseCourseForm,"baseCourseID",t)},expression:"baseCourseForm.baseCourseID"}},e._l(e.baseCourseList.rows,function(e,t){return s("el-option",{attrs:{value:e.id,label:e.name}})}))],1),s("el-form-item",{attrs:{label:"学年：",prop:"cYear",rules:[{required:!0,message:"请输入学年",trigger:"blur"}]}},[s("el-select",{on:{change:function(t){e.yearChange(t,"add")}},model:{value:e.baseCourseForm.cYear,callback:function(t){e.$set(e.baseCourseForm,"cYear",t)},expression:"baseCourseForm.cYear"}},e._l(e.yearList.rows,function(e,t){return s("el-option",{key:t,attrs:{value:e.id,label:e.name}})}))],1),s("el-form-item",{attrs:{label:"学期：",prop:"cStage",rules:[{required:!0,message:"请输入学期",trigger:"blur"}]}},[s("el-select",{model:{value:e.baseCourseForm.cStage,callback:function(t){e.$set(e.baseCourseForm,"cStage",t)},expression:"baseCourseForm.cStage"}},e._l(e.schoolList.rows,function(e,t){return s("el-option",{key:t,attrs:{value:e.id,label:e.name}})}))],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.baseCourseOperaDialog=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitBaseCourse("baseCourseForm")}}},[e._v("保存")])],1)],1)],1)],1)},r=[],o={data:function(){return{ids:[],scrollLoadSw:!0,courseOperaDialog:!1,baseCourseOperaDialog:!1,dateTE:null,searchForm:{name:null,cur_status:null,begin_time:null,end_time:null,condition:null,c_year:null,c_stage:null,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},baseCourseList:{total:0,rows:[]},yearList:{total:0,rows:[]},schoolList:{total:0,rows:[]},listData:{total:0,rows:[]},courseForm:{name:null,description:null,c_code:null,c_teacher:null,c_nature:null,c_year:null,c_stage:null},baseCourseForm:{cYear:null,cStage:null,baseCourseID:null}}},watch:{courseOperaDialog:function(e,t){this.$refs.courseForm&&this.$refs.courseForm.resetFields(),e||this.getSchoolList(this.searchForm.c_year)},baseCourseOperaDialog:function(e,t){this.$refs.baseCourseForm&&this.$refs.baseCourseForm.resetFields(),e||this.getSchoolList(this.searchForm.c_year)}},mounted:function(){var e=this,t=this.$refs.contentWrap;t.addEventListener("scroll",function(){t.clientHeight+50>=t.scrollHeight-t.scrollTop&&e.scrollLoadSw&&(e.scrollLoadSw=!1,e.searchForm.pageNum<e.listData.total/e.searchForm.pageSize&&e.getQueryList(!1))},!1),this.getQueryList(!0),this.getQueryBaseCourse(),this.getYearList(),this.getDefaultYearSchool()},methods:{getDefaultYearSchool:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/configSemester/now"),{}).then(function(t){if(t.data.data)for(var s in t.data.data)"学年"==s?(e.searchForm.c_year=t.data.data[s],e.getSchoolList(e.searchForm.c_year)):"学期"==s&&(e.searchForm.c_stage=t.data.data[s])}).catch(function(t){e.$message.error(t)})},getYearList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/configSemester?type_id=1"),{}).then(function(t){e.yearList=t.data.data}).catch(function(t){e.$message.error(t)})},getSchoolList:function(e){var t=this;this.axios.get("".concat(this.common.basePath,"/configSemester?type_id=2&parent_id=").concat(e),{}).then(function(e){t.schoolList=e.data.data}).catch(function(e){t.$message.error(e)})},convertState:function(e){switch(e){case 1:return"春季";case 2:return"秋季";case 3:return"夏季";case 4:return"冬季"}},getQueryBaseCourse:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/baseCourse"),{params:{cur_status:1}}).then(function(t){e.baseCourseList=t.data.data}).catch(function(t){e.$message.error(t)})},isDisabaledDelBtn:function(){return!1!==!this.common.checkAuthority("LessonList_Delete",!0)||0==this.ids.length},getQueryList:function(e){var t=this;this.axios.get("".concat(this.common.basePath,"/course"),{params:this._queryParams(e)}).then(function(s){e?t.listData=s.data.data:(t.listData.rows=t.listData.rows.concat(s.data.data.rows),t.listData.total=s.data.data.total),t.scrollLoadSw=!0}).catch(function(e){t.$message.error(e),t.scrollLoadSw=!0})},_queryParams:function(e){return e?this.searchForm.pageNum=1:this.searchForm.pageNum++,this.searchForm.begin_time=this.dateTE?this.dateTE[0].getTime():null,this.searchForm.end_time=this.dateTE?this.dateTE[1].getTime():null,this.searchForm},_listAddkey:function(){},submitCourse:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.axios.post("".concat(t.common.basePath,"/course"),t.courseForm).then(function(e){t.courseOperaDialog=!1,t.$router.push({name:"LessonListDetail",params:{id:e.data.data}})}).catch(function(e){t.$message.error(e)})})},submitBaseCourse:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.axios.post("".concat(t.common.basePath,"/baseCourse/build"),t.baseCourseForm).then(function(e){t.baseCourseOperaDialog=!1,t.$router.push({name:"LessonListDetail",params:{id:e.data.data}})}).catch(function(e){t.$message.error(e)})})},goToDetail:function(e){this.common.checkAuthority("LessonList_QueryDetail",!0)?this.$router.push({name:"LessonListDetail",params:{id:e}}):this.$message("无权限,不能查看详情")},goToExersice:function(e){this.common.checkAuthority("LessonList_QueryExersiceDetail",!0)?this.$router.push({name:"TestDetail",params:{id:e}}):this.$message("无权限,不能查看详情")},resetSearchForm:function(){this.$refs.searchForm&&this.$refs.searchForm.resetFields(),this.dateTE=null},deleteCourse:function(){var e=this;this.$confirm("是否删除所选课程?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteCourse_()}).catch(function(){})},deleteCourse_:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/course/delete/batch"),this.ids).then(function(t){e.$message.success(t.data.meta.message),e.getQueryList(!0),e.ids=[]}).catch(function(t){e.$message.error(t),e.ids=[]})},yearChange:function(e,t){"search"==t&&(this.searchForm.c_stage=null),this.getSchoolList(e)}}},i=o,c=(s("964a"),s("2877")),l=Object(c["a"])(i,a,r,!1,null,null,null);l.options.__file="LessonList.vue";t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-23c1.1886c83a.js.map