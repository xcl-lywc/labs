(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-699a"],{"0807":function(e,t,a){"use strict";var s=a("e1aa"),r=a.n(s);r.a},2972:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap-box"},[a("el-card",{staticClass:"title-card"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/eptmanage/reportscore"}}},[e._v("报告评分列表")]),a("el-breadcrumb-item",[e._v("报告评分详情")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoad,expression:"isLoad"}],staticClass:"router-view-wrap transparent-bg"},[a("div",{staticClass:"router-view-content task-detail"},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"card-title"},[e._v("课程信息")])]),e.courseDetail?a("el-row",[a("el-col",{staticClass:"marb5",attrs:{span:24}},[e._v("\n            课程名称："+e._s(e.courseDetail.name)+" \n          ")]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[e._v("\n            课程代码： "+e._s(e.courseDetail.c_code)+"\n          ")]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[e._v("\n            课程教师： "+e._s(e.courseDetail.c_teacher)+"\n          ")]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[e._v("\n            课程性质： "+e._s(e.courseDetail.c_nature)+"\n          ")]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[e._v("\n            简介："+e._s(e.courseDetail.description)+" \n          ")]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[e._v("\n            课程组长："),e._l(e.courseDetail.courseLeader,function(t,s){return a("span",{key:s},[e._v(e._s(t.user_name)+"，")])})],2),a("el-col",{staticClass:"marb5",attrs:{span:12}},[e._v("\n            创建时间："+e._s(e.common._convertDate(e.courseDetail.create_time,"yyyy年MM月dd日"))+"  \n          ")])],1):e._e()],1),a("el-card",{staticClass:"mart20"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"card-title"},[e._v("实验信息")])]),e.experimentDetail?a("el-row",[a("el-col",{staticClass:"marb5",attrs:{span:24}},[e._v("\n            实验名称："+e._s(e.experimentDetail.name)+"  \n          ")]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[e._v("\n            简介："+e._s(e.experimentDetail.description)+" \n          ")]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[e._v("\n            任课教师："),e._l(e.experimentDetail.teacher,function(t,s){return a("span",{key:s},[e._v(e._s(t.user_name)+"，")])})],2),a("el-col",{staticClass:"marb5",attrs:{span:12}},[e._v("\n            创建时间："+e._s(e.common._convertDate(e.experimentDetail.create_time,"yyyy年MM月dd日"))+"  \n          ")])],1):e._e()],1),a("report-taskdetailcom",{staticClass:"mart20"}),e._l(e.experimentReportList,function(t,s){return a("el-card",{staticClass:"mart20"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"card-title"},[e._v("实验报告")])]),a("el-row",[a("el-col",{staticClass:"marb5",attrs:{span:12}},[t.path?a("el-tag",{staticClass:"marr10"},[a("a",{attrs:{href:""+e.common.publicBasePath+JSON.parse(t.path).path,target:"_blank"}},[e._v("\n                "+e._s(JSON.parse(t.path).name)+"\n              ")])]):e._e()],1),a("el-col",{staticClass:"marb5",attrs:{span:12}},[e._v("\n            "+e._s(t.score?"分数："+t.score:"未打分")+"  \n          ")]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[e._v("\n            提交时间："+e._s(e.common._convertDate(t.create_time,"yyyy年MM月dd日"))+"  \n          ")]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[e._v("\n            评语："+e._s(t.description)+"\n          ")]),a("el-col",{staticClass:"marb5 text-right",attrs:{span:24}},[a("el-button",{attrs:{disabled:!e.common.checkAuthority("ReportScoreDetail_Score",!0),type:"primary",size:"small"},on:{click:function(a){e.showScoreDialog(t)}}},[e._v("\n              "+e._s(e.common.checkAuthority("ReportScoreDetail_Score")?e.common.checkAuthority("ReportScoreDetail_Score").name:"")+"\n            ")])],1)],1)],1)})],2)]),a("el-dialog",{attrs:{width:"500px",title:"打分",closeOnClickModal:!1,visible:e.scoreDialog},on:{"update:visible":function(t){e.scoreDialog=t}}},[e.taskDetail?a("div",[a("el-form",{ref:"scoreForm",attrs:{model:e.scoreForm,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"score",label:"得分",rules:[{required:!0,message:"请打分",trigger:"blur"}]}},[a("el-input-number",{attrs:{min:1,max:e.taskDetail.score},model:{value:e.scoreForm.score,callback:function(t){e.$set(e.scoreForm,"score",t)},expression:"scoreForm.score"}})],1)],1)],1):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.submitScore("scoreForm")}}},[e._v("打 分")]),a("el-button",{on:{click:function(t){e.scoreDialog=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{width:"500px",title:"报告",closeOnClickModal:!1,visible:e.addReportDialog},on:{"update:visible":function(t){e.addReportDialog=t}}},[e.taskDetail?a("div",[a("el-form",{ref:"addReportForm",attrs:{model:e.addReportForm,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"path",label:"报告（还不能附件暂用文本框代替）",rules:[{required:!0,message:"请上传附件",trigger:"blur"}]}},[a("el-input",{attrs:{type:"textarea",min:1,max:e.addReportForm.path},model:{value:e.addReportForm.path,callback:function(t){e.$set(e.addReportForm,"path",t)},expression:"addReportForm.path"}})],1)],1)],1):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.submitReport("addReportForm")}}},[e._v("提 交")]),a("el-button",{on:{click:function(t){e.addReportDialog=!1,e.$refs.addReportForm&&e.$refs.addReportForm.resetFields()}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{width:"550px",title:"编辑报告",visible:e.reportTaskDialog},on:{"update:visible":function(t){e.reportTaskDialog=t}}},[a("el-form",{ref:"reportTaskForm",attrs:{model:e.reportTaskForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"任务名称：",prop:"name",rules:[{required:!0,message:"请输入任务名称",trigger:"blur"}]}},[a("el-input",{model:{value:e.reportTaskForm.name,callback:function(t){e.$set(e.reportTaskForm,"name",t)},expression:"reportTaskForm.name"}})],1),a("el-form-item",{attrs:{label:"截止日期：",prop:"end_time",rules:[{required:!0,message:"请选择截止日期",trigger:"blur"}]}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.reportTaskForm.end_time,callback:function(t){e.$set(e.reportTaskForm,"end_time",t)},expression:"reportTaskForm.end_time"}})],1),a("el-form-item",{attrs:{label:"得分占比：",prop:"value",rules:[{required:!0,message:"请输入得分占比",trigger:"blur"}]}},[a("el-input-number",{attrs:{type:"number",min:1,max:100},model:{value:e.reportTaskForm.value,callback:function(t){e.$set(e.reportTaskForm,"value",t)},expression:"reportTaskForm.value"}}),e._v(" %\n        ")],1),a("el-form-item",{attrs:{label:"总分：",prop:"name",rules:[{required:!0,message:"请输入总分",trigger:"blur"}]}},[a("el-input",{attrs:{type:"number"},model:{value:e.reportTaskForm.score,callback:function(t){e.$set(e.reportTaskForm,"score",t)},expression:"reportTaskForm.score"}})],1),a("el-form-item",{attrs:{label:"报告类型：",prop:"genre",rules:[{required:!0,message:"请选择报告类型",trigger:"blur"}]}},[a("el-radio-group",{model:{value:e.reportTaskForm.genre,callback:function(t){e.$set(e.reportTaskForm,"genre",t)},expression:"reportTaskForm.genre"}},[a("el-radio",{attrs:{label:1}},[e._v("小组报告")]),a("el-radio",{attrs:{label:2}},[e._v("个人报告")])],1)],1),a("el-form-item",{attrs:{label:"报告要求：",prop:"description",rules:[{required:!0,message:"请输入报告要求",trigger:"blur"}]}},[a("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.reportTaskForm.description,callback:function(t){e.$set(e.reportTaskForm,"description",t)},expression:"reportTaskForm.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.reportTaskDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditReportTask("reportTaskForm")}}},[e._v("保存")])],1)],1)],1)},r=[],o=a("9c51"),i={components:{"report-taskdetailcom":o["a"]},data:function(){return{paperDialog:!1,scoreDialog:!1,addReportDialog:!1,reportTaskDialog:!1,taskDetail:null,courseDetail:null,experimentDetail:null,isLoad:!0,questionActiveName:"1",answerMemberListData:[],experimentReportList:[],loginUserId:sessionStorage.getItem("access_key"),isPaperDialogShowClose:!0,scoreForm:{score:null,id:null},addReportForm:{path:null,participant_id:null,task_id:this.$route.params.id},selectScoreItemData:null,reportTaskForm:{experiment_id:this.$route.params.id,name:null,value:null,score:null,end_time:null,description:null,genre:null}}},computed:{reportStatus:function(){if(this.taskDetail)switch(this.taskDetail.cur_status){case 1:return"未发布";case 2:return"进行中";case 3:return"已截止";case 4:return"已结束"}}},mounted:function(){this.getQueryTaskDetail(),this.getQueryCourseDetail(),this.getQueryExperimentDetail(),this.getQueryExperimentReportList()},methods:{getQueryCourseDetail:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/course/detail/").concat(this.$route.params.id),"").then(function(t){e.courseDetail=t.data.data,e.isLoad=!1}).catch(function(t){e.$message.error(t),e.isLoad=!1})},getQueryTaskDetail:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/task/").concat(this.$route.params.id),"").then(function(t){e.taskDetail=t.data.data,e.isLoad=!1}).catch(function(t){e.$message.error(t),e.isLoad=!1})},getQueryExperimentDetail:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/experiment/").concat(this.$route.params.experiment_id),"").then(function(t){e.experimentDetail=t.data.data,e.isLoad=!1}).catch(function(t){e.$message.error(t),e.isLoad=!1})},getQueryExperimentReportList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/report/list/").concat(this.$route.params.id),"").then(function(t){e.experimentReportList=t.data.data,e.isLoad=!1}).catch(function(t){e.$message.error(t),e.isLoad=!1})},showScoreDialog:function(e){this.$refs.scoreForm&&this.$refs.scoreForm.resetFields(),this.scoreDialog=!0,this.scoreForm.id=e.id,this.selectScoreItemData=e},submitScore:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t._submitScore()})},_submitScore:function(){var e=this;this.axios.patch("".concat(this.common.basePath,"/report/").concat(this.scoreForm.id),this.scoreForm).then(function(t){e.scoreDialog=!1,e.selectScoreItemData.score=e.scoreForm.score}).catch(function(t){e.scoreDialog=!1,e.$message.error(t)})},submitReport:function(e){var t=this;this.addReportForm.participant_id=this.experimentDetail.participant.id,this.$refs[e].validate(function(e){if(!e)return!1;t._submitReport()})},_submitReport:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/report"),this.addReportForm).then(function(t){e.addReportDialog=!1,e.getQueryExperimentReportList()}).catch(function(t){e.addReportDialog=!1,e.$message.error(t)})},submitEditReportTask:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.axios.patch("".concat(t.common.basePath,"/task/").concat(t.$route.params.id),t.reportTaskForm).then(function(e){t.getQueryTaskDetail(),t.reportTaskDialog=!1}).catch(function(e){t.$message.error(e),t.reportTaskDialog=!1})})},releaseTask:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/task/release/").concat(this.$route.params.id),"").then(function(t){e.$message.success(t.data.meta.message),e.getQueryTaskDetail()}).catch(function(t){e.$message.error(t)})}}},n=i,c=(a("e9d1"),a("2877")),l=Object(c["a"])(n,s,r,!1,null,null,null);l.options.__file="ReportScoreDetail.vue";t["default"]=l.exports},"9c51":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.taskDetail?a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"card-title"},[e._v("任务基本信息")])]),a("el-row",[a("el-col",{staticClass:"marb5",attrs:{span:12}},[e._v("\n        任务名称："+e._s(e.taskDetail.name)+"\n        "),1==e.taskDetail.cur_status?a("el-button",{attrs:{disabled:!e.common.checkAuthority(e.$route.name+"_Release",!0),type:"primary",size:"mini"},on:{click:e.releaseTask}},[e._v("\n          "+e._s(e.common.checkAuthority(e.$route.name+"_Release")?e.common.checkAuthority(e.$route.name+"_Release").name:"")+"\n        ")]):e._e()],1),a("el-col",{staticClass:"marb5",attrs:{span:12}},[e._v("\n        截止时间："+e._s(e.common._convertDate(e.taskDetail.end_time,"yyyy年MM月dd日"))+" \n        "),a("el-button",{attrs:{disabled:!e.common.checkAuthority(e.$route.name+"_Delay",!0),type:"primary",size:"mini"},on:{click:function(t){e.delayDialog=!0,e.$refs.delayForm&&e.$refs.delayForm.resetFields()}}},[e._v("\n          "+e._s(e.common.checkAuthority(e.$route.name+"_Delay")?e.common.checkAuthority(e.$route.name+"_Delay").name:"")+"\n        ")])],1),a("el-col",{staticClass:"marb5",attrs:{span:24}},[e._v("\n        得分占比："+e._s(e.taskDetail.value)+"%    \n        报告状态："),a("span",{style:{color:e.reportStatus().color}},[e._v(e._s(e.reportStatus().name))])]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[e._v("\n        报告类型："+e._s(2==e.taskDetail.genre?"个人报告":"小组报告")+" \n      ")]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[e._v("\n        报告要求："+e._s(e.taskDetail.description)+"  \n      ")]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[e._v("\n        附件列表：\n        "),e.taskDetail.task_files?a("el-tag",{staticClass:"marr10 mart10"},[a("a",{attrs:{href:""+e.common.publicBasePath+JSON.parse(e.taskDetail.task_files).path,target:"_blank"}},[e._v("\n            "+e._s(JSON.parse(e.taskDetail.task_files).name)+"\n          ")])]):a("span",[e._v("无")]),1==e.taskDetail.cur_status?a("upload",{staticStyle:{display:"inline-block"},attrs:{disabled:!e.common.checkAuthority(e.$route.name+"_EditFile",!0),buttonText:e.taskDetail.task_files?"另传一个附件":"上传附件"},on:{uploadSuccess:e.uploadReportSuccess}}):e._e()],1),a("el-col",{staticClass:"text-right",attrs:{span:24}},[!e.taskDetail.template&&e.taskDetail.experimentTemplate?a("el-button",{attrs:{disabled:!e.common.checkAuthority(e.$route.name+"_Base",!0),type:"primary"},on:{click:e.upGradeBase}},[e._v("\n          "+e._s(e.common.checkAuthority(e.$route.name+"_Base")?e.common.checkAuthority(e.$route.name+"_Base").name:"")+"\n        ")]):e._e()],1)],1)],1),a("div",[a("el-card",{staticClass:"mart20"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"card-title"},[e._v("完成任务")])]),a("el-tabs",{model:{value:e.questionActiveName,callback:function(t){e.questionActiveName=t},expression:"questionActiveName"}},[a("el-tab-pane",{attrs:{label:"未交",name:"1"}},[e._l(e.answerMemberListData,function(t,s){return e.answerMemberListData.length?a("div",{staticClass:"person-group-item_w"},[a("el-dropdown",{attrs:{"hide-on-click":!1,placement:"bottom-start"}},[a("div",{staticClass:"img-photo-fix wh50"},[a("img",{attrs:{src:t.head_img?t.head_img:"默认图",onerror:e.defaultImg(t.sex),width:"50px",height:"50px"}})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-row",{staticClass:"mar5 member-info-fix"},[a("el-col",{attrs:{span:9}},[a("p",[a("img",{attrs:{src:t.head_img?t.head_img:"默认图",onerror:e.defaultImg(t.sex),width:"100px",height:"100px"}})])]),a("el-col",{attrs:{span:15}},[a("p",[e._v("姓名："+e._s(t.user_name?t.user_name:"无"))]),a("p",[e._v("工/学号："+e._s(t.account?t.account:"无"))]),a("p",[e._v("手机："+e._s(t.phone_num?t.phone_num:"无"))]),a("p",[e._v("院系："+e._s(t.facultyName?t.facultyName:"无"))]),a("p",[e._v("邮箱："+e._s(t.mail?t.mail:"无"))])])],1)],1)],1)],1):e._e()}),e.answerMemberListData.length?e._e():a("div",{staticClass:"mar10"},[e._v("暂无数据")])],2),a("el-tab-pane",{attrs:{label:"已提交",name:"2"}},[e.answerMemberListData.length?a("div",[a("el-row",{attrs:{gutter:20}},[e._l(e.answerMemberListData,function(t,s){return a("el-col",{key:s,staticClass:"answer-member-box",attrs:{span:6}},[a("el-card",[a("p",[e._v(e._s(t.name)+" ")]),a("p",[t.path?a("el-tag",{staticClass:"marr10"},[a("a",{attrs:{href:""+e.common.publicBasePath+JSON.parse(t.path).path,target:"_blank"}},[e._v("\n                        "+e._s(JSON.parse(t.path).name)+"\n                      ")])]):e._e()],1),a("p",[e._v(e._s(t.user_name)+" 于 "+e._s(e.common._convertDate(t.create_time,"yyyy年MM月dd日"))+" 上传")]),a("p",[e._v("得分："+e._s(t.score?t.score:0)+"分   \n                    "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.score,expression:"item.score"}],staticClass:"marl10",attrs:{disabled:!e.common.checkAuthority(e.$route.name+"_EditScore",!0),type:"primary",size:"mini"},on:{click:function(a){e.showScoreDialog(t)}}},[e._v("\n                      "+e._s(e.common.checkAuthority(e.$route.name+"_EditScore")?e.common.checkAuthority(e.$route.name+"_EditScore").name:"")+"\n                    ")])],1)])],1)}),a("el-col",{staticClass:"mart20",attrs:{span:24}},[a("el-button",{staticClass:"marl10",attrs:{disabled:!e.common.checkAuthority(e.$route.name+"_DownloadReport",!0),type:"primary",size:"mini"},on:{click:e.downLoadReeport}},[e._v("\n                  "+e._s(e.common.checkAuthority(e.$route.name+"_DownloadReport")?e.common.checkAuthority(e.$route.name+"_DownloadReport").name:"")+"\n                ")])],1)],2)],1):a("div",{staticClass:"mar10"},[e._v("暂无数据")])]),a("el-tab-pane",{attrs:{label:"未打分",name:"3"}},[e.answerMemberListData.length?a("div",[a("el-row",{attrs:{gutter:20}},[e._l(e.answerMemberListData,function(t,s){return a("el-col",{key:s,staticClass:"answer-member-box",attrs:{span:6}},[a("el-card",[a("p",[e._v(e._s(t.name)+" ")]),a("p",[t.path?a("el-tag",{staticClass:"marr10"},[a("a",{attrs:{href:""+e.common.publicBasePath+JSON.parse(t.path).path,target:"_blank"}},[e._v("\n                        "+e._s(JSON.parse(t.path).name)+"\n                      ")])]):e._e()],1),a("p",[e._v(e._s(t.user_name)+" 于 "+e._s(e.common._convertDate(t.create_time,"yyyy年MM月dd日"))+" 上传")]),a("p",[e._v("得分："+e._s(t.score?t.score:0)+"分   \n                    "),a("el-button",{staticClass:"marl10",attrs:{disabled:!e.common.checkAuthority(e.$route.name+"_Score",!0),type:"primary",size:"mini"},on:{click:function(a){e.showScoreDialog(t)}}},[e._v("\n                      "+e._s(e.common.checkAuthority(e.$route.name+"_Score")?e.common.checkAuthority(e.$route.name+"_Score").name:"")+"\n                    ")])],1)])],1)}),a("el-col",{staticClass:"mart20",attrs:{span:24}},[a("upload",{attrs:{url:"/report/upload?taskID="+e.$route.params.id,disabled:!e.common.checkAuthority(e.$route.name+"_ImportScore",!0),buttonText:e.common.checkAuthority(e.$route.name+"_ImportScore")?e.common.checkAuthority(e.$route.name+"_ImportScore").name:""},on:{uploadSuccess:e.importScore}})],1)],2)],1):a("div",{staticClass:"mar10"},[e._v("暂无数据")])])],1)],1)],1),a("el-dialog",{attrs:{width:"500px",title:"评分",closeOnClickModal:!1,visible:e.scoreDialog},on:{"update:visible":function(t){e.scoreDialog=t}}},[e.taskDetail?a("div",[a("el-form",{ref:"scoreForm",attrs:{model:e.scoreForm,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"score",label:"得分",rules:[{required:!0,message:"请打分",trigger:"blur"}]}},[a("el-input-number",{attrs:{min:1,max:e.taskDetail.score},model:{value:e.scoreForm.score,callback:function(t){e.$set(e.scoreForm,"score",t)},expression:"scoreForm.score"}}),e._v("\n             "+e._s("最大分数："+e.taskDetail.score)+"分\n          ")],1)],1)],1):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.submitScore("scoreForm")}}},[e._v("打 分")]),a("el-button",{on:{click:function(t){e.scoreDialog=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{width:"500px",title:"延期",closeOnClickModal:!1,visible:e.delayDialog},on:{"update:visible":function(t){e.delayDialog=t}}},[e.taskDetail?a("div",[a("el-form",{ref:"delayForm",attrs:{model:e.delayForm,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"end_time",label:"时间",rules:[{required:!0,message:"请选择日期",trigger:"blur"}]}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.delayForm.end_time,callback:function(t){e.$set(e.delayForm,"end_time",t)},expression:"delayForm.end_time"}})],1)],1)],1):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.submitDelayTask("delayForm")}}},[e._v("提交")]),a("el-button",{on:{click:function(t){e.delayDialog=!1}}},[e._v("取 消")])],1)])],1):e._e()},r=[],o=a("d443"),i={components:{upload:o["a"]},data:function(){return{isLoad:!0,paperDialog:!1,delayDialog:!1,scoreDialog:!1,taskDetail:null,editFileDialog:!1,questionActiveName:"1",answerMemberListData:[],loginUserId:sessionStorage.getItem("access_key"),isPaperDialogShowClose:!0,scoreForm:{score:null,id:null},delayForm:{end_time:null},editFileForm:{task_files:null}}},computed:{reportStatus:function(){return function(){if(this.taskDetail)switch(this.taskDetail.cur_status){case 1:return{name:"未发布",color:"#f5b800"};case 2:return{name:"进行中",color:"#d298fd"};case 3:return{name:"已截止",color:"red"};case 4:return{name:"已结束",color:"#3aff6e"}}}}},watch:{questionActiveName:function(e){this.getQueryReportMember()}},mounted:function(){this.getQueryTaskDetail(),this.getQueryReportMember()},methods:{uploadReportSuccess:function(e){this.editFileForm.task_files=JSON.stringify(e),this.submitReportFile()},submitReportFile:function(){var e=this;this.axios.patch("".concat(this.common.basePath,"/task/").concat(this.$route.params.id),this.editFileForm).then(function(t){e.$message.success(t.data.meta.message),e.getQueryTaskDetail()}).catch(function(t){e.$message.error(t)})},upGradeBase:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/baseTask/upgrade"),{params:{taskID:this.$route.params.id}}).then(function(t){e.$message.success(t.data.meta.message),e.getQueryTaskDetail()}).catch(function(t){e.$message.error(t)})},defaultImg:function(e){return 1==e?'this.src="'+a("e93b")+'"':'this.src="'+a("e0a3")+'"'},getQueryTaskDetail:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/task/").concat(this.$route.params.id),"").then(function(t){e.taskDetail=t.data.data,e.isLoad=!1}).catch(function(t){e.$message.error(t),e.isLoad=!1})},getQueryReportMember:function(){var e=this;this.answerMemberListData=[],this.axios.get("".concat(this.common.basePath,"/report/member/").concat(this.$route.params.id),{params:{type:this.questionActiveName}}).then(function(t){e.answerMemberListData=t.data.data}).catch(function(t){e.$message.error(t)})},showScoreDialog:function(e){this.scoreDialog=!0,this.scoreForm.id=e.id},submitScore:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t._submitScore()})},_submitScore:function(){var e=this;this.axios.patch("".concat(this.common.basePath,"/report/").concat(this.scoreForm.id),this.scoreForm).then(function(t){e.getQueryReportMember(),e.scoreDialog=!1}).catch(function(t){e.scoreDialog=!1,e.$message.error(t)})},releaseTask:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/task/release/").concat(this.$route.params.id),"").then(function(t){e.$message.success(t.data.meta.message),e.getQueryTaskDetail()}).catch(function(t){e.$message.error(t)})},submitDelayTask:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.axios.patch("".concat(t.common.basePath,"/task/").concat(t.$route.params.id),t.delayForm).then(function(e){t.getQueryTaskDetail(),t.delayDialog=!1}).catch(function(e){t.delayDialog=!1,t.$message.error(e)})})},downLoadReeport:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/report/download?taskID=").concat(this.$route.params.id),{responseType:"blob"}).then(function(t){e.common._fileBold(t),e.$message.success("导出成功")}).catch(function(t){e.$message.error(t)})},importScore:function(e,t){this.$message.success("上传成功"),this.getQueryReportMember()}}},n=i,c=(a("0807"),a("2877")),l=Object(c["a"])(n,s,r,!1,null,null,null);l.options.__file="ReportTaskDetailCom.vue";t["a"]=l.exports},e1aa:function(e,t,a){},e9d1:function(e,t,a){"use strict";var s=a("fccc"),r=a.n(s);r.a},fccc:function(e,t,a){}}]);
//# sourceMappingURL=chunk-699a.0e18c218.js.map