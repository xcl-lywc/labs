(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fc8"],{"0788":function(t,e,s){},"1b5a":function(t,e,s){"use strict";var a=s("5ee7"),i=s.n(a);i.a},"566a":function(t,e,s){"use strict";var a=s("0788"),i=s.n(a);i.a},"5ee7":function(t,e,s){},e1bb:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",{staticClass:"mard10"},[s("el-col",{attrs:{span:24}},[t.isEdit?s("el-form-item",{attrs:{label:"试卷名称：",prop:"paperItem.name",rules:[{required:!0,message:"请输入试卷名称",trigger:"blur"},{validator:function(e,s,a){t.common.wordNumberValid(e,s,a,"single")},trigger:"blur"}]}},[s("el-input",{model:{value:t.paperItem.name,callback:function(e){t.$set(t.paperItem,"name",e)},expression:"paperItem.name"}})],1):s("div",{staticClass:"marl20"},[t._v("试卷名称："+t._s(t.paperItem.name))])],1),s("el-col",{staticClass:"mart20",attrs:{span:12}},[t.isEdit?s("el-form-item",{attrs:{label:"考试时间：",prop:"paperItem.exam_time",rules:[{required:!0,message:"请输入考试时间",trigger:"blur"}]}},[s("el-input",{attrs:{type:"number"},model:{value:t.paperItem.exam_time,callback:function(e){t.$set(t.paperItem,"exam_time",e)},expression:"paperItem.exam_time"}},[s("template",{slot:"append"},[t._v("分钟")])],2)],1):s("div",{staticClass:"marl20"},[t._v("考试时间："+t._s(t.paperItem.exam_time)+"分钟")])],1),s("el-col",{staticClass:"mart20",attrs:{span:12}},[t.isEdit?s("el-form-item",{attrs:{label:"总分："}},[t._v("  \n      \t"+t._s(t.totalScore)+"分\n      ")]):s("div",{staticClass:"marl20"},[t._v("总分："+t._s(t.totalScore))])],1),t.paperItem.id&&t.isEdit?s("el-col",{staticClass:"mart10 marb20 text-right",attrs:{span:24}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.savePaperName}},[t._v("保存")])],1):t._e()],1),s("el-card",{attrs:{shadow:"never"}},[t._l(t.paperItem.questions,function(e,a){return s("div",{key:a,staticClass:"questions-box mart5"},[s("div",[t._v(t._s(a+1)+"、")]),s("el-card",{staticClass:"questions-content",attrs:{shadow:"never"}},[s("el-row",{staticClass:"mard10"},[s("el-col",{staticClass:"div-flex",attrs:{span:6}},[s("div",{staticClass:"label-2 label marr5"},[t._v("分数: ")]),t.isEdit?s("el-input",{attrs:{type:"number","auto-complete":"off"},model:{value:e.score,callback:function(s){t.$set(e,"score",t._n(s))},expression:"item.score"}}):s("div",[t._v(t._s(e.score))]),s("div",{staticClass:"label-1 label marl5"},[t._v(" 分")])],1),s("el-col",{staticClass:"text-right question-type",attrs:{offset:13,span:4}},[t._v("\n\t\t\t\t\t\t"+t._s(t.numMatchingText(e.type))+"\n\t\t\t\t\t")]),s("el-col",{staticClass:"text-right ",attrs:{span:1}},[t.isEdit?s("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-close",circle:""},on:{click:function(e){t.del("question",a)}}}):t._e()],1)],1),s("el-row",{staticClass:"mard10"},[s("el-col",{staticClass:"div-flex",attrs:{span:18}},[s("div",{staticClass:"label-2 label marr5"},[t._v("题干: ")]),t.isEdit?s("el-input",{model:{value:e.question,callback:function(s){t.$set(e,"question",s)},expression:"item.question"}}):s("div",[t._v(t._s(e.question))])],1),s("el-col",{staticStyle:{"margin-left":"60px"},attrs:{span:22}},[t._l(e.options,function(i,n){return s("div",{directives:[{name:"show",rawName:"v-show",value:!i.isDelete,expression:"!itemOption.isDelete"}],key:n,staticClass:"div-flex mart10 flex-align-items"},[s("div",{staticClass:"label-2 label marr5"},[t._v("选项"+t._s(n+1)+": ")]),t.isEdit?s("el-input",{model:{value:i.name,callback:function(e){t.$set(i,"name",e)},expression:"itemOption.name"}}):s("div",[t._v(t._s(i.name))]),s("el-radio",{directives:[{name:"show",rawName:"v-show",value:(1==e.type||3==e.type)&&t.isEdit,expression:"(item.type == 1 || item.type == 3) && isEdit"}],staticClass:"marl5",attrs:{label:"true"},on:{change:function(s){t.changeRadioRightKey(e,n)}},model:{value:i.answer,callback:function(e){t.$set(i,"answer",e)},expression:"itemOption.answer"}},[t._v("正确")]),s("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:2==e.type&&t.isEdit,expression:"item.type == 2 && isEdit"}],staticClass:"marl5",attrs:{"true-label":"true","false-label":"false"},model:{value:i.answer,callback:function(e){t.$set(i,"answer",e)},expression:"itemOption.answer"}},[t._v("正确")]),t.isEdit?s("el-button",{staticClass:"marl5",attrs:{type:"danger",size:"mini",icon:"el-icon-close",circle:""},on:{click:function(e){t.del("option",a,n)}}}):t._e()],1)}),s("el-button",{directives:[{name:"show",rawName:"v-show",value:(1==e.type||2==e.type)&&t.isEdit,expression:" (item.type == 1 || item.type == 2) && isEdit"}],staticClass:"mart10",staticStyle:{"margin-left":"65px"},attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addOption(a)}}},[t._v("添加选项")]),s("div",{staticClass:"text-right"},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.paperItem.id&&t.isEdit,expression:" paperItem.id && isEdit"}],staticClass:"mart10",attrs:{type:"primary",size:"small"},on:{click:function(s){t.saveAppointQuestion(e)}}},[t._v("保存")])],1)],2),s("el-col",{staticClass:"mart20",attrs:{span:22}},[t.isEdit?t._e():s("div",{staticStyle:{color:"#62b549"}},[t._v("\n              正确答案："+t._s(4==e.type?"无标准答案":e.optionAnswer)+"\n            ")])])],1)],1)],1)}),t.isEdit?s("div",{staticClass:"text-right mart10"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addQution("radioQuestion")}}},[t._v("添加单选题")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addQution("chekboxQuestion")}}},[t._v("添加多选题")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addQution("judgeQuestion")}}},[t._v("添加判断题")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addQution("shortAnswerQuestion")}}},[t._v("添加简答题")])],1):t._e()],2)],1)},i=[],n=(s("7f7f"),s("f751"),s("ac6a"),{props:{paperItem:{default:null},isEdit:{default:!0,required:!1}},data:function(){return{checkbox:!1,questionTemplate:{radioQuestion:{question:"我是第二道试题（单选题）",type:1,score:30,analyze:"这是我的习题解析",options:[{name:"我是第二试题的第一选项",answer:"true",isDelete:!1},{name:"我是第2试题的第二选项",answer:"false",isDelete:!1},{name:"我是第2试题的第二选项",answer:"false",isDelete:!1}]},chekboxQuestion:{question:"我是第二道试题（多选题）",type:2,score:30,analyze:"这是我的习题解析",options:[{name:"我是第二试题的第一选项",answer:"true",isDelete:!1},{name:"我是第二试题的第二选项",answer:"true",isDelete:!1}]},judgeQuestion:{question:"我是第二道试题（判断题）",type:3,score:30,analyze:"这是我的习题解析",options:[{name:"我是第二试题的第一选项",answer:"true",isDelete:!1},{name:"我是第2试题的第二选项",answer:"false",isDelete:!1}]},shortAnswerQuestion:{question:"我是第二道试题（简答选题）",type:4,score:30,analyze:"这是我的习题解析"}},questionTypeText:null}},components:{},computed:{totalScore:function(){var t=0;return this.paperItem.questions.forEach(function(e){t+=e.score}),t}},created:function(){this.convertPaperItem()},mounted:function(){},methods:{convertPaperItem:function(){var t=this.paperItem.questions;t&&t.forEach(function(t){t.optionAnswer=[],4!=t.type&&t.options.forEach(function(e,s){"true"==e.answer&&t.optionAnswer.push("选项".concat(s+1))}),t.optionAnswer=t.optionAnswer.join("、")}),Object.assign({},this.paperItem.questions,t)},numMatchingText:function(t){switch(t){case 1:return this.questionTypeText="单选题";case 2:return this.questionTypeText="多选题";case 3:return this.questionTypeText="判断题";case 4:return this.questionTypeText="简答题"}},addQution:function(t){this.paperItem.questions.push(JSON.parse(JSON.stringify(this.questionTemplate[t])))},del:function(t,e,s){"question"==t?this._delQution(e):this._delOption(e,s)},_delQution:function(t){var e=this;if(this.paperItem.questions.length<=1)return this.$message.warning("不能删除，必须存在一个题！！！"),!1;this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(s){s.value;e.paperItem.questions[t].id?e._pseudoDelQution(t):e.paperItem.questions.splice(t,1),e.$message.success("删除成功，请点击保存")}).catch(function(){})},_pseudoDelQution:function(t){var e=this;this.axios.patch("".concat(this.common.basePath,"/question/delete/").concat(this.paperItem.questions[t].id),"").then(function(s){e.paperItem.questions.splice(t,1)}).catch(function(t){e.$message.error(t)})},_delOption:function(t,e){var s=this;if(1==this.paperItem.questions[t].type){if("true"==this.paperItem.questions[t].options[e].answer)return this.$message.warning("不能删除，单选题必须有一个正确答案！！！"),!1}else if(2==this.paperItem.questions[t].type&&"true"==this.paperItem.questions[t].options[e].answer){var a=0;if(this.paperItem.questions[t].options.forEach(function(t){"true"==t.answer&&a++}),a<=2)return this.$message.warning("不能删除，多选题必须有两个正确答案！！！"),!1}if(this.paperItem.questions[t].options.length<=2)return this.$message.warning("不能删除，必须存在两个选项！！！"),!1;this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){a.value;s.paperItem.questions[t].options[e].id?s.paperItem.questions[t].options[e].isDelete=!0:s.paperItem.questions[t].options.splice(e,1),s.$message.success("删除成功，请点击保存")}).catch(function(){})},addOption:function(t){var e=JSON.parse(JSON.stringify(this.questionTemplate.radioQuestion.options[0]));e.answer=!1,this.paperItem.questions[t].options.push(e)},changeRadioRightKey:function(t,e){t.options.forEach(function(t,s){t.answer=s!=e?"false":"true"})},saveAppointQuestion:function(t){var e=this,s=null;s=t.id?"".concat(this.common.basePath,"/question/update"):"".concat(this.common.basePath,"/question/save"),t.paper_id=this.$route.params.associated_object,this.axios.post(s,t).then(function(s){e.$message.success(s.data.meta.message),e.paperDetail=s.data.data,s.data.data&&(t.id=s.data.data)}).catch(function(t){e.$message.error(t)})},getQueryQuestionById:function(t){var e=this;this.axios.get("".concat(this.common.basePath,"question/simple/").concat(t.id),"").then(function(e){t=e.data.data}).catch(function(t){e.$message.error(t)})},savePaperName:function(){var t=this;this.paperItem.name&&this.paperItem.exam_time&&this.axios.patch("".concat(this.common.basePath,"/paper/").concat(this.$route.params.associated_object),this.paperItem).then(function(e){t.$message.success(e.data.meta.message)}).catch(function(e){t.$message.error(e)})}}}),r=n,o=(s("566a"),s("2877")),c=Object(o["a"])(r,a,i,!1,null,null,null);c.options.__file="TestPaperC.vue";e["a"]=c.exports},f649:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content-wrap-box"},[s("el-card",{staticClass:"title-card"},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/lesson/testlist"}}},[t._v("实验列表")]),s("el-breadcrumb-item",{attrs:{to:{name:"TestDetail",params:{id:t.$route.params.experiment_id}}}},[t._v("实验详情")]),s("el-breadcrumb-item",{attrs:{to:{name:"ExercisesTaskDetail",params:{id:t.$route.params.task_id}}}},[t._v("习题任务详情")]),s("el-breadcrumb-item",[t._v("试卷详情")])],1)],1),s("div",{staticClass:"router-view-wrap"},[t.taskData.paperItem?s("div",{staticClass:"router-view-content"},[s("el-form",{ref:"paperItem",attrs:{model:t.taskData,"label-width":"120px"}},[s("test-parper",{attrs:{paperItem:t.taskData.paperItem,isEdit:t.isEditC}})],1)],1):t._e()])],1)},i=[],n=s("e1bb"),r={data:function(){return{taskData:{paperItem:null},paperCreatorId:null,taskDetail:null}},components:{"test-parper":n["a"]},computed:{isEditC:function(){if(this.taskDetail)return 2!=this.taskDetail.cur_status&&this.paperCreatorId==sessionStorage.getItem("Access-Key")}},mounted:function(){this.getQueryTaskDetail(),this.getQueryPaperDetail()},methods:{getQueryPaperDetail:function(){var t=this;this.axios.get("".concat(this.common.basePath,"/paper/detail/").concat(this.$route.params.associated_object),"").then(function(e){t.taskData.paperItem=e.data.data,t.paperCreatorId=e.data.data.creator}).catch(function(e){t.$message.error(e)})},getQueryTaskDetail:function(){var t=this;this.axios.get("".concat(this.common.basePath,"/task/").concat(this.$route.params.task_id),"").then(function(e){t.taskDetail=e.data.data}).catch(function(e){t.$message.error(e)})}}},o=r,c=(s("1b5a"),s("2877")),l=Object(c["a"])(o,a,i,!1,null,null,null);l.options.__file="TestPaper.vue";e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-1fc8.6c73af4e.js.map