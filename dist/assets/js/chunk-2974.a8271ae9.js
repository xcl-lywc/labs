(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2974"],{"0a50":function(t,e,a){},"1cad":function(t,e,a){t.exports=a.p+"263e75070edcfb14d01b443246914c45.jpg"},"28a5":function(t,e,a){a("214f")("split",2,function(t,e,i){"use strict";var s=a("aae3"),o=i,l=[].push,r="split",n="length",c="lastIndex";if("c"=="abbc"[r](/(b)*/)[1]||4!="test"[r](/(?:)/,-1)[n]||2!="ab"[r](/(?:ab)*/)[n]||4!="."[r](/(.?)(.?)/)[n]||"."[r](/()()/)[n]>1||""[r](/.?/)[n]){var m=void 0===/()??/.exec("")[1];i=function(t,e){var a=String(this);if(void 0===t&&0===e)return[];if(!s(t))return o.call(a,t,e);var i,r,d,p,u,h=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,b=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,f+"g");m||(i=new RegExp("^"+y.source+"$(?!\\s)",f));while(r=y.exec(a)){if(d=r.index+r[0][n],d>g&&(h.push(a.slice(g,r.index)),!m&&r[n]>1&&r[0].replace(i,function(){for(u=1;u<arguments[n]-2;u++)void 0===arguments[u]&&(r[u]=void 0)}),r[n]>1&&r.index<a[n]&&l.apply(h,r.slice(1)),p=r[0][n],g=d,h[n]>=b))break;y[c]===r.index&&y[c]++}return g===a[n]?!p&&y.test("")||h.push(""):h.push(a.slice(g)),h[n]>b?h.slice(0,b):h}}else"0"[r](void 0,0)[n]&&(i=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(a,s){var o=t(this),l=void 0==a?void 0:a[e];return void 0!==l?l.call(a,o,s):i.call(String(o),a,s)},i]})},"3adb":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAAXNSR0IArs4c6QAABopJREFUeAHtnd9rG0cQx+ckxVFbt7VBgSS07o84BCJaAoW8NFDogyH/R176mj+kbyUv+T8KfggU0pdAi/tDTapIiWPHsZzY8S/JliWfrjtnH1JUWb7dO61nVrNg9Gtmd/b78dzezZ5lD/raw0cLRb/l31FvzwUAMwDBZJ+JvCSlgFf3AJZUSPPZiez9WzdvlHrDU58dtVKpNLG+2fwRPPghCIJM9L488lHA87wOBHCvMJ2/WywWWxh5CDiEu9X8WYH9ns90JNKTFFCgHxSm8rcRcpipmLkC9yS5+L2PLMOjsQrdC9fctv+nHJb5gRwWMR6us+eyX+fwhCoAWXOHicXxM0xYZIuH6DmOE5CYYykwlzm6FIplLEbMFEC2KoPlOpcZN41wg8nwLFrDQ0yZKSCAmQHTDVcA6yrGzF4AMwOmG64A1lWMmb0AZgZMN1wBrKsYM3sBzAyYbrgCWFcxZvYCmBkw3XAFsK5izOwFMDNguuEKYF3FmNkLYGbAdMMVwLqKMbMXwMyA6YYrgHUVY2YvgJkB0w1XAOsqxsxeADMDphuuANZVjJm9AGYGTDdcAayrGDP7nO14v/v2G9tDkhrvl19/sxqPZLBVue0PJoDta251RAFsVW77gwlg+5pbHVEAW5Xb/mAC2L7mVkcUwFbltj+Y9etg0yk29vZhtbYOm1s70DwIvyEI8ucnYHrqI7h0sQAfvP+eaddO+5EH3Ol0oPr8JbyqvfkfiL39JuDPyupruHzxAlz54hPIZOSg1CsUaTUQ7l//VAbC7Z0EPsdfALRFH2ldBUgDxszd2t7tRnvKM7RFH2ldBcgCxjV30GG5G/rgZ+iDvtKOFCALGE+oTFsSX9MxqfqRBYxny6Ytia/pmFT9yAKOLoVMhEviazIeZR+ygCmLxik2soCxiGHakviajknVjyxgrFCZtiS+pmNS9SMLGMuPpi2Jr+mYVP3IAsbaMpYfdRv6SF26qxpZwBgi1panPv6wG+0pz9AWfaR1FSANGDcOvro+GyuTMXPRNo3NBiyUvNnY7KrE+Bn53SQEdvXKDFy+dMHKduFuvQFPny3BuVwOptURIaceOTc20eO6OvvlpyPVut0+hNKTZ6C+Dh9a7TZUF1fg2uxnIx1z1J2TPkSPevK9/SPUx+XncHB8MwF+Vltb19rN6u2PynMBfEzixfJqeLdIP5h/Ky/A9/nuMQtgRXRjcxsQ8KDWbB6oz14N+ojFe2MPGAE+UYfmYW15ZQ1263vDTMh+NtaA8fYePKk6PPRPBVSuLIYnX6caEjMYa8BPq0tQb8TLzHpjHzCTubWxBbyqzpBrrze0eOFavK/u4uTUWALGSlNZnd2a3kGJ6ylmr27rdAIoKz+8pOLS2AGOKk2YgX/8XYaDVltL66NiRtUYEt65WVvTy3ytAFM2ZgW4t9KEOuzsNuD3hcewvVOPJQtmHp4x9xYzYjn2GVUXX2r/YvV1Ye0lG8CDKk2oEpYUMZPj3GKL17pvE9zMF1HxfR8qBof4yN/mIxvAJ1WaUCyEj2vqsHV5WDHDRPD1t1ssdpxYAI4L56R1OU4xwwRypbqsrqEPTVyt+ZAHrAunf13WKWboqh7tOOn62bQnDdgUTu+6rFPMMBGe+o4TacBJ4ETrsm4xwwQy5R0nsoBNKk0mcNLwobzjRBKwaaUpDVimfVDdcSIHOGmlyRRQGn4Ud5xIAU6r0pQGLJM+KO44kQKcVqXJBE5aPtR2nMgAjlvMSAvEqPqhtuNEArBuMWNUcNLql9KO05kDNi1mpAVjVP1Q2XE6c8BJihmjgpNGv1R2nM78LxuuXf0c8EfaaBQ48wwezbSk10gBARwp4eijAHYUbDQtARwp4eijAHYUbDQt62fRtv9vUDTRcX2UDHacvAAWwI4r4Pj0JIMFsOMKOD49yWAB7LgCjk9PMlgAO66A49OTDBbAjivg+PQkgwWw4wo4Pj3JYAHsuAKOT08yWAA7roDj05MMFsCOK+D49CSDBbDjCjg+PclgAey4Ao5PT2WwF++rWh0Xws3pefWMB7Dk5uRkVsgW1+B5kcJZBeYz2Ynsfc/z+P7nJ2fZJJsYMkW2mVs3b5QggHvJuhNvcgoopsg2vEwqTOfvKuIPyAUpARkpgCyRKTqHgIvFYqswlb/tgfeTHK6NNCXhhOyQIbJEphiUOtF6tz18tFD0W/4d9e6c+ucxM+oL8yfftZBXtBTw6sdXQvO45oZLbk+A/wFCn6eLV03nkQAAAABJRU5ErkJggg=="},"4a9b":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"file-show-list-wrap"},[t.fileList&&t.fileList.length>0?i("div",t._l(t.fileList,function(e,s){return i("el-tag",{key:s+"文件展示",staticClass:"tag",attrs:{closable:t.closable},on:{close:function(a){t.$emit("handleClose",e)}}},["jpg"===e.name.split(".")[1]||"png"===e.name.split(".")[1]||"jpeg"===e.name.split(".")[1]||"gif"===e.name.split(".")[1]||"bmp"===e.name.split(".")[1]?i("a",{style:t.isDownload?"":"pointer-events: none",attrs:{href:""+t.common.publicBasePath+e.path,target:"_blank",download:e.name}},[i("img",{staticClass:"thumbnail fl",attrs:{src:""+t.common.publicBasePath+e.path,onerror:t.errimage}}),i("span",{staticClass:"fl name"},[t._v(t._s(e.name))])]):"mp4"===e.name.split(".")[1]||"rmvb"===e.name.split(".")[1]||"wmv"===e.name.split(".")[1]||"asf"===e.name.split(".")[1]||"avi"===e.name.split(".")[1]||"3gp"===e.name.split(".")[1]||"mpg"===e.name.split(".")[1]||"mkv"===e.name.split(".")[1]||"dvd"===e.name.split(".")[1]||"ogm"===e.name.split(".")[1]||"mpeg2"===e.name.split(".")[1]||"mpeg4"===e.name.split(".")[1]||"mpeg"===e.name.split(".")[1]||"mov"===e.name.split(".")[1]?i("a",{style:t.isDownload?"":"pointer-events: none",attrs:{href:""+t.common.publicBasePath+e.path,download:e.name}},[i("img",{staticClass:"thumbnail fl",attrs:{src:a("1cad")}}),i("span",{staticClass:"fl name"},[t._v(t._s(e.name))])]):"mp3"===e.name.split(".")[1]||"ogg"===e.name.split(".")[1]||"wav"===e.name.split(".")[1]||"ape"===e.name.split(".")[1]||"cda"===e.name.split(".")[1]||"midi"===e.name.split(".")[1]||"acc"===e.name.split(".")[1]||"mac"===e.name.split(".")[1]?i("a",{style:t.isDownload?"":"pointer-events: none",attrs:{href:""+t.common.publicBasePath+e.path,download:e.name}},[i("img",{staticClass:"thumbnail fl",attrs:{src:a("b735")}}),i("span",{staticClass:"fl name"},[t._v(t._s(e.name))])]):"doc"===e.name.split(".")[1]||"docx"===e.name.split(".")[1]?i("a",{style:t.isDownload?"":"pointer-events: none",attrs:{href:""+t.common.publicBasePath+e.path,download:e.name}},[i("img",{staticClass:"thumbnail fl",attrs:{src:a("8a43")}}),i("span",{staticClass:"fl name"},[t._v(t._s(e.name))])]):"xls"===e.name.split(".")[1]||"xlsx"===e.name.split(".")[1]?i("a",{style:t.isDownload?"":"pointer-events: none",attrs:{href:""+t.common.publicBasePath+e.path,download:e.name}},[i("img",{staticClass:"thumbnail fl",attrs:{src:a("693b")}}),i("span",{staticClass:"fl name"},[t._v(t._s(e.name))])]):"txt"===e.name.split(".")[1]?i("a",{style:t.isDownload?"":"pointer-events: none",attrs:{href:""+t.common.publicBasePath+e.path,download:e.name}},[i("img",{staticClass:"thumbnail fl",attrs:{src:a("6919")}}),i("span",{staticClass:"fl name"},[t._v(t._s(e.name))])]):"ppt"===e.name.split(".")[1]||"pptx"===e.name.split(".")[1]?i("a",{style:t.isDownload?"":"pointer-events: none",attrs:{href:""+t.common.publicBasePath+e.path,download:e.name}},[i("img",{staticClass:"thumbnail fl",attrs:{src:a("d75b")}}),i("span",{staticClass:"fl name"},[t._v(t._s(e.name))])]):"zip"===e.name.split(".")[1]?i("a",{style:t.isDownload?"":"pointer-events: none",attrs:{href:""+t.common.publicBasePath+e.path,download:e.name}},[i("img",{staticClass:"thumbnail fl",attrs:{src:a("d06b")}}),i("span",{staticClass:"fl name"},[t._v(t._s(e.name))])]):i("a",{style:t.isDownload?"":"pointer-events: none",attrs:{href:""+t.common.publicBasePath+e.path,download:e.name}},[i("img",{staticClass:"thumbnail fl",attrs:{src:a("4f13")}}),i("span",{staticClass:"fl name"},[t._v(t._s(e.name))])])])})):t._e()])},s=[],o={data:function(){return{errimage:'this.src="'+a("3adb")+'";this.οnerrοr=null'}},props:{fileList:{type:Array},closable:{type:Boolean,default:!1},isDownload:{type:Boolean,default:!0}},created:function(){},mounted:function(){},methods:{errorHandler:function(){return!1}}},l=o,r=(a("b562"),a("2877")),n=Object(r["a"])(l,i,s,!1,null,"022c7508",null);n.options.__file="FileShow.vue";e["a"]=n.exports},"4f13":function(t,e,a){t.exports=a.p+"7cc76cd11d9a9887bd57315a5f0cd288.jpg"},6919:function(t,e,a){t.exports=a.p+"2e4936c6128f1c3225b55b431b71db8a.jpg"},"693b":function(t,e,a){t.exports=a.p+"356c209a020157fa001eab7efcc7620a.jpg"},"8a43":function(t,e,a){t.exports=a.p+"557c778d422c6b562734853fc3b966e2.jpg"},aa77:function(t,e,a){var i=a("5ca1"),s=a("be13"),o=a("79e5"),l=a("fdef"),r="["+l+"]",n="​",c=RegExp("^"+r+r+"*"),m=RegExp(r+r+"*$"),d=function(t,e,a){var s={},r=o(function(){return!!l[t]()||n[t]()!=n}),c=s[t]=r?e(p):l[t];a&&(s[a]=c),i(i.P+i.F*r,"String",s)},p=d.trim=function(t,e){return t=String(s(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(m,"")),t};t.exports=d},b562:function(t,e,a){"use strict";var i=a("0a50"),s=a.n(i);s.a},b735:function(t,e,a){t.exports=a.p+"8701718ae16e5ff270067dee98eab889.jpg"},c5f6:function(t,e,a){"use strict";var i=a("7726"),s=a("69a8"),o=a("2d95"),l=a("5dbc"),r=a("6a99"),n=a("79e5"),c=a("9093").f,m=a("11e9").f,d=a("86cc").f,p=a("aa77").trim,u="Number",h=i[u],f=h,g=h.prototype,b=o(a("2aeb")(g))==u,y="trim"in String.prototype,v=function(t){var e=r(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():p(e,3);var a,i,s,o=e.charCodeAt(0);if(43===o||45===o){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:i=2,s=49;break;case 79:case 111:i=8,s=55;break;default:return+e}for(var l,n=e.slice(2),c=0,m=n.length;c<m;c++)if(l=n.charCodeAt(c),l<48||l>s)return NaN;return parseInt(n,i)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof h&&(b?n(function(){g.valueOf.call(a)}):o(a)!=u)?l(new f(v(e)),a,h):v(e)};for(var k,D=a("9e1e")?c(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),F=0;D.length>F;F++)s(f,k=D[F])&&!s(h,k)&&d(h,k,m(f,k));h.prototype=g,g.constructor=h,a("2aba")(i,u,h)}},d06b:function(t,e,a){t.exports=a.p+"40509e9426c6f711f9d13b71e637e241.jpg"},d75b:function(t,e,a){t.exports=a.p+"5aa84d708ab9486f1ed8e3f17faccd77.jpg"},e98c:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrap-box"},[a("el-card",{staticClass:"title-card"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},["1"==t.paramsPage?a("el-breadcrumb-item",{attrs:{to:{path:"/consumables/out"}}},[t._v("出库")]):t._e(),"2"==t.paramsPage?a("el-breadcrumb-item",{attrs:{to:{path:"/consumables/myout"}}},[t._v("我的申请")]):t._e(),"1"==t.paramsPage?a("el-breadcrumb-item",[t._v("出库单")]):t._e(),"2"==t.paramsPage?a("el-breadcrumb-item",[t._v("我的申请单")]):t._e()],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],staticClass:"router-view-wrap"},[a("div",{staticClass:"router-view-content"},[a("el-row",{staticClass:"padding-row"},[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"instockDetailedForm",staticClass:"instockDetailedForm",attrs:{model:t.instockDetailedForm,"label-width":"120px",rules:t.instockDetailedRules}},[a("el-form-item",{attrs:{label:"出库类型：",prop:"applyType"}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请选择",disabled:"2"==t.paramsType||"3"==t.paramsType},on:{change:t.onChange},model:{value:t.instockDetailedForm.applyType,callback:function(e){t.$set(t.instockDetailedForm,"applyType",e)},expression:"instockDetailedForm.applyType"}},t._l(t.applyTypeList,function(t,e){return a("el-option",{key:e+"-出库类型",attrs:{value:t.id,label:t.name}})}))],1),a("el-form-item",{attrs:{label:"联系电话：",prop:"applyPhone"}},[a("el-input",{attrs:{disabled:"3"==t.paramsType},model:{value:t.instockDetailedForm.applyPhone,callback:function(e){t.$set(t.instockDetailedForm,"applyPhone",e)},expression:"instockDetailedForm.applyPhone"}})],1),a("el-form-item",{attrs:{label:"出库备注：",prop:"description"}},[a("el-input",{attrs:{type:"textarea",disabled:"3"==t.paramsType},model:{value:t.instockDetailedForm.description,callback:function(e){t.$set(t.instockDetailedForm,"description",e)},expression:"instockDetailedForm.description"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"出库清单：",prop:"articles"}},[a("el-row",{attrs:{gutter:20}},[t._l(t.instockDetailedForm.articles,function(e,i){return a("div",{key:i+"-出库清单"},[a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"marb10",staticStyle:{position:"relative"},attrs:{shadow:""}},["1"==t.paramsType||"2"==t.paramsType?a("i",{staticClass:"el-icon-delete text-danger cursor-pointer",staticStyle:{position:"absolute",right:"10px",top:"10px","font-size":"20px"},attrs:{type:"danger"},on:{click:function(e){t.delete_articles(i)}}}):t._e(),1==t.instockDetailedForm.applyType?a("el-tabs",{on:{"tab-click":function(a){t.handleClick(a,e,i)}},model:{value:e.activeName,callback:function(a){t.$set(e,"activeName",a)},expression:"item.activeName"}},[a("el-tab-pane",{attrs:{label:"耗材",name:"first",disabled:"2"==t.paramsType||"3"==t.paramsType}},[a("el-form-item",{staticClass:"marb10",attrs:{label:"耗材类型：",prop:"materialType"}},[a("el-cascader",{staticClass:"fill-width",attrs:{options:t.typeTree,props:t.typeTreeProps,"change-on-select":"",disabled:"3"==t.paramsType,filterable:""},on:{change:function(e){t.cascaderChanged(e,"modelForm01",i)}},model:{value:e.materialType,callback:function(a){t.$set(e,"materialType",a)},expression:"item.materialType"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"耗材型号：",prop:"modelID",rules:[{required:!1,message:"请选择",trigger:"blur"}]}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请先选择类型后再选择型号",disabled:e.materialType.length<=0||"3"==t.paramsType,filterable:""},on:{change:function(e){t.modelChange(e,i)}},model:{value:e.modelID,callback:function(a){t.$set(e,"modelID",a)},expression:"item.modelID"}},t._l(t.dialogModelList01,function(t,e){return a("el-option",{key:e+"-型号",attrs:{value:t.id,label:t.materialModel+"（可用库存："+(t.inStockAmount?t.inStockAmount:0)+"）"}})})),"1"==t.paramsType||"2"==t.paramsType?a("span",{staticClass:"text-info"},[t._v("（若需改变；先选择设备耗材类型，再选择耗材型号）")]):t._e()],1)],1),a("el-tab-pane",{attrs:{label:"设备",name:"second",disabled:"2"==t.paramsType||"3"==t.paramsType}},[a("el-form-item",{staticClass:"marb10",attrs:{label:"耗材类型：",prop:"materialType"}},[a("el-cascader",{staticClass:"fill-width",attrs:{options:t.typeTree,props:t.typeTreeProps,"change-on-select":"",disabled:"3"==t.paramsType,filterable:""},on:{change:function(e){t.cascaderChanged(e,"modelForm02",i)}},model:{value:e.materialType,callback:function(a){t.$set(e,"materialType",a)},expression:"item.materialType"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"耗材型号：",prop:"modelID",rules:[{required:!1,message:"请选择",trigger:"change"}]}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请先选择类型后再选择型号",disabled:e.materialType.length<=0||"3"==t.paramsType,filterable:""},on:{change:function(e){t.modelChange(e,i)}},model:{value:e.modelID,callback:function(a){t.$set(e,"modelID",a)},expression:"item.modelID"}},t._l(t.dialogModelList02,function(t,e){return a("el-option",{key:e+"-型号",attrs:{value:t.id,label:t.materialModel+"（可用库存："+(t.inStockAmount?t.inStockAmount:0)+"）"}})})),"1"==t.paramsType||"2"==t.paramsType?a("span",{staticClass:"text-info"},[t._v("（若需改变；先选择设备耗材类型，再选择耗材型号）")]):t._e()],1)],1)],1):t._e(),1!=t.instockDetailedForm.applyType?a("br"):t._e(),1!=t.instockDetailedForm.applyType?a("el-form-item",{staticClass:"is-required",attrs:{label:"设备编号：",prop:"identifier"}},[a("el-input",{attrs:{placeholder:"请输入序列号/编号，查询需加入出库清单的设备",disabled:"3"==t.paramsType},on:{blur:function(e){t.blur(e,i)}},model:{value:e.identifier,callback:function(a){t.$set(e,"identifier",a)},expression:"item.identifier"}})],1):t._e(),1!=t.instockDetailedForm.applyType?a("el-form-item",{attrs:{label:"设备：",prop:""}},[a("el-table",{attrs:{data:e.modelList}},[a("el-table-column",{attrs:{label:"耗材类型",prop:"materialTypeName","show-overflow-tooltip":"",width:""}}),a("el-table-column",{attrs:{label:"耗材型号",prop:"materialModelName",width:"","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"型号类型",prop:"modelType",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.modelType?a("el-tag",[t._v("耗材")]):t._e(),2===e.row.modelType?a("el-tag",{attrs:{type:"success"}},[t._v("设备")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"教室",prop:"address",width:"100","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"设备序列号",prop:"serialNum",width:"","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"数量",prop:"amount",width:"100"}}),a("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.curStatus?a("el-tag",{attrs:{type:"success"}},[t._v("在库")]):t._e(),2===e.row.curStatus?a("el-tag",{attrs:{type:"warning"}},[t._v("出库")]):t._e()]}}])})],1)],1):t._e(),1==t.instockDetailedForm.applyType?a("el-form-item",{staticClass:"is-required",attrs:{label:"数量：",prop:"amount",rules:[{required:!1,message:"请输入",trigger:"blur"}]}},[a("el-input-number",{staticClass:"fill-width",attrs:{min:0,max:e.inStockAmount,disabled:"3"==t.paramsType},model:{value:e.amount,callback:function(a){t.$set(e,"amount",a)},expression:"item.amount"}})],1):t._e(),1==t.instockDetailedForm.applyType&&"3"==t.paramsType?a("el-form-item",{staticClass:"is-required",attrs:{label:"出库位置：",prop:"outStockInfoHasStorehouseList"}},[a("el-row",{attrs:{gutter:20}},[t._l(e.outStockInfoHasStorehouseList,function(s,o){return a("div",[a("el-col",{attrs:{span:10}},[a("el-card",{staticClass:"marb5",staticStyle:{position:"relative"},attrs:{shadow:""}},["3"==t.paramsType?a("i",{staticClass:"el-icon-delete text-danger cursor-pointer",staticStyle:{position:"absolute",top:"5px",right:"5px"},on:{click:function(e){t.delete_outStockInfoHasStorehouseList(i,o)}}}):t._e(),a("el-form-item",{staticClass:"is-required",attrs:{label:"教室：",prop:"materialId","label-width":"70px",rules:[{required:!1,message:"请选择",trigger:"blur"}]}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请选择",filterable:""},model:{value:s.materialId,callback:function(e){t.$set(s,"materialId",e)},expression:"itemChild.materialId"}},t._l(e.materialStorehouseList,function(t,e){return a("el-option",{key:e+"-子教室",attrs:{value:t.id,label:t.address}})}))],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"数量：",prop:"amount","label-width":"70px",rules:[{required:!1,message:"请输入",trigger:"blur"}]}},[a("el-input-number",{staticClass:"fill-width",attrs:{min:0,max:e.amount-t.sum(i,o)},model:{value:s.amount,callback:function(e){t.$set(s,"amount",e)},expression:"itemChild.amount"}})],1)],1)],1)],1)}),a("el-col",{attrs:{span:10}},["3"==t.paramsType?a("el-button",{staticClass:"mart10",attrs:{type:"warning",size:"mini",icon:"el-icon-plus"},on:{click:function(e){t.add_outStockInfoHasStorehouseList(i)}}},[t._v("添 加")]):t._e(),a("span",{staticClass:"text-info"},[t._v("（出库的数量之和需等于总数量）")])],1)],2)],1):t._e()],1)],1)],1)}),a("el-col",{attrs:{span:24}},["1"==t.paramsType||"2"==t.paramsType?a("el-button",{staticClass:"mart10",attrs:{type:"warning",icon:"el-icon-plus",size:"mini"},on:{click:function(e){t.add_articles()}}},[t._v("添加清单")]):t._e()],1)],2)],1)],1)],1)],1)],1),a("div",{staticClass:"router-view-bottom_ overflow-hidden"},["1"==t.paramsType?a("el-button",{staticClass:"fr",attrs:{type:"primary",size:"",icon:"el-icon-document-checked"},on:{click:function(e){t.createInstockDetailedForm()}}},[t._v("保 存")]):t._e(),"2"==t.paramsType?a("el-button",{staticClass:"fr",attrs:{type:"primary",size:"",icon:"el-icon-document-checked"},on:{click:function(e){t.editInstockDetailedForm()}}},[t._v("确认修改")]):t._e(),"3"==t.paramsType?a("el-button",{staticClass:"fr",attrs:{type:"primary",size:"",icon:"el-icon-document-checked"},on:{click:function(e){t.dialog(1)}}},[t._v("同意出库")]):t._e(),"3"==t.paramsType?a("el-button",{staticClass:"fr marr10",attrs:{type:"danger",size:"",icon:"el-icon-document-checked"},on:{click:function(e){t.dialog(2)}}},[t._v("拒 绝")]):t._e(),"2"==t.paramsType||"1"==t.paramsType?a("el-button",{staticClass:"fr marr10",attrs:{type:"",size:""},on:{click:function(e){t.reset(1)}}},[t._v("重 置")]):t._e(),a("el-button",{staticClass:"fr marr10",attrs:{type:"warning",size:""},on:{click:function(e){t.$router.go(-1)}}},[t._v("返 回")])],1)]),a("el-dialog",{attrs:{title:1===t.dialogType?"同意":"拒绝",visible:t.dialogVisible,width:"30vw"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[1===t.dialogType?a("el-form-item",{attrs:{label:"图片：",prop:"approverFiles"}},[a("upload",{attrs:{buttonText:"点击上传",fileTypes:["png","jpg"]},on:{uploadSuccess:function(e){t.uploadFileSuccess(e)}}}),a("file-show",{attrs:{fileList:t.form.approverFiles?[JSON.parse(t.form.approverFiles)]:[],closable:!0},on:{handleClose:t.handleClose}})],1):t._e(),a("el-form-item",{attrs:{label:"备注：",prop:"reason"}},[a("el-input",{staticClass:"fill-width",attrs:{placeholder:"请输入",type:"textarea"},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason",e)},expression:"form.reason"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("form")}}},[t._v("确 定")])],1)],1)],1)},s=[],o=(a("7f7f"),a("c5f6"),a("28a5"),a("ac6a"),a("cadf"),a("551c"),a("097d"),a("d443")),l=a("4a9b"),r={components:{upload:o["a"],FileShow:l["a"]},data:function(){var t=this;return{paramsPage:this.$route.params.page,paramsType:this.$route.params.type,paramsId:this.$route.params.id,pageLoading:!1,userList:[],typeTree:[],typeTreeProps:{label:"materialType",value:"id",children:"childrens"},dialogModelList01:null,dialogModelList02:null,housesList:[],modelForm:{},dialogInstockDetailedVisible:!1,applyTypeList:[{id:1,name:"借出申请"},{id:2,name:"维修申请"},{id:3,name:"报废"}],instockDetailedForm:{applyType:1,description:null,applyPhone:null,articles:[{amount:1,inStockAmount:0,materialType:[],modelID:null,identifier:null,activeName:"first",modelList:[]}]},instockDetailedRules:{applyType:[{required:!0,message:"请选择",trigger:"change"}],applyPhone:[{required:!0,message:"请输入",trigger:"blur"}],description:[{required:!1,message:"请输入要求",trigger:"blur"},{validator:function(e,a,i){t.common.wordNumberValid(e,a,i,"textarea")},trigger:"blur"}]},dialogVisible:!1,dialogType:1,form:{reason:null,approverFiles:null},rules:{reason:[{required:!0,message:"请输入",trigger:"blur"},{validator:function(e,a,i){t.common.wordNumberValid(e,a,i,"textarea")},trigger:"blur"}],approverFiles:[{required:!0,message:"请上传图片",trigger:"blur"}]}}},computed:{},created:function(){this.getUserList(),this.getTypeTree()},mounted:function(){("2"==this.paramsType||"3"==this.paramsType)&&this.getInstockDetailedInfo(),"1"==this.paramsType&&this.getModelAllList(1,!1),"1"==this.paramsType&&this.getUserBaseInfo()},methods:{getUserBaseInfo:function(){var t=this,e={method:"get",url:"".concat(this.common.basePath,"/user/one/user"),params:{id:sessionStorage.getItem("Access-Key")}};this.axios(e).then(function(e){t.instockDetailedForm.applyPhone=e.data.data.phone_num}).catch(function(e){t.$message.error(e)})},uploadFileSuccess:function(t){this.form.approverFiles=JSON.stringify(t)},handleClose:function(t){var e=this;this.$confirm("是否删除该照片？","提示",{comfirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(t){e.form.approverFiles=null}).catch(function(t){})},blur:function(t,e){var a=this;if(console.log(t.target.value),null!=t.target.value&&""!=t.target.value){var i={method:"post",url:"".concat(this.common.basePath,"/storehouse/detail?serialNum=").concat(t.target.value),data:{serialNum:t.target.value}};this.axios(i).then(function(t){t.data.data&&1==t.data.data.curStatus?a.instockDetailedForm.articles[e].modelList=[t.data.data]:(a.$message.error("未查询到设备或者该设备不可用！！"),a.instockDetailedForm.articles[e].identifier=null,a.instockDetailedForm.articles[e].modelList=[])}).catch(function(t){a.$message.error(t)})}},modelChange:function(t,e){var a=this,i={method:"post",url:"".concat(this.common.basePath,"/material_model/detail?id=").concat(t),data:{}};this.axios(i).then(function(t){a.instockDetailedForm.articles[e].inStockAmount=t.data.data.inStockAmount?t.data.data.inStockAmount:0}).catch(function(t){a.$message.error(t)})},sum:function(t,e){var a=this.instockDetailedForm.articles[t].outStockInfoHasStorehouseList,i=a.slice(0,e).reduce(function(t,e,a,i){return t+e.amount},0);return i},getInstockDetailedInfo:function(){var t=this,e={method:"get",url:"".concat(this.common.basePath,"/materialApply/info"),params:{applyID:this.paramsId}},a=this;a.getModelAllList(1,!0),a.getModelAllList(2,!0),this.axios(e).then(function(e){var i=e.data.data;1==i.applyType?i.articles.forEach(function(t,e){t.activeName=1==t.modelType?"first":"second",t.materialType=t.materialTypeCode.split("-").map(Number),a.modelChange(t.modelID,e)}):i.articles.forEach(function(t,e){t.outStockInfoHasStorehouseList&&t.outStockInfoHasStorehouseList.length>0&&(t.modelList=t.outStockInfoHasStorehouseList,t.modelList[0].materialTypeName=t.materialTypeName,t.modelList[0].materialModelName=t.materialModelName,t.modelList[0].modelType=t.modelType,t.identifier=t.outStockInfoHasStorehouseList[0].identifier),t.activeName=1==t.modelType?"first":"second",t.materialType=t.materialTypeCode.split("-").map(Number)}),console.log("编辑回显信息：",i),t.instockDetailedForm=i}).catch(function(e){t.$message.error(e)})},onChange:function(t){this.reset(t)},handleClick:function(t,e,a){console.log("tab切换：",t.name,e,a),"2"==this.paramsType||this.paramsType,this._handleClick(t,e,a)},_handleClick:function(t,e,a){var i=this;if("second"==t.name?this.getModelAllList(2,!0):this.getModelAllList(1,!0),this.instockDetailedForm.articles[a].materialType=[],"first"==t.name){this.instockDetailedForm.articles[a].modelID=this.dialogModelList01&&this.dialogModelList01.length>0?this.dialogModelList01[0].id:null;var s={method:"post",url:"".concat(this.common.basePath,"/material_model/detail?id=").concat(this.dialogModelList01&&this.dialogModelList01.length>0?this.dialogModelList01[0].id:null),data:{}};this.axios(s).then(function(t){i.instockDetailedForm.articles[a].inStockAmount=t.data.data.inStockAmount?t.data.data.inStockAmount:0}).catch(function(t){i.$message.error(t)})}else if(this.dialogModelList02){this.instockDetailedForm.articles[a].modelID=this.dialogModelList02&&this.dialogModelList02.length>0?this.dialogModelList02[0].id:null;var o={method:"post",url:"".concat(this.common.basePath,"/material_model/detail?id=").concat(this.dialogModelList02&&this.dialogModelList02.length>0?this.dialogModelList02[0].id:null),data:{}};this.axios(o).then(function(t){i.instockDetailedForm.articles[a].inStockAmount=t.data.data.inStockAmount?t.data.data.inStockAmount:0}).catch(function(t){i.$message.error(t)})}else{var l={method:"post",url:"".concat(this.common.basePath,"/material_model/list"),data:{modelType:2}};this.axios(l).then(function(t){i.instockDetailedForm.articles[a].modelID=t.data.data.rows[0].id;var e={method:"post",url:"".concat(i.common.basePath,"/material_model/detail?id=").concat(t.data.data.rows[0].id),data:{}};i.axios(e).then(function(t){i.instockDetailedForm.articles[a].inStockAmount=t.data.data.inStockAmount?t.data.data.inStockAmount:0}).catch(function(t){i.$message.error(t)})}).catch(function(t){i.$message.error(t)})}this.instockDetailedForm.articles[a].identifier=null,this.instockDetailedForm.articles[a].amount=1,this.instockDetailedForm.articles[a].activeName=t.name,this.instockDetailedForm.articles[a].modelList=[]},add_articles:function(){var t=this,e={amount:1,inStockAmount:0,materialType:[],modelID:this.dialogModelList01&&this.dialogModelList01.length>0?this.dialogModelList01[0].id:"",identifier:null,activeName:"first",modelList:[]},a={method:"post",url:"".concat(this.common.basePath,"/material_model/detail?id=").concat(e.modelID),data:{}};this.axios(a).then(function(t){e.inStockAmount=t.data.data.inStockAmount?t.data.data.inStockAmount:0}).catch(function(e){t.$message.error(e)}),this.instockDetailedForm.articles.push(e)},delete_articles:function(t){this.instockDetailedForm.articles.splice(t,1)},add_outStockInfoHasStorehouseList:function(t){var e={materialId:this.instockDetailedForm.articles[t].materialStorehouseList&&this.instockDetailedForm.articles[t].materialStorehouseList.length>0?this.instockDetailedForm.articles[t].materialStorehouseList[0].id:null,amount:1};this.instockDetailedForm.articles[t].outStockInfoHasStorehouseList.push(e)},delete_outStockInfoHasStorehouseList:function(t,e){this.instockDetailedForm.articles[t].outStockInfoHasStorehouseList.splice(e,1)},getTypeTree:function(){var t=this,e={method:"post",url:"".concat(this.common.basePath,"/material_type/tree"),data:{}};this.axios(e).then(function(e){t.typeTree=e.data.data}).catch(function(e){t.$message.error(e)})},cascaderChanged:function(t,e,a){var i=null;"modelForm01"==e?i="dialogModelList01":"modelForm02"==e&&(i="dialogModelList02"),this.getModelList(t[t.length-1],i,a)},getModelList:function(t,e,a){var i=this;this.instockDetailedForm.articles[a].modelID=null;var s={method:"post",url:"".concat(this.common.basePath,"/material_model/list"),data:{materialType:t,modelType:"dialogModelList01"==e?1:2}};this.axios(s).then(function(t){i[e]=t.data.data.rows}).catch(function(t){i.$message.error(t)})},getModelAllList:function(t,e){var a=this,i={method:"post",url:"".concat(this.common.basePath,"/material_model/list"),data:{modelType:t}};this.axios(i).then(function(i){1==t?a.dialogModelList01=i.data.data.rows:a.dialogModelList02=i.data.data.rows,"1"==a.paramsType&&i.data.data.total>0&&!e&&(a.instockDetailedForm.articles[0].modelID=i.data.data.rows[0].id,a.modelChange(i.data.data.rows[0].id,0))}).catch(function(t){a.$message.error(t)})},getUserList:function(){var t=this,e={method:"post",url:"".concat(this.common.basePath,"/user/list"),data:{pageNum:1,pageSize:9999}};this.axios(e).then(function(e){t.userList=e.data.data.rows}).catch(function(e){t.$message.error(e)})},getHouseList:function(){var t=this,e={method:"post",url:"".concat(this.common.basePath,"/material_shelves/list"),data:{}};this.axios(e).then(function(e){t.housesList=e.data.data.rows}).catch(function(e){t.$message.error(e)})},getStoreList:function(t,e){var a=this;""==e&&(e=null);var i={serialNum:e},s={method:"post",url:"".concat(this.common.basePath,"/storehouse/list"),data:JSON.parse(JSON.stringify(i))};this.axios(s).then(function(e){a.instockDetailedForm.articles[t].modelList=e.data.data.rows}).catch(function(t){a.$message.error(t)})},reset:function(t){var e=this;this.instockDetailedForm={applyType:t,description:null,applyPhone:null,articles:[{amount:1,inStockAmount:0,materialType:[],modelID:this.dialogModelList01&&this.dialogModelList01.length>0?this.dialogModelList01[0].id:null,identifier:null,activeName:"first",modelList:[]}]};var a={method:"post",url:"".concat(this.common.basePath,"/material_model/detail?id=").concat(this.dialogModelList01&&this.dialogModelList01.length>0?this.dialogModelList01[0].id:null),data:{}};this.axios(a).then(function(t){e.instockDetailedForm.articles[0].inStockAmount=t.data.data.inStockAmount?t.data.data.inStockAmount:0}).catch(function(t){e.$message.error(t)});var i={method:"get",url:"".concat(this.common.basePath,"/user/one/user"),params:{id:sessionStorage.getItem("Access-Key")}};this.axios(i).then(function(t){e.instockDetailedForm.applyPhone=t.data.data.phone_num?t.data.data.phone_num:e.instockDetailedForm.applyPhone}).catch(function(t){e.$message.error(t)})},createInstockDetailedForm:function(){var t=this.instockDetailedForm,e=this,a=!0;t.articles.forEach(function(t,i){if(delete t.inStockAmount,1==e.instockDetailedForm.applyType)delete t.identifier,a=!0;else{if(t.amount=1,0==t.modelList.length)return e.$message.error("出库清单未筛选出需出库的设备！"),void(a=!1);t.modelID=t.modelList[0].materialModel}});var i={method:"post",url:"".concat(this.common.basePath,"/materialApply/add"),data:t};a&&this._createInstockDetailedFormRequest(i)},_createInstockDetailedFormRequest:function(t){var e=this;this.$refs.instockDetailedForm.validate(function(a){if(!a)return!1;e.axios(t).then(function(t){e.$message.success(t.data.meta.message),"1"==e.paramsPage?e.$router.push({name:"Out"}):e.$router.push({name:"MyOut"})}).catch(function(t){e.reset(1),e.$message.error(t)})})},editInstockDetailedForm:function(){var t=this.instockDetailedForm,e=this,a=!0;t.articles.forEach(function(t,i){if(delete t.inStockAmount,1==e.instockDetailedForm.applyType)delete t.identifier,a=!0;else{if(t.amount=1,0==t.modelList.length)return e.$message.error("出库清单未筛选出需报废/维修申请的设备！"),void(a=!1);t.modelID=t.modelList[0].materialModel}});var i={method:"post",url:"".concat(this.common.basePath,"/materialApply/update"),data:t};a&&this._editInstockDetailedFormRequest(i)},_editInstockDetailedFormRequest:function(t){var e=this;this.$refs.instockDetailedForm.validate(function(a){if(!a)return!1;e.axios(t).then(function(t){e.$message.success(t.data.meta.message),"1"==e.paramsPage?e.$router.push({name:"Out"}):e.$router.push({name:"MyOut"})}).catch(function(t){e.$message.error(t)})})},agreeInstockDetailedForm:function(){var t=this.instockDetailedForm,e=this,a=!0;t.articles.forEach(function(t,i){if(delete t.inStockAmount,1==e.instockDetailedForm.applyType)delete t.identifier,a=!0;else{if(t.amount=1,0==t.modelList.length)return e.$message.error("出库清单未筛选出需报废/维修申请的设备！"),void(a=!1);t.modelID=t.modelList[0].materialModel}});var i={method:"post",url:"".concat(this.common.basePath,"/materialApply/agree"),data:t};a&&this._agreeInstockDetailedFormRequest(i)},_agreeInstockDetailedFormRequest:function(t){var e=this;this.$refs.instockDetailedForm.validate(function(a){if(!a)return!1;console.log(t.data),e.axios(t).then(function(t){e.$message.success(t.data.meta.message),"1"==e.paramsPage?e.$router.push({name:"Out"}):e.$router.push({name:"MyOut"})}).catch(function(t){e.$message.error(t)})})},dialog:function(t){var e=this;this.form={reason:null,approverFiles:null},this.$nextTick(function(){e.$refs.form.resetFields()}),this.dialogVisible=!0,this.dialogType=t},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.instockDetailedForm.reason=e.form.reason,e.instockDetailedForm.approverFiles=e.form.approverFiles,1==e.dialogType?e.agreeInstockDetailedForm():e.rejectInstockDetailedForm()})},rejectInstockDetailedForm:function(){var t=this,e=this.instockDetailedForm,a={method:"post",url:"".concat(this.common.basePath,"/materialApply/reject"),data:{id:e.id}};this.$refs.instockDetailedForm.validate(function(e){if(!e)return!1;t.axios(a).then(function(e){t.$message.success(e.data.meta.message),"1"==t.paramsPage?t.$router.push({name:"Out"}):t.$router.push({name:"MyOut"})}).catch(function(e){t.$message.error(e)})})}}},n=r,c=a("2877"),m=Object(c["a"])(n,i,s,!1,null,null,null);m.options.__file="OutstockDetailedForm.vue";e["default"]=m.exports},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-2974.a8271ae9.js.map