(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee1f"],{3041:function(t,e,a){"use strict";var r=a("d281"),o=a.n(r);o.a},"44cc":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrap-box"},[a("el-card",{staticClass:"title-card"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("设备借还")])],1)],1),a("div",{staticClass:"router-view-wrap"},[a("div",{staticClass:"router-view-content"},[t.common.checkAuthority("Rent-list",!0)?a("div",[a("el-form",{ref:"searchForm",attrs:{model:t.searchForm,"label-width":"120px"}},[a("el-row",[t.common.checkAuthorityTree("Standard-list")&&t.typeTree?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"设备规格：",prop:"types"}},[a("el-cascader",{staticClass:"fill-width",attrs:{options:t.typeTree,props:t.typeTreeProps,"change-on-select":""},on:{change:t.cascaderChanged},model:{value:t.searchForm.types,callback:function(e){t.$set(t.searchForm,"types",e)},expression:"searchForm.types"}})],1)],1):t._e(),t.common.checkAuthorityTree("Standard-listType")?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"设备型号：",prop:"model_id"}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请先选择规格后再选择型号",disabled:t.searchForm.types.length<=0},model:{value:t.searchForm.model_id,callback:function(e){t.$set(t.searchForm,"model_id",e)},expression:"searchForm.model_id"}},t._l(t.modelList,function(t,e){return a("el-option",{key:e+"型号",attrs:{value:t.id,label:t.model_name}})}))],1)],1):t._e(),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"编号：",prop:"code"}},[a("el-input",{staticClass:"fill-width",model:{value:t.searchForm.code,callback:function(e){t.$set(t.searchForm,"code",e)},expression:"searchForm.code"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"借还状态：",prop:"cur_status"}},[a("el-select",{staticClass:"fill-width",model:{value:t.searchForm.cur_status,callback:function(e){t.$set(t.searchForm,"cur_status",e)},expression:"searchForm.cur_status"}},t._l(t.common.borrowStatus,function(t,e){return a("el-option",{key:"借还状态"+e,attrs:{value:t.id,label:t.label}})}))],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.getTableList("init")}}},[t._v("搜索")]),a("el-button",{attrs:{type:"default"},on:{click:t.clearForm}},[t._v("重置")])],1)],1)],1)],1),a("el-table",{attrs:{data:t.tableData.rows}},[a("el-table-column",{attrs:{label:"编号",prop:"code",width:"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"序列号",prop:"serial_num",width:"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"规格",prop:"d_type","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"名称",prop:"d_name","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"借出人学号",prop:"borrow_user_account",width:"100"}}),a("el-table-column",{attrs:{label:"借出人",prop:"borrow_user"}}),a("el-table-column",{attrs:{label:"借出时间",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.common._convertDate(e.row.borrow_time,"yyyy年MM月dd日")))]}}])}),a("el-table-column",{attrs:{label:"借用人",prop:"lend_user"}}),a("el-table-column",{attrs:{label:"入库人",prop:"return_user"}}),a("el-table-column",{attrs:{label:"入库时间",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.common._convertDate(e.row.return_time,"yyyy年MM月dd日")))]}}])}),a("el-table-column",{attrs:{label:"状态",prop:"cur_status"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.common.transferBorrowStatus(e.row.cur_status)))]}}])}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",disabled:!t.common.checkAuthority("Rent-return",!0)||e.row.cur_status>1},on:{click:function(a){t.returnDevice(e.row)}}},[t._v("入库")]),a("el-button",{attrs:{type:"danger",size:"mini",disabled:!t.common.checkAuthority("Rent-scrap",!0)||e.row.cur_status>1},on:{click:function(a){t.scrapDevice(e.row,"3")}}},[t._v("报废")])]}}])})],1)],1):a("div",{staticClass:"text-center text-info"},[t._v(" 你无权查看此内容 ")])]),t.common.checkAuthority("Rent-list",!0)?a("div",{staticClass:"router-view-bottom"},[a("div"),a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","current-page":t.pageNum,"page-size":t.pageSize,total:t.tableData.total},on:{"size-change":t.pageSizeChange,"current-change":t.pageCurrentChange}})],1):a("div",{staticClass:"router-view-bottom"},[a("div")])])],1)},o=[],s={data:function(){return{typeTree:JSON.parse(sessionStorage.getItem("typeTree"))||[],typeTreeProps:{label:"d_name",value:"id",children:"children"},modelList:null,searchForm:{types:[],model_id:null,cur_status:null},tableData:{rows:[],total:0},pageNum:1,pageSize:10}},created:function(){},mounted:function(){this.common.checkAuthority("Rent-list",!0)&&this.getTableList()},methods:{getTableList:function(t){var e=this;this.tableLoading=!0;var a=this.searchForm;t&&(this.pageNum=1,this.pageSize=10),a.pageNum=this.pageNum,a.pageSize=this.pageSize;var r={method:"post",url:"".concat(this.common.basePath,"/br/list"),data:JSON.parse(JSON.stringify(a))};this.searchForm.types&&this.searchForm.types.length>0&&(r.data.type=this.searchForm.types[this.searchForm.types.length-1]),delete r.data.types,this.axios(r).then(function(t){e.tableData=t.data.data,e.$nextTick(function(t){e.tableLoading=!1})}).catch(function(t){e.tableLoading=!1,e.$message.error(t)})},clearForm:function(){this.searchForm={types:[],model_id:null,cur_status:null}},pageSizeChange:function(t){this.pageSize=t,this.getTableList()},pageCurrentChange:function(t){this.pageNum=t,this.getTableList()},returnDevice:function(t){var e=this;this.common.returnDevice(t,"/br/recovery").then(function(t){e.getTableList()}).catch(function(t){})},scrapDevice:function(t,e){var a=this;this.common.scrapDevice(t,e).then(function(t){a.getTableList()}).catch(function(t){})},cascaderChanged:function(t){this.searchForm.model_id=null,this.getModelList(t[t.length-1])},getModelList:function(t){var e=this,a={method:"get",url:"".concat(this.common.basePath,"/spec/select/model/public"),params:{id:t,pageNum:1,pageSize:999}};this.axios(a).then(function(t){e.modelList=t.data.data.rows,e.$refs.deviceForm&&e.$refs.deviceForm.resetFields()}).catch(function(t){e.$message.error(t)})}}},l=s,c=(a("3041"),a("2877")),i=Object(c["a"])(l,r,o,!1,null,null,null);i.options.__file="Rent.vue";e["default"]=i.exports},d281:function(t,e,a){}}]);
//# sourceMappingURL=chunk-ee1f.a674e1f9.js.map