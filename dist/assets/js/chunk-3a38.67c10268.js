(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a38"],{"0a50":function(e,t,a){},"1cad":function(e,t,a){e.exports=a.p+"263e75070edcfb14d01b443246914c45.jpg"},"3adb":function(e,t){e.exports="data:image/png;base64,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"},"4a9b":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"file-show-list-wrap"},[e.fileList&&e.fileList.length>0?s("div",e._l(e.fileList,function(t,i){return s("el-tag",{key:i+"文件展示",staticClass:"tag",attrs:{closable:e.closable},on:{close:function(a){e.$emit("handleClose",t)}}},["jpg"===t.name.split(".")[1]||"png"===t.name.split(".")[1]||"jpeg"===t.name.split(".")[1]||"gif"===t.name.split(".")[1]||"bmp"===t.name.split(".")[1]?s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,target:"_blank",download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:""+e.common.publicBasePath+t.path,onerror:e.errimage}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"mp4"===t.name.split(".")[1]||"rmvb"===t.name.split(".")[1]||"wmv"===t.name.split(".")[1]||"asf"===t.name.split(".")[1]||"avi"===t.name.split(".")[1]||"3gp"===t.name.split(".")[1]||"mpg"===t.name.split(".")[1]||"mkv"===t.name.split(".")[1]||"dvd"===t.name.split(".")[1]||"ogm"===t.name.split(".")[1]||"mpeg2"===t.name.split(".")[1]||"mpeg4"===t.name.split(".")[1]||"mpeg"===t.name.split(".")[1]||"mov"===t.name.split(".")[1]?s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:a("1cad")}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"mp3"===t.name.split(".")[1]||"ogg"===t.name.split(".")[1]||"wav"===t.name.split(".")[1]||"ape"===t.name.split(".")[1]||"cda"===t.name.split(".")[1]||"midi"===t.name.split(".")[1]||"acc"===t.name.split(".")[1]||"mac"===t.name.split(".")[1]?s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:a("b735")}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"doc"===t.name.split(".")[1]||"docx"===t.name.split(".")[1]?s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:a("8a43")}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"xls"===t.name.split(".")[1]||"xlsx"===t.name.split(".")[1]?s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:a("693b")}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"txt"===t.name.split(".")[1]?s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:a("6919")}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"ppt"===t.name.split(".")[1]||"pptx"===t.name.split(".")[1]?s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:a("d75b")}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"zip"===t.name.split(".")[1]?s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:a("d06b")}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:a("4f13")}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])])])})):e._e()])},i=[],o={data:function(){return{errimage:'this.src="'+a("3adb")+'";this.οnerrοr=null'}},props:{fileList:{type:Array},closable:{type:Boolean,default:!1},isDownload:{type:Boolean,default:!0}},created:function(){},mounted:function(){},methods:{errorHandler:function(){return!1}}},r=o,l=(a("b562"),a("2877")),n=Object(l["a"])(r,s,i,!1,null,"022c7508",null);n.options.__file="FileShow.vue";t["a"]=n.exports},"4f13":function(e,t,a){e.exports=a.p+"7cc76cd11d9a9887bd57315a5f0cd288.jpg"},"4fae":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap-box"},[a("el-card",{staticClass:"title-card"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("实验设备")])],1)],1),a("div",{staticClass:"router-view-wrap"},[a("div",{staticClass:"router-view-content"},[e.common.checkAuthority("DeviceList-list",!0)?a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"120px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-row",[e.common.checkAuthority("DeviceList-standardTree")&&e.typeTree.length>0?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"设备规格：",prop:"types"}},[a("el-cascader",{staticClass:"fill-width",attrs:{options:e.typeTree,props:e.typeTreeProps,"change-on-select":""},on:{change:function(t){e.cascaderChanged(t,"searchForm")}},model:{value:e.searchForm.types,callback:function(t){e.$set(e.searchForm,"types",t)},expression:"searchForm.types"}})],1)],1):e._e(),e.common.checkAuthority("DeviceList-typeList")?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"设备型号：",prop:"model_id"}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请先选择规格后再选择型号",disabled:e.searchForm.types.length<=0},model:{value:e.searchForm.model_id,callback:function(t){e.$set(e.searchForm,"model_id",t)},expression:"searchForm.model_id"}},e._l(e.modelList,function(e,t){return a("el-option",{key:t+"型号",attrs:{value:e.id,label:e.model_name}})}))],1)],1):e._e(),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"编号：",prop:"identifier"}},[a("el-input",{staticClass:"fill-width",model:{value:e.searchForm.identifier,callback:function(t){e.$set(e.searchForm,"identifier",t)},expression:"searchForm.identifier"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"设备状态：",prop:"cur_status"}},[a("el-select",{staticClass:"fill-width",model:{value:e.searchForm.cur_status,callback:function(t){e.$set(e.searchForm,"cur_status",t)},expression:"searchForm.cur_status"}},e._l(e.common.curStatus,function(e,t){return a("el-option",{key:"设备状态"+t,attrs:{value:e.id,label:e.label}})}))],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getDeviceList("init")}}},[e._v("搜索")]),a("el-button",{attrs:{type:"default"},on:{click:function(t){e.clearForm("searchForm")}}},[e._v("重置")])],1)],1)],1)],1),a("el-table",{attrs:{data:e.tableData.rows,"row-key":e.getRowKeys},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"55"}}),a("el-table-column",{attrs:{label:"编号",prop:"identifier",width:"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"序列号",prop:"serial_num",width:"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"规格",prop:"type_name","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"型号",prop:"model_name"}}),a("el-table-column",{attrs:{label:"位置",prop:"code"}}),a("el-table-column",{attrs:{label:"管理员",prop:"manager_name"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.common.transferDeviceStatus(t.row.cur_status)))]}}])}),a("el-table-column",{attrs:{label:"操作",width:"480"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"default",size:"mini",disabled:!e.common.checkAuthority("DeviceList-qrcode",!0)},on:{click:function(a){e.$store.commit("exchangeShowStatus",t.row)}}},[e._v("二维码")]),a("el-button",{attrs:{type:"default",size:"mini",disabled:!e.common.checkAuthority("DeviceList-series",!0)},on:{click:function(a){e.editSeries(t.row)}}},[e._v("序列号")]),a("el-button",{attrs:{type:"success",size:"mini",disabled:t.row.cur_status>1||!e.common.checkAuthority("DeviceList-transe",!0)},on:{click:function(a){e.transDevice(t.row)}}},[e._v("转移")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.row.cur_status>=2||!e.common.checkAuthority("DeviceList-borrow",!0)},on:{click:function(a){e.borrowDevice(t.row)}}},[e._v("借出")]),a("el-button",{attrs:{type:"warning",size:"mini",disabled:t.row.cur_status>=2||!e.common.checkAuthority("DeviceList-repair",!0)},on:{click:function(a){e.repairDevice(t.row)}}},[e._v("维修")]),a("el-button",{attrs:{type:"danger",size:"mini",disabled:t.row.cur_status>=20||!e.common.checkAuthority("DeviceList-scrap",!0)},on:{click:function(a){e.scrapDevice(t.row,"1")}}},[e._v("报废")])]}}])})],1)],1):a("div",{staticClass:"text-center text-info"},[e._v(" 你无权查看此内容 ")])]),e.common.checkAuthority("DeviceList-list",!0)?a("div",{staticClass:"router-view-bottom"},[a("div",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.common.checkAuthority("DeviceList-add",!0)},on:{click:e.addDevice}},[e._v("添加设备")]),a("el-popover",{staticClass:"pop-button",attrs:{placement:"top",width:"50px",trigger:"click"}},[a("p",[e._v("请选择尺寸")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.downloadQrcode(3)}}},[e._v("小尺寸")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.downloadQrcode(7)}}},[e._v("大尺寸")]),a("el-button",{attrs:{slot:"reference",disabled:e.selection.length<=0||!e.common.checkAuthority("DeviceList-qrcode",!0),type:"default",size:"mini"},slot:"reference"},[e._v("批量导出二维码")])],1)],1),a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","current-page":e.pageNum,"page-size":e.pageSize,total:e.tableData.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageCurrentChange}})],1):a("div",{staticClass:"router-view-bottom"},[a("div")])]),a("el-dialog",{attrs:{title:"添加设备",visible:e.dialogDeviceVisible,width:"60vw"},on:{"update:visible":function(t){e.dialogDeviceVisible=t}}},[a("el-form",{ref:"deviceForm",attrs:{model:e.deviceForm,"label-width":"100px",rules:e.deviceRules}},[a("el-form-item",{attrs:{label:"设备管理员："}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请选择设备管理员"},model:{value:e.deviceForm.manager,callback:function(t){e.$set(e.deviceForm,"manager",t)},expression:"deviceForm.manager"}},e._l(e.userDeviceList,function(e,t){return a("el-option",{key:t+"设备管理员列表",attrs:{value:e.id,label:e.user_name}})}))],1),a("el-form-item",{attrs:{label:"规格："}},[a("el-cascader",{staticClass:"fill-width",attrs:{options:e.typeTree,props:e.typeTreeProps,"change-on-select":""},on:{change:function(t){e.cascaderChanged(t,"deviceForm")}},model:{value:e.deviceForm.types,callback:function(t){e.$set(e.deviceForm,"types",t)},expression:"deviceForm.types"}})],1),a("el-form-item",{attrs:{label:"型号：",prop:"d_model_id"}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请先选择规格后再选择型号",disabled:e.deviceForm.types.length<=0},model:{value:e.deviceForm.d_model_id,callback:function(t){e.$set(e.deviceForm,"d_model_id",t)},expression:"deviceForm.d_model_id"}},e._l(e.dialogModelList,function(e,t){return a("el-option",{key:t+"型号",attrs:{value:e.id,label:e.model_name}})}))],1),a("el-form-item",{attrs:{label:"台数：",prop:"size"}},[a("el-input-number",{staticClass:"fill-width",attrs:{min:0},model:{value:e.deviceForm.size,callback:function(t){e.$set(e.deviceForm,"size",t)},expression:"deviceForm.size"}})],1),a("el-form-item",{attrs:{label:"教室：",prop:"class_room_id"}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请选择教室(可输入关键字筛选)",filterable:""},model:{value:e.deviceForm.class_room_id,callback:function(t){e.$set(e.deviceForm,"class_room_id",t)},expression:"deviceForm.class_room_id"}},e._l(e.classroomList,function(e,t){return a("el-option",{key:t+"教室",attrs:{value:e.id,label:e.identifier}})}))],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogDeviceVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("deviceForm")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"转移",visible:e.dialogTransVisible,width:"30vw"},on:{"update:visible":function(t){e.dialogTransVisible=t}}},[a("el-form",{ref:"transForm",attrs:{model:e.transForm,rules:e.transRules}},[a("el-form-item",{attrs:{label:"教室：",prop:"class_room_id"}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请选择教室(可输入关键字筛选)",filterable:""},model:{value:e.transForm.class_room_id,callback:function(t){e.$set(e.transForm,"class_room_id",t)},expression:"transForm.class_room_id"}},e._l(e.classroomList,function(e,t){return a("el-option",{key:t+"教室",attrs:{value:e.id,label:e.identifier}})}))],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTransVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitTransForm()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"借出",visible:e.dialogBorrowVisible,width:"30vw"},on:{"update:visible":function(t){e.dialogBorrowVisible=t}}},[a("el-form",{ref:"borrowForm",attrs:{model:e.borrowForm,rules:e.borrowRules}},[a("el-form-item",{attrs:{label:"借用人：",prop:"lend_user"}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请选择借用人"},on:{change:e.getPersonTel},model:{value:e.borrowForm.lend_user,callback:function(t){e.$set(e.borrowForm,"lend_user",t)},expression:"borrowForm.lend_user"}},e._l(e.userList,function(e,t){return a("el-option",{key:t+"用户列表",attrs:{value:e.id,label:e.user_name}})}))],1),a("el-form-item",{attrs:{label:"联系号码：",prop:"telephone"}},[a("el-input",{staticClass:"fill-width",attrs:{placeholder:"请输入联系号码"},model:{value:e.borrowForm.telephone,callback:function(t){e.$set(e.borrowForm,"telephone",t)},expression:"borrowForm.telephone"}})],1),a("el-form-item",{attrs:{label:"照片：",prop:"picture"}},[a("upload",{attrs:{buttonText:"点击上传",fileTypes:["png","jpg"]},on:{uploadSuccess:function(t){e.uploadFileSuccess(t)}}}),a("file-show",{attrs:{fileList:e.borrowForm.picture,closable:!0},on:{handleClose:e.handleClose}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogBorrowVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitBorrowForm()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"维修",visible:e.dialogRepairVisible,width:"30vw"},on:{"update:visible":function(t){e.dialogRepairVisible=t}}},[a("el-form",{ref:"repairForm",attrs:{model:e.repairForm,rules:e.repairRules}},[a("el-form-item",{attrs:{label:"报修人：",prop:"user_id"}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请选择报修人"},model:{value:e.repairForm.user_id,callback:function(t){e.$set(e.repairForm,"user_id",t)},expression:"repairForm.user_id"}},e._l(e.userList,function(e,t){return a("el-option",{key:t+"用户列表2",attrs:{value:e.id,label:e.user_name}})}))],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogRepairVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitRepairForm()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"报废",visible:e.dialogScrapVisible,width:"30vw"},on:{"update:visible":function(t){e.dialogScrapVisible=t}}},[a("el-form",{ref:"scrapForm",attrs:{model:e.scrapForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"理由："}},[a("el-input",{staticClass:"fill-width",attrs:{placeholder:"请输入报废原因"},model:{value:e.scrapForm.reason,callback:function(t){e.$set(e.scrapForm,"reason",t)},expression:"scrapForm.reason"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogScrapVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitScrapForm()}}},[e._v("确 定")])],1)],1)],1)},i=[],o=a("d443"),r=a("4a9b"),l={components:{upload:o["a"],FileShow:r["a"]},data:function(){return{getRowKeys:function(e){return e.id},typeTree:[],typeTreeProps:{label:"d_name",value:"id",children:"children"},modelList:null,dialogModelList:null,userDeviceList:null,userList:null,labList:null,classroomList:null,searchForm:{types:[],model_id:null,cur_status:null},pageNum:1,pageSize:10,tableData:{rows:[],total:0},selection:[],tempDevice:null,dialogDeviceVisible:!1,deviceForm:{types:[],d_model_id:null,class_room_id:null},deviceRules:{manager:[{required:!0,message:"请选择管理人",trigger:"change"}],size:[{required:!0,message:"请选择型号",trigger:"change"}],d_model_id:[{required:!0,message:"请选择型号",trigger:"change"}],class_room_id:[{required:!0,message:"请选择教室",trigger:"change"}]},dialogBorrowVisible:!1,borrowForm:{lend_user:null,telephone:null,picture:[]},borrowRules:{lend_user:[{required:!0,message:"请选择借用人",trigger:"change"}],telephone:[{required:!0,message:"请输入联系号码",trigger:"blur"}],picture:[{required:!0,message:"请上传照片",trigger:"change"}]},dialogRepairVisible:!1,repairForm:{user_id:null},repairRules:{user_id:[{required:!0,message:"请选择报修人",trigger:"change"}]},dialogTransVisible:!1,transForm:{class_room_id:null},transRules:{class_room_id:[{required:!0,message:"请选择教室",trigger:"change"}]},dialogScrapVisible:!1,scrapForm:{reason:null},scrapRules:{reason:[{required:!0,message:"请填写理由",trigger:"change"}]}}},created:function(){this.typeTree=JSON.parse(sessionStorage.getItem("typeTree"))||[]},mounted:function(){this.common.checkAuthority("DeviceList-list",!0)&&(this.searchForm.cur_status=this.common.curStatus[1].id,this.getDeviceList("init"),this.getUserList(),this.getUserDeviceList(),this.getClassroomList())},methods:{getDeviceList:function(e){var t=this;this.tableLoading=!0;var a=this.searchForm;"init"==e&&(this.pageNum=1,this.pageSize=10),a.pageNum=this.pageNum,a.pageSize=this.pageSize;var s={method:"post",url:"".concat(this.common.basePath,"/device/list"),data:JSON.parse(JSON.stringify(a))};this.searchForm.types&&this.searchForm.types.length>0&&(s.data.type_id=this.searchForm.types[this.searchForm.types.length-1]),delete s.data.types,this.axios(s).then(function(e){t.tableData=e.data.data,t.$nextTick(function(e){t.tableLoading=!1})}).catch(function(e){t.tableLoading=!1,t.$message.error(e)})},cascaderChanged:function(e,t){var a=null;"searchForm"==t?(this[t].model_id=null,a="modelList"):"deviceForm"==t&&(this[t].d_model_id=null,a="dialogModelList"),this.getModelList(e[e.length-1],a)},getModelList:function(e,t){var a=this,s={method:"get",url:"".concat(this.common.basePath,"/spec/select/model/public"),params:{id:e}};this.axios(s).then(function(e){a[t]=e.data.data.rows,a.$refs.deviceForm&&a.$refs.deviceForm.resetFields()}).catch(function(e){a.$message.error(e)})},getUserList:function(){var e=this,t={method:"post",url:"".concat(this.common.basePath,"/user/list"),data:{pageNum:1,pageSize:999}};this.axios(t).then(function(t){e.userList=t.data.data.rows}).catch(function(t){e.$message.error(t)})},getUserDeviceList:function(){var e=this,t={method:"post",url:"".concat(this.common.basePath,"/user/list"),data:{pageNum:1,pageSize:999,roles:6}};this.axios(t).then(function(t){e.userDeviceList=t.data.data.rows}).catch(function(t){e.$message.error(t)})},getLabList:function(){var e=this,t={method:"get",url:"".concat(this.common.basePath,"/lab/list"),params:{pageNum:1,pageSize:999}};this.axios(t).then(function(t){e.labList=t.data.data.rows}).catch(function(t){e.$message.error(t)})},getClassroomList:function(){var e=this,t={method:"get",url:"".concat(this.common.basePath,"/class/list"),params:{pageNum:1,pageSize:999}};this.axios(t).then(function(t){e.classroomList=t.data.data.rows}).catch(function(t){e.$message.error(t)})},clearForm:function(e){var t=this;this.$nextTick(function(){t.$refs[e].resetFields()})},addDevice:function(){this.dialogDeviceVisible=!0,this.deviceForm={types:[],d_model_id:null,class_room_id:null},this.clearForm("deviceForm")},editSeries:function(e){var t=this,a=this;a.$prompt('<span><i class="required-label"></i>修改序列号</span>',"序列号",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:e.serial_num,dangerouslyUseHTMLString:!0,inputValidator:function(e){return!!e||(a.$message.error("请检查必填项"),!1)},inputErrorMessage:"请输入序列号"}).then(function(s){var i=s.value,o={method:"put",url:"".concat(a.common.basePath,"/device/update"),data:{id:e.de_id,serial_num:i}};i&&a.axios(o).then(function(e){a.$message.success(e.data.meta.message),t.getDeviceList(!1)}).catch(function(e){a.$message.error(e)})}).catch(function(e){})},borrowDevice:function(e){this.borrowForm={lend_user:null,telephone:null,picture:[]},this.clearForm("borrowForm"),this.borrowForm.de_id=[e.id],this.borrowForm.user_id=JSON.parse(sessionStorage.getItem("Access-Key"))||null,this.dialogBorrowVisible=!0},getPersonTel:function(e){var t=this,a={method:"get",url:"".concat(this.common.basePath,"/user/one/user"),params:{id:e}};this.axios(a).then(function(e){t.borrowForm.telephone=e.data.data.phone_num}).catch(function(e){t.$message.error(e)})},uploadFileSuccess:function(e){this.borrowForm.picture.push(e),console.log(this.borrowForm.picture)},handleClose:function(e){var t=this;this.$confirm("是否删除该照片？","提示",{comfirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(a){t.borrowForm.picture.splice(t.borrowForm.picture.indexOf(e),1),console.log(t.borrowForm.picture)}).catch(function(e){})},repairDevice:function(e){this.repairForm={user_id:null},this.clearForm("repairForm"),this.repairForm.de_id=[e.id],this.dialogRepairVisible=!0},transDevice:function(e){this.transForm={class_room_id:null},this.clearForm("transForm"),this.transForm.id=e.id,this.dialogTransVisible=!0},scrapDevice:function(e,t){var a=this;this.common.scrapDevice(e,t).then(function(e){a.getTableList()}).catch(function(e){})},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return t.$message.error("请检查表单填写是否正确"),!1;var s={method:"post",url:"".concat(t.common.basePath,"/device/add/").concat(t[e].size),data:t[e]};t.axios(s).then(function(e){t.getDeviceList("init"),t.$message.success(e.data.meta.message),t.dialogDeviceVisible=!1}).catch(function(e){t.$message.error(e)})})},submitBorrowForm:function(){var e=this;this.$refs.borrowForm.validate(function(t){if(!t)return e.$message.error("请检查表单填写是否正确"),!1;var a={method:"post",url:"".concat(e.common.basePath,"/br/add"),data:e.borrowForm};a.data.picture=JSON.stringify(a.data.picture),e.axios(a).then(function(t){e.getDeviceList(),e.$message.success(t.data.meta.message),e.dialogBorrowVisible=!1}).catch(function(t){e.$message.error(t)})})},submitRepairForm:function(){var e=this;this.$refs.repairForm.validate(function(t){if(!t)return e.$message.error("请检查表单填写是否正确"),!1;var a={method:"post",url:"".concat(e.common.basePath,"/repair/add"),data:e.repairForm};e.axios(a).then(function(t){e.getDeviceList(),e.$message.success(t.data.meta.message),e.dialogRepairVisible=!1}).catch(function(t){e.$message.error(t)})})},submitTransForm:function(){var e=this;this.$refs.transForm.validate(function(t){if(!t)return e.$message.error("请检查表单填写是否正确"),!1;var a={method:"patch",url:"".concat(e.common.basePath,"/device/update"),data:e.transForm};e.axios(a).then(function(t){e.getDeviceList(),e.$message.success(t.data.meta.message),e.dialogTransVisible=!1}).catch(function(t){e.$message.error(t)})})},submitScrapForm:function(){var e=this;this.$refs.scrapForm.validate(function(t){if(!t)return e.$message.error("请检查表单填写是否正确"),!1;var a={method:"post",url:"".concat(e.common.basePath,"/scrap/add"),data:e.scrapForm};e.axios(a).then(function(t){e.getDeviceList(),e.$message.success(t.data.meta.message),e.dialogScrapVisible=!1}).catch(function(t){e.$message.error(t)})})},pageSizeChange:function(e){this.pageSize=e,this.getDeviceList()},pageCurrentChange:function(e){this.pageNum=e,this.getDeviceList()},handleSelectionChange:function(e){this.selection=e},downloadQrcode:function(e){var t=this,a={method:"get",url:"".concat(this.common.basePath,"/device/qr"),params:{ids:this.selection.map(function(e){return e.id}).join(","),flag:e}};this.axios(a).then(function(e){window.location=e.request.responseURL}).catch(function(e){t.$message.error(e)})}}},n=l,c=(a("6de6"),a("2877")),m=Object(c["a"])(n,s,i,!1,null,null,null);m.options.__file="DeviceList.vue";t["default"]=m.exports},6919:function(e,t,a){e.exports=a.p+"2e4936c6128f1c3225b55b431b71db8a.jpg"},"693b":function(e,t,a){e.exports=a.p+"356c209a020157fa001eab7efcc7620a.jpg"},"6de6":function(e,t,a){"use strict";var s=a("c471"),i=a.n(s);i.a},"8a43":function(e,t,a){e.exports=a.p+"557c778d422c6b562734853fc3b966e2.jpg"},b562:function(e,t,a){"use strict";var s=a("0a50"),i=a.n(s);i.a},b735:function(e,t,a){e.exports=a.p+"8701718ae16e5ff270067dee98eab889.jpg"},c471:function(e,t,a){},d06b:function(e,t,a){e.exports=a.p+"40509e9426c6f711f9d13b71e637e241.jpg"},d75b:function(e,t,a){e.exports=a.p+"5aa84d708ab9486f1ed8e3f17faccd77.jpg"}}]);
//# sourceMappingURL=chunk-3a38.67c10268.js.map