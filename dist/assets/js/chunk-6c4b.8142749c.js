(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c4b"],{aaf9:function(e,t,a){},c517:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap-box"},[a("el-card",{staticClass:"title-card"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("耗材仓库")])],1)],1),a("div",{staticClass:"router-view-wrap"},[a("div",{staticClass:"router-view-content"},[e.common.checkAuthority("Warehouse-list",!0)?a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"120px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"教室：",prop:"classId"}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请选择该教室",filterable:""},model:{value:e.searchForm.classId,callback:function(t){e.$set(e.searchForm,"classId",t)},expression:"searchForm.classId"}},e._l(e.classList,function(e,t){return a("el-option",{key:t+"教室",attrs:{value:e.id,label:e.identifier}})}))],1)],1),e.common.checkAuthority("Warehouse-typeTree",!0)&&e.typeTree.length>0?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"耗材类型：",prop:"materialType"}},[a("el-cascader",{staticClass:"fill-width",attrs:{options:e.typeTree,props:e.typeTreeProps,"change-on-select":"",filterable:""},on:{change:function(t){e.cascaderChanged(t,"searchForm")}},model:{value:e.searchForm.materialType,callback:function(t){e.$set(e.searchForm,"materialType",t)},expression:"searchForm.materialType"}})],1)],1):e._e(),e.common.checkAuthority("Warehouse-modelList",!0)?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"耗材型号：",prop:"materialModel"}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请先选择类型后再选择型号",disabled:e.searchForm.materialType.length<=0,filterable:""},model:{value:e.searchForm.materialModel,callback:function(t){e.$set(e.searchForm,"materialModel",t)},expression:"searchForm.materialModel"}},e._l(e.modelList,function(e,t){return a("el-option",{key:t+"型号",attrs:{value:e.id,label:e.materialModel}})}))],1)],1):e._e(),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{type:"primary",disabled:!e.common.checkAuthority("Warehouse-query",!0)},on:{click:function(t){e.getDeviceList("init")}}},[e._v("搜索")]),a("el-button",{attrs:{type:"default"},on:{click:function(t){e.clearForm("searchForm")}}},[e._v("重置")])],1)],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableData.rows,"row-key":e.getRowKeys},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"55"}}),a("el-table-column",{attrs:{label:"耗材类型",prop:"materialTypeName","show-overflow-tooltip":"",width:""}}),a("el-table-column",{attrs:{label:"耗材型号",prop:"materialModelName",width:"","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"型号类型",prop:"modelType",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.modelType?a("el-tag",[e._v("耗材")]):e._e(),2===t.row.modelType?a("el-tag",{attrs:{type:"success"}},[e._v("设备")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"教室",prop:"address",width:"100","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"设备编号",prop:"identifier",width:"","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"设备序列号",prop:"serialNum",width:"","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"数量",prop:"amount",width:"100"}}),a("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.curStatus?a("el-tag",{attrs:{type:"success"}},[e._v("在库")]):e._e(),2===t.row.curStatus?a("el-tag",{attrs:{type:"warning"}},[e._v("出库")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"default",size:"mini",disabled:!e.common.checkAuthority("Warehouse-qrcode",!0)},on:{click:function(a){e.$store.commit("exchangeShowStatus_",t.row)}}},[e._v("二维码")]),a("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(a){e.showDetailDialog(t.row)}}},[e._v("查 看")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.common.checkAuthority("Warehouse-edit",!0)},on:{click:function(a){e.editDevice(t.row)}}},[e._v("编 辑")]),a("el-button",{attrs:{type:"danger",size:"mini",disabled:!e.common.checkAuthority("Warehouse-delete",!0)},on:{click:function(a){e.deleteMaterial(t.row,"single")}}},[e._v("删 除")])]}}])})],1)],1):a("div",{staticClass:"text-center text-info"},[e._v(" 你无权查看此内容 ")])]),e.common.checkAuthority("Warehouse-list",!0)?a("div",{staticClass:"router-view-bottom"},[a("div",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.common.checkAuthority("Warehouse-add",!0)},on:{click:e.addDevice}},[e._v("添加耗材")]),a("el-button",{attrs:{type:"danger",size:"mini",disabled:e.isDisabaledDelBtn()},on:{click:function(t){e.deleteMaterial(null,"multiple")}}},[e._v("批量删除")]),a("el-popover",{staticClass:"pop-button",attrs:{placement:"top",width:"50px",trigger:"click"}},[a("p",[e._v("请选择尺寸")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.downloadQrcode(3)}}},[e._v("小尺寸")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.downloadQrcode(7)}}},[e._v("大尺寸")]),a("el-button",{attrs:{slot:"reference",disabled:e.selection.length<=0||!e.common.checkAuthority("Warehouse-qrcode-download",!0),type:"default",size:"mini"},slot:"reference"},[e._v("批量导出二维码")])],1)],1),a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","current-page":e.pageNum,"page-size":e.pageSize,total:e.tableData.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageCurrentChange}})],1):a("div",{staticClass:"router-view-bottom"},[a("div")])]),a("el-dialog",{attrs:{title:"新增耗材",visible:e.dialogDeviceVisible,width:"60vw"},on:{"update:visible":function(t){e.dialogDeviceVisible=t}}},[a("el-form",{ref:"deviceForm",attrs:{model:e.deviceForm,"label-width":"100px",rules:e.deviceRules}},[a("el-form-item",{attrs:{label:"耗材类型："}},[a("el-cascader",{staticClass:"fill-width",attrs:{options:e.typeTree,props:e.typeTreeProps,"change-on-select":""},on:{change:function(t){e.cascaderChanged(t,"deviceForm")}},model:{value:e.deviceForm.materialType,callback:function(t){e.$set(e.deviceForm,"materialType",t)},expression:"deviceForm.materialType"}})],1),a("el-form-item",{attrs:{label:"耗材型号：",prop:"materialModel"}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请先选择类型后再选择型号",disabled:e.deviceForm.materialType.length<=0},model:{value:e.deviceForm.materialModel,callback:function(t){e.$set(e.deviceForm,"materialModel",t)},expression:"deviceForm.materialModel"}},e._l(e.dialogModelList,function(e,t){return a("el-option",{key:t+"型号",attrs:{value:e.id,label:e.materialModel}})}))],1),a("el-form-item",{attrs:{label:"耗材数量：",prop:"amount"}},[a("el-input-number",{staticClass:"fill-width",attrs:{min:0},model:{value:e.deviceForm.amount,callback:function(t){e.$set(e.deviceForm,"amount",t)},expression:"deviceForm.amount"}})],1),a("el-form-item",{attrs:{label:"备注：",prop:"description"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.deviceForm.description,callback:function(t){e.$set(e.deviceForm,"description",t)},expression:"deviceForm.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogDeviceVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("deviceForm")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑耗材信息",visible:e.dialogDeviceVisible_,width:"60vw"},on:{"update:visible":function(t){e.dialogDeviceVisible_=t}}},[a("el-form",{ref:"deviceForm",attrs:{model:e.deviceForm,"label-width":"100px",rules:e.deviceRules}},[a("el-form-item",{attrs:{label:"耗材类型："}},[a("el-cascader",{staticClass:"fill-width",attrs:{options:e.typeTree,props:e.typeTreeProps,"change-on-select":""},on:{change:function(t){e.cascaderChanged(t,"deviceForm")}},model:{value:e.deviceForm.materialType,callback:function(t){e.$set(e.deviceForm,"materialType",t)},expression:"deviceForm.materialType"}})],1),a("el-form-item",{attrs:{label:"耗材型号：",prop:"materialModel"}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请先选择类型后再选择型号",disabled:e.deviceForm.materialType.length<=0},model:{value:e.deviceForm.materialModel,callback:function(t){e.$set(e.deviceForm,"materialModel",t)},expression:"deviceForm.materialModel"}},e._l(e.dialogModelList,function(e,t){return a("el-option",{key:t+"型号",attrs:{value:e.id,label:e.materialModel}})}))],1),a("el-form-item",{attrs:{label:"耗材数量：",prop:"amount"}},[a("el-input-number",{staticClass:"fill-width",attrs:{min:0},model:{value:e.deviceForm.amount,callback:function(t){e.$set(e.deviceForm,"amount",t)},expression:"deviceForm.amount"}})],1),a("el-form-item",{attrs:{label:"备注：",prop:"description"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.deviceForm.description,callback:function(t){e.$set(e.deviceForm,"description",t)},expression:"deviceForm.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogDeviceVisible_=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm_("deviceForm")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"新增记录",visible:e.dialogRecordVisible,width:"60vw"},on:{"update:visible":function(t){e.dialogRecordVisible=t}}},[a("el-form",{ref:"recordForm",attrs:{model:e.recordForm,"label-width":"100px",rules:e.recordRules}},[a("el-form-item",{attrs:{label:"器材使用者：",prop:"consumer"}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请选择该器材使用者"},model:{value:e.recordForm.consumer,callback:function(t){e.$set(e.recordForm,"consumer",t)},expression:"recordForm.consumer"}},e._l(e.userList,function(e,t){return a("el-option",{key:t+"使用者",attrs:{value:e.id,label:e.user_name}})}))],1),a("el-form-item",{attrs:{label:"耗材数量：",prop:"amount"}},[a("el-input-number",{staticClass:"fill-width",attrs:{min:0},model:{value:e.recordForm.amount,callback:function(t){e.$set(e.recordForm,"amount",t)},expression:"recordForm.amount"}})],1),a("el-form-item",{attrs:{label:"类型：",prop:"recordType"}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请选择记录类型"},model:{value:e.recordForm.recordType,callback:function(t){e.$set(e.recordForm,"recordType",t)},expression:"recordForm.recordType"}},e._l(e.recordList,function(e,t){return a("el-option",{key:t+"类型",attrs:{value:e.id,label:e.name}})}))],1),a("el-form-item",{attrs:{label:"原因：",prop:"reason"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.recordForm.reason,callback:function(t){e.$set(e.recordForm,"reason",t)},expression:"recordForm.reason"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogRecordVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitRecordForm("recordForm")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"新增入库申请",visible:e.dialogInstockVisible,width:"60vw"},on:{"update:visible":function(t){e.dialogInstockVisible=t}}},[a("el-form",{ref:"instockForm",attrs:{model:e.instockForm,"label-width":"100px",rules:e.instockRules}},[a("el-form-item",{attrs:{label:"处理人：",prop:"consumer"}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请选择处理人"},on:{change:function(t){e.getInstockApplyList()}},model:{value:e.instockForm.consumer,callback:function(t){e.$set(e.instockForm,"consumer",t)},expression:"instockForm.consumer"}},e._l(e.userList,function(e,t){return a("el-option",{key:t+"-处理人",attrs:{value:e.id,label:e.user_name}})}))],1),a("el-form-item",{attrs:{label:"耗材数量：",prop:"amount"}},[a("el-input-number",{staticClass:"fill-width",attrs:{min:0},model:{value:e.instockForm.amount,callback:function(t){e.$set(e.instockForm,"amount",t)},expression:"instockForm.amount"}})],1),a("el-form-item",{attrs:{label:"原因：",prop:"reason"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.instockForm.reason,callback:function(t){e.$set(e.instockForm,"reason",t)},expression:"instockForm.reason"}})],1),a("el-form-item",{attrs:{label:"入库清单：",prop:"reason"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.instockApplyList.rows},on:{"expand-change":e.outTableExpandChangeEvent}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.instockDetailedList.rows}},[a("el-table-column",{attrs:{label:"商品 ID",prop:"id"}}),a("el-table-column",{attrs:{label:"商品名称",prop:"name"}}),a("el-table-column",{attrs:{label:"描述",prop:"desc"}})],1)]}}])}),a("el-table-column",{attrs:{label:"商品 ID",prop:"id"}}),a("el-table-column",{attrs:{label:"商品名称",prop:"name"}}),a("el-table-column",{attrs:{label:"描述",prop:"desc"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogInstockVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitInstockForm("instockForm")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"耗材详情",visible:e.dialogDetailVisible,width:"50vw"},on:{"update:visible":function(t){e.dialogDetailVisible=t}}},[a("el-form",{attrs:{model:e.detailData,"label-width":"120px","label-position":"left"}},[a("el-form-item",{attrs:{label:"耗材类型："}},[a("span",[e._v(e._s(e.detailData.materialTypeName))])]),a("el-form-item",{attrs:{label:"耗材型号："}},[a("span",[e._v(e._s(e.detailData.materialModelName))])]),a("el-form-item",{attrs:{label:"型号类型："}},[1===e.detailData.modelType?a("el-tag",[e._v("耗材")]):e._e(),2===e.detailData.modelType?a("el-tag",{attrs:{type:"success"}},[e._v("设备")]):e._e()],1),a("el-form-item",{attrs:{label:"教室："}},[a("span",[e._v(e._s(e.detailData.address))])]),a("el-form-item",{attrs:{label:"设备序列号："}},[a("span",[e._v(e._s(e.detailData.serialNum))])]),a("el-form-item",{attrs:{label:"数量："}},[a("span",[e._v(e._s(e.detailData.amount))])]),a("el-form-item",{attrs:{label:"创建人："}},[a("span",[e._v(e._s(e.detailData.creatorName))])]),a("el-form-item",{attrs:{label:"创建时间："}},[a("span",[e._v(e._s(e.common._convertDate(e.detailData.createTime,"yyyy/MM/dd")))])]),a("el-form-item",{attrs:{label:"备注："}},[a("span",[e._v(e._s(e.detailData.description))])])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogDetailVisible=!1}}},[e._v("确 定")])],1)],1)],1)},i=[];a("ac6a");function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a("cadf"),a("551c"),a("097d");var l={data:function(){var e;return e={tableLoading:!1,typeTree:[],typeTreeProps:{label:"materialType",value:"id",children:"childrens"},modelList:null,searchForm:{materialType:[],materialModel:null,classId:null},pageNum:1,pageSize:10,tableData:{rows:[],total:0},selection:[],getRowKeys:function(e){return e.id},tempDevice:null,dialogDeviceVisible:!1,dialogDeviceVisible_:!1,dialogModelList:null,deviceForm:{materialType:[],materialModel:null,amount:0,description:null,classId:null},deviceRules:{materialModel:[{required:!0,message:"请选择",trigger:"change"}],amount:[{required:!0,message:"请选择",trigger:"blur"}]},classList:[],dialogRecordVisible:!1,recordForm:{amount:0,consumer:null,recordType:1,reason:null},userList:[],recordList:[{name:"消耗记录",id:1},{name:"入库记录",id:2}],recordRules:{amount:[{required:!0,message:"请选择",trigger:"blur"}],consumer:[{required:!0,message:"请选择",trigger:"change"}],recordType:[{required:!0,message:"请选择",trigger:"change"}]},dialogInstockVisible:!1,instockForm:{amount:0,consumer:null,reason:null}},r(e,"userList",[]),r(e,"instockRules",{amount:[{required:!0,message:"请选择",trigger:"blur"}],consumer:[{required:!0,message:"请选择",trigger:"change"}]}),r(e,"instockApplyList",{rows:[],total:0}),r(e,"instockDetailedList",{rows:[],total:0}),r(e,"dialogDetailVisible",!1),r(e,"detailData",{}),e},created:function(){var e=this,t={method:"post",url:"".concat(this.common.basePath,"/material_type/tree"),data:{}};this.axios(t).then(function(t){e.typeTree=t.data.data}).catch(function(t){e.$message.error(t)}),console.log(this.common.checkAuthority("Warehouse-list",!0))},mounted:function(){this.common.checkAuthority("Warehouse-list",!0)&&(this.getDeviceList("init"),this.getUserList(),this.getClassList())},methods:{downloadQrcode:function(e){var t=this,a={ids:this.selection.map(function(e){return e.id}).join(","),flag:e};this.axios.get("".concat(this.common.basePath,"/storehouse/qr"),{responseType:"blob",params:a}).then(function(e){t.common._fileBold(e)}).catch(function(e){t.$message.error(e)})},cascaderChanged:function(e,t){var a=null;"searchForm"==t?(this[t].materialModel=null,a="modelList"):"deviceForm"==t&&(this[t].materialModel=null,a="dialogModelList"),this.getModelList(e[e.length-1],a)},getModelList:function(e,t){var a=this,o={method:"post",url:"".concat(this.common.basePath,"/material_model/list"),data:{materialType:e}};this.axios(o).then(function(e){a[t]=e.data.data.rows,a.$refs.deviceForm&&a.$refs.deviceForm.resetFields()}).catch(function(e){a.$message.error(e)})},clearForm:function(e){var t=this;this.$nextTick(function(){t.$refs[e].resetFields()})},getUserList:function(){var e=this,t={method:"post",url:"".concat(this.common.basePath,"/user/list"),data:{pageNum:1,pageSize:9999}};this.axios(t).then(function(t){e.userList=t.data.data.rows}).catch(function(t){e.$message.error(t)})},getClassList:function(){var e=this,t={method:"get",url:"".concat(this.common.basePath,"/class/list"),params:{pageNum:1,pageSize:9999}};this.axios(t).then(function(t){e.classList=t.data.data.rows}).catch(function(t){e.$message.error(t)})},getInstockApplyList:function(){var e=this,t={method:"post",url:"".concat(this.common.basePath,"/material_instock/select_apply"),data:{pageNum:1,pageSize:10,consumer:this.instockForm.consumer}};this.axios(t).then(function(t){e.instockApplyList=t.data.data}).catch(function(t){e.$message.error(t)})},outTableExpandChangeEvent:function(e,t){console.log(e,t),this.getInstockDetailedList(e.id)},getInstockDetailedList:function(e){var t=this,a={method:"post",url:"".concat(this.common.basePath,"/material_info/select"),data:{instockId:e}};this.axios(a).then(function(e){t.instockDetailedList=e.data.data}).catch(function(e){t.$message.error(e)})},getDeviceList:function(e){var t=this;this.tableLoading=!0;var a=this.searchForm;"init"==e&&(this.pageNum=1,this.pageSize=10),a.pageNum=this.pageNum,a.pageSize=this.pageSize;var o={method:"post",url:"".concat(this.common.basePath,"/storehouse/list"),data:JSON.parse(JSON.stringify(a))};this.searchForm.materialType&&this.searchForm.materialType.length>0?o.data.materialType=this.searchForm.materialType[this.searchForm.materialType.length-1]:delete o.data.materialType,this.axios(o).then(function(e){t.tableData=e.data.data,t.$nextTick(function(e){t.tableLoading=!1})}).catch(function(e){t.tableLoading=!1,t.$message.error(e)})},pageSizeChange:function(e){this.pageSize=e,this.getDeviceList()},pageCurrentChange:function(e){this.pageNum=e,this.getDeviceList()},addDevice:function(){this.$message("暂无此功能！")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("请检查表单填写是否正确！"),!1;var a={method:"post",url:"".concat(t.common.basePath,"/storehouse/add"),data:{materialModel:t.deviceForm.materialModel,amount:t.deviceForm.amount,description:t.deviceForm.description}};t.axios(a).then(function(e){t.getDeviceList(),t.$message.success(e.data.meta.message),t.dialogDeviceVisible=!1}).catch(function(e){t.$message.error(e)})})},editDevice:function(e){this.$message("暂无此功能！")},submitForm_:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("请检查表单填写是否正确！"),!1;var a={method:"post",url:"".concat(t.common.basePath,"/material/update"),data:{id:t.deviceForm.id,materialModel:t.deviceForm.materialModel,amount:t.deviceForm.amount,description:t.deviceForm.description}};t.axios(a).then(function(e){t.getDeviceList(),t.$message.success(e.data.meta.message),t.dialogDeviceVisible_=!1}).catch(function(e){t.$message.error(e)})})},addRecord:function(e){var t=this;this.dialogRecordVisible=!0,this.recordForm={amount:0,consumer:null,recordType:null,reason:null},this.recordForm.materialId=e.id,this.$nextTick(function(e){t.$refs.recordForm.clearValidate()})},submitRecordForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("请检查表单填写是否正确！"),!1;var a={method:"post",url:1===t.recordForm.recordType?"".concat(t.common.basePath,"/material_record/consume/add"):"".concat(t.common.basePath,"/material_record/storage/add"),data:{materialId:t.recordForm.materialId,amount:1===t.recordForm.recordType?~t.recordForm.amount:t.recordForm.amount,consumer:t.recordForm.consumer,reason:t.recordForm.reason}};t.axios(a).then(function(e){t.getDeviceList(),t.$message.success(e.data.meta.message),t.dialogRecordVisible=!1}).catch(function(e){t.$message.error(e)})})},addInstock:function(e){var t=this;this.dialogInstockVisible=!0,this.instockForm={amount:0,consumer:null,reason:null},this.$nextTick(function(e){t.$refs.instockForm.clearValidate()})},submitInstockForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("请检查表单填写是否正确！"),!1;var a={method:"post",url:"".concat(t.common.basePath,"/material_instock/create_apply"),data:{consumer:t.instockForm.consumer,reason:t.instockForm.reason}};t.axios(a).then(function(e){t.getDeviceList(),t.$message.success(e.data.meta.message),t.dialogInstockVisible=!1}).catch(function(e){t.$message.error(e)})})},showDetailDialog:function(e){this.detailData=JSON.parse(JSON.stringify(e)),this.dialogDetailVisible=!0},deleteMaterial:function(e,t){this.$message("暂无此功能！")},handleSelectionChange:function(e){this.selection=e},isDisabaledDelBtn:function(){return!1!==!this.common.checkAuthority("Warehouse-delete",!0)||0==this.selection.length}}},s=l,n=(a("c9b5"),a("2877")),c=Object(n["a"])(s,o,i,!1,null,null,null);c.options.__file="Warehouse.vue";t["default"]=c.exports},c9b5:function(e,t,a){"use strict";var o=a("aaf9"),i=a.n(o);i.a}}]);
//# sourceMappingURL=chunk-6c4b.8142749c.js.map