(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b6f3"],{"0788":function(e,t,a){},"0a50":function(e,t,a){},"0ecc":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap-box"},[a("el-card",{staticClass:"title-card"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/lesson/system/"}}},[e._v("课程资源")]),e.paramsCId?a("el-breadcrumb-item",{attrs:{to:{path:"/lesson/system/coursedetail/"+e.paramsCId}}},[e._v("课程详情")]):e._e(),a("el-breadcrumb-item",[e._v("实验详情")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"router-view-wrap transparent-bg"},[a("div",{staticClass:"router-view-content"},[e.common.checkAuthority("Lesson-Data-ExperimentDetail-Query",!0)?a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"card-title"},[e._v("基本信息")]),e.courseDetailData?a("el-switch",{staticClass:"fr",attrs:{title:1===e.courseDetailData.cur_status?"禁用":"启用",disabled:e.isDisabaledDelBtn(),"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){1===e.courseDetailData.cur_status?e.disabledCourse(e.courseDetailData.id):e.noDisabledCourse(e.courseDetailData.id)}},model:{value:1===e.courseDetailData.cur_status,callback:function(t){e.$set(e.courseDetailData,"cur_status===1",t)},expression:"courseDetailData.cur_status===1"}}):e._e()],1),e.courseDetailData?a("el-form",{staticClass:"show-detail-form",attrs:{"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称："}},[e._v(e._s(e.courseDetailData.name))])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属课程："}},[a("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(t){e.$router.push({name:"LessonSystemCourseDetail",params:{course_id:e.courseDetailData.course_id}})}}},[e._v(e._s(e.courseDetailData.courseName))])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"满分："}},[e._v(e._s(e.courseDetailData.score))])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"占分得比："}},[e._v(e._s((e.courseDetailData.value?e.courseDetailData.value:"0")+"%"))])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"类型："}},[1===e.courseDetailData.etype?a("el-tag",{attrs:{type:"success"}},[e._v("个人实验")]):e._e(),2===e.courseDetailData.etype?a("el-tag",{attrs:{type:"primary"}},[e._v("小组实验")]):e._e()],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"简介："}},[a("p",{staticClass:"cursor-pointer_T"},[e._v(e._s(e.courseDetailData.description))])])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"实验资料："}},[a("div",[a("upload",{attrs:{isDisabled:!e.common.checkAuthority("Lesson-Data-ExperimentDetail-UploadExperimentData",!0),buttonText:"点击上传"},on:{uploadSuccess:function(t){e.uploadSuccess("epData",t)}}})],1),e.courseDetailData.baseExperimentsData&&e.courseDetailData.baseExperimentsData.length>0?a("div",[a("file-show",{attrs:{fileList:e.courseDetailData.baseExperimentsData,closable:e.common.checkAuthority("Lesson-Data-ExperimentDetail-UploadExperimentData",!0)},on:{handleClose:e.handleTagClose}})],1):e._e()])],1),a("el-col",{attrs:{span:24}},[a("p",{staticClass:"text-right"},[a("el-button",{attrs:{disabled:!e.common.checkAuthority("Lesson-Data-ExperimentDetail-Edit",!0),type:"primary"},on:{click:function(t){e.editCourseDialog=!0,e.echo()}}},[e._v("\n                      编辑\n                  ")]),a("el-button",{attrs:{disabled:!e.common.checkAuthority("Lesson-Data-ExperimentDetail-Delete",!0),type:"danger"},on:{click:function(t){e.deleteCourse(e.courseDetailData.id)}}},[e._v("\n                      删除\n                  ")])],1)])],1)],1):e._e()],1),a("el-card",{staticClass:"mart20"},[a("div",{staticClass:"overflow-hidden",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"card-title fl"},[e._v("任务列表")]),a("el-button",{staticClass:"fr",attrs:{size:"small",disabled:!e.common.checkAuthority("Lesson-Data-ExperimentDetail-AddQuestionTask",!0),type:"primary"},on:{click:function(t){e.questionTaskDialog=!0,e.resetForm("questionTaskForm")}}},[e._v("\n                添加问卷任务\n            ")]),a("el-button",{staticClass:"fr marr10",attrs:{size:"small",disabled:!e.common.checkAuthority("Lesson-Data-ExperimentDetail-AddAnswerTask",!0),type:"primary"},on:{click:function(t){e.answerTaskDialog=!0,e.resetForm("answerTaskForm")}}},[e._v("\n                添加答题任务\n            ")]),a("el-button",{staticClass:"fr",attrs:{size:"small",disabled:!e.common.checkAuthority("Lesson-Data-ExperimentDetail-AddReportTask",!0),type:"primary"},on:{click:function(t){e.reportTaskDialog=!0,e.resetForm("reportTaskForm")}}},[e._v("\n                添加报告任务\n            ")])],1),e.experimentList.total>0?a("el-row",{attrs:{gutter:20}},e._l(e.experimentList.rows,function(t,s){return a("el-col",{attrs:{span:12}},[a("el-card",{key:s,staticClass:"marb10",attrs:{shadow:""}},[a("div",{staticClass:"overflow-hidden",attrs:{slot:"header"},slot:"header"},[a("el-checkbox-group",{attrs:{size:"small"},model:{value:e.ids,callback:function(t){e.ids=t},expression:"ids"}},[a("div",{staticClass:"card-title fl mart5"},[a("span",{staticClass:"card-title cursor-pointer",staticStyle:{"margin-left":"0px"},on:{click:function(a){e.goToDetail(t)}}},[e._v(e._s(t.name))])])]),1===t.type?a("el-tag",{staticClass:"cursor-pointer fr",attrs:{type:"success"},on:{click:function(a){e.goToDetail(t)}}},[e._v("答题任务")]):e._e(),2===t.type?a("el-tag",{staticClass:"cursor-pointer fr",attrs:{type:"primary"},on:{click:function(a){e.goToDetail(t)}}},[e._v("报告任务")]):e._e(),4===t.type?a("el-tag",{staticClass:"cursor-pointer fr",attrs:{type:"warning"},on:{click:function(a){e.goToDetail(t)}}},[e._v("问卷任务")]):e._e()],1),a("div",{staticStyle:{"min-height":"230px"},on:{click:function(a){e.goToDetail(t)}}},[a("el-form",{staticClass:"show-detail-form cursor-pointer",attrs:{"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[1===t.type||2===t.type?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"得分占比："}},[e._v(e._s((t.value?t.value:"0")+"%"))])],1):e._e(),1===t.type||2===t.type?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"满分："}},[e._v(e._s(t.score))])],1):e._e(),2==t.type?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"类型："}},[1===t.genre?a("el-tag",{attrs:{type:"success"}},[e._v("小组报告")]):e._e(),2===t.genre?a("el-tag",{attrs:{type:"primary"}},[e._v("个人报告")]):e._e()],1)],1):e._e(),1==t.type?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"通过分数："}},[e._v(e._s(t.adopt_score))])],1):e._e(),4==t.type?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"类型："}},[1===t.paperGenre?a("el-tag",{attrs:{type:"success"}},[e._v("评价教学")]):e._e(),2===t.paperGenre?a("el-tag",{attrs:{type:"primary"}},[e._v("互评")]):e._e(),3===t.paperGenre?a("el-tag",{attrs:{type:"warning"}},[e._v("自评")]):e._e()],1)],1):e._e(),1==t.type||2==t.type?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"要求："}},[a("div",{staticClass:"desc_info_box"},[e._v(e._s(t.description?t.description:"暂无数据"))])])],1):e._e(),4==t.type?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"要求："}},[a("div",{staticClass:"desc_info_box"},[e._v(e._s(t.paperDescription?t.paperDescription:"暂无数据"))])])],1):e._e()],1)],1)],1)])],1)})):e._e(),e.experimentList.total>0?a("el-pagination",{staticClass:"text-right",attrs:{background:"",layout:"total, sizes, prev, pager, next","current-page":e.pageNum,"page-size":e.pageSize,"page-sizes":[4,8,12],total:e.experimentList.total},on:{"size-change":function(t){e.pageSizeChange("getQueryExperimentList",t)},"current-change":function(t){e.pageCurrentChange("getQueryExperimentList",t)}}}):e._e(),0==e.experimentList.total?a("div",{staticClass:"no-data"},[e._v("暂无数据")]):e._e()],1),a("el-card",{staticClass:"mart20"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"card-title"},[e._v("教学分析")])]),a("div",[a("div",[e._v("实验开设 "+e._s(e.teachingAnalysis.quote)+" 次，共计学生 "+e._s(e.teachingAnalysis.members)+" 人。")]),a("teaching-analysis",{attrs:{className:"course",data:e.teachingAnalysis.data}})],1)])],1):a("div",{staticClass:"text-center text-info"},[e._v(" 你无权查看此内容 ")])])]),a("el-dialog",{attrs:{width:"550px",title:"编辑基本信息",visible:e.editCourseDialog},on:{"update:visible":function(t){e.editCourseDialog=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"courseForm",attrs:{model:e.courseForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称：",prop:"name",rules:[{required:!0,message:"请输入实验名称",trigger:"blur"},{validator:function(t,a,s){e.common.wordNumberValid(t,a,s,"single")},trigger:"blur"}]}},[a("el-input",{staticClass:"w220",model:{value:e.courseForm.name,callback:function(t){e.$set(e.courseForm,"name",t)},expression:"courseForm.name"}})],1),a("el-form-item",{attrs:{label:"满分：",prop:"score",rules:[{required:!0,message:"请输入满分",trigger:"blur"}]}},[a("el-input-number",{attrs:{type:"number",min:0,max:100,step:10},model:{value:e.courseForm.score,callback:function(t){e.$set(e.courseForm,"score",t)},expression:"courseForm.score"}})],1),a("el-form-item",{attrs:{label:"得分占比：",prop:"value",rules:[{required:!0,message:"请输入实验得分占比",trigger:"blur"}]}},[a("el-slider",{staticClass:"w220",attrs:{"format-tooltip":e.formatTooltip},model:{value:e.courseForm.value,callback:function(t){e.$set(e.courseForm,"value",t)},expression:"courseForm.value"}})],1),a("el-form-item",{attrs:{label:"类型：",prop:"etype",rules:[{required:!0,message:"请选择实验类型",trigger:"blur"}]}},[a("el-radio-group",{model:{value:e.courseForm.etype,callback:function(t){e.$set(e.courseForm,"etype",t)},expression:"courseForm.etype"}},[a("el-radio",{attrs:{label:1}},[e._v("个人实验")]),a("el-radio",{attrs:{label:2}},[e._v("小组实验")])],1)],1),a("el-form-item",{attrs:{label:"简介：",prop:"description",rules:[{required:!0,message:"请输入实验简介",trigger:"blur"},{validator:function(t,a,s){e.common.wordNumberValid(t,a,s,"textarea")},trigger:"blur"}]}},[a("el-input",{attrs:{type:"textarea",rows:6},model:{value:e.courseForm.description,callback:function(t){e.$set(e.courseForm,"description",t)},expression:"courseForm.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editCourseDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitCourse("courseForm")}}},[e._v("保存")])],1)],1),a("el-dialog",{attrs:{width:"550px",title:"添加报告任务",visible:e.reportTaskDialog},on:{"update:visible":function(t){e.reportTaskDialog=t}}},[a("el-form",{ref:"reportTaskForm",attrs:{model:e.reportTaskForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称：",prop:"name",rules:[{required:!0,message:"请输入名称",trigger:"blur"},{validator:function(t,a,s){e.common.wordNumberValid(t,a,s,"single")},trigger:"blur"}]}},[a("el-input",{staticClass:"w220",model:{value:e.reportTaskForm.name,callback:function(t){e.$set(e.reportTaskForm,"name",t)},expression:"reportTaskForm.name"}})],1),a("el-form-item",{attrs:{label:"得分占比：",prop:"value",rules:[{required:!0,message:"请输入得分占比",trigger:"blur"}]}},[a("el-slider",{staticClass:"w220",attrs:{"format-tooltip":e.formatTooltip},model:{value:e.reportTaskForm.value,callback:function(t){e.$set(e.reportTaskForm,"value",t)},expression:"reportTaskForm.value"}})],1),a("el-form-item",{attrs:{label:"满分：",prop:"score",rules:[{required:!0,message:"请输入满分",trigger:"blur"}]}},[a("el-input-number",{attrs:{type:"number",min:0,max:100,step:10},model:{value:e.reportTaskForm.score,callback:function(t){e.$set(e.reportTaskForm,"score",t)},expression:"reportTaskForm.score"}})],1),a("el-form-item",{attrs:{label:"类型：",prop:"genre",rules:[{required:!0,message:"请选择类型",trigger:"blur"}]}},[a("el-radio-group",{model:{value:e.reportTaskForm.genre,callback:function(t){e.$set(e.reportTaskForm,"genre",t)},expression:"reportTaskForm.genre"}},[a("el-radio",{attrs:{label:1}},[e._v("小组报告")]),a("el-radio",{attrs:{label:2}},[e._v("个人报告")])],1)],1),a("el-form-item",{attrs:{label:"模板：",prop:"task_files",rules:[{required:!1,message:"请选择报告模板",trigger:"blur"}]}},[a("upload",{attrs:{buttonText:e.reportTaskForm.task_files&&""!==e.reportTaskForm.task_files?"重新上传":"点击上传"},on:{uploadSuccess:e.uploadReportSuccess}}),e.reportTaskForm.task_files?a("div",[a("file-show",{attrs:{fileList:[JSON.parse(e.reportTaskForm.task_files)],closable:!0},on:{handleClose:e.handleClose}})],1):e._e()],1),a("el-form-item",{attrs:{label:"要求：",prop:"description",rules:[{required:!0,message:"请输入要求",trigger:"blur"},{validator:function(t,a,s){e.common.wordNumberValid(t,a,s,"textarea")},trigger:"blur"}]}},[a("el-input",{attrs:{type:"textarea",rows:6},model:{value:e.reportTaskForm.description,callback:function(t){e.$set(e.reportTaskForm,"description",t)},expression:"reportTaskForm.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.reportTaskDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitReport("reportTaskForm")}}},[e._v("保存")])],1)],1),a("el-dialog",{attrs:{width:"900px",title:"添加答题任务",visible:e.answerTaskDialog},on:{"update:visible":function(t){e.answerTaskDialog=t}}},[a("el-form",{ref:"answerTaskForm",attrs:{model:e.answerTaskForm,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"名称：",prop:"name",rules:[{required:!0,message:"请输入名称",trigger:"blur"},{validator:function(t,a,s){e.common.wordNumberValid(t,a,s,"single")},trigger:"blur"}]}},[a("el-input",{staticClass:"w220",model:{value:e.answerTaskForm.name,callback:function(t){e.$set(e.answerTaskForm,"name",t)},expression:"answerTaskForm.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"得分占比：",prop:"value",rules:[{required:!0,message:"请输入得分占比",trigger:"blur"}]}},[a("el-slider",{attrs:{"format-tooltip":e.formatTooltip},model:{value:e.answerTaskForm.value,callback:function(t){e.$set(e.answerTaskForm,"value",t)},expression:"answerTaskForm.value"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"通过分数：",prop:"adopt_score",rules:[{required:!0,message:"请输入通过分数",trigger:"blur"}]}},[a("el-input-number",{attrs:{type:"number",min:0,max:100,step:10},model:{value:e.answerTaskForm.adopt_score,callback:function(t){e.$set(e.answerTaskForm,"adopt_score",t)},expression:"answerTaskForm.adopt_score"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"试题内容："}},[a("el-card",[a("test-paper",{attrs:{paperItem:e.answerTaskForm.paperItem,isEdit:!0}})],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.answerTaskDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitAnswer("answerTaskForm")}}},[e._v("保存")])],1)],1),a("el-dialog",{attrs:{width:"900px",title:"添加问卷任务",visible:e.questionTaskDialog},on:{"update:visible":function(t){e.questionTaskDialog=t}}},[a("el-form",{ref:"questionTaskForm",attrs:{model:e.questionTaskForm,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"名称：",prop:"name",rules:[{required:!0,message:"请输入名称",trigger:"blur"},{validator:function(t,a,s){e.common.wordNumberValid(t,a,s,"single")},trigger:"blur"}]}},[a("el-input",{staticClass:"w220",model:{value:e.questionTaskForm.name,callback:function(t){e.$set(e.questionTaskForm,"name",t)},expression:"questionTaskForm.name"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"问卷内容："}},[a("el-card",[a("questionnaire-paper",{attrs:{questionnaire:e.questionTaskForm.questionnaire,isEdit:"true"}})],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.questionTaskDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitQuestion("questionTaskForm")}}},[e._v("保存")])],1)],1)],1)},i=[],o=(a("7f7f"),a("ac6a"),a("d443")),n=a("4a9b"),r=a("16ef"),l=a("e1bb"),c=a("3dfd"),u={data:function(){return{dialogLoading:!1,isExistTeacher:!1,loading:!1,paramsCId:this.$route.params.course_id,paramsEId:this.$route.params.experiment_id,pageNum:1,pageSize:4,courseDetailData:null,experimentList:{rows:[],total:0},ids:[],editCourseDialog:!1,courseForm:{name:null,description:null,etype:null,value:0,score:100},reportTaskDialog:!1,reportTaskForm:{type:2,experiment_id:this.$route.params.experiment_id,name:null,value:0,score:null,description:null,genre:null,task_files:null},answerTaskDialog:!1,answerTaskForm:{type:1,experiment_id:this.$route.params.experiment_id,name:null,value:0,adopt_score:null,paperItem:{name:null,exam_time:null,questions:[]}},questionTaskDialog:!1,questionTaskForm:{type:4,experiment_id:this.$route.params.experiment_id,name:null,questionnaire:{name:null,type:1,description:null,qItems:[]}},paperCreatorAccount:null,teachingAnalysis:{members:0,quote:0,data:[{value:0,name:"100分-90分"},{value:0,name:"90分-80分"},{value:0,name:"80分-70分"},{value:0,name:"70分-60分"},{value:0,name:"60分以下"}]}}},components:{upload:o["a"],FileShow:n["a"],TeachingAnalysis:r["a"],TestPaper:l["a"],QuestionnairePaper:c["a"]},mounted:function(){this.getQueryCourseDetail(),this.getQueryExperimentList(),this.getQueryAnalysis(),this.loginAccountIsRole()},methods:{loginAccountIsRole:function(){var e=this;this.isExistTeacher=!1,this.axios.get("".concat(this.common.basePath,"/participant/type"),{params:{experiment_id:this.paramsEId}}).then(function(t){t.data.data&&t.data.data.forEach(function(t){"2"==t&&(e.isExistTeacher=!0)})}).catch(function(t){e.$message.error(t)})},isDisabaledDelBtn:function(){return!1!==!this.common.checkAuthority("Lesson-Data-ExperimentDetail-Disabled",!0)||1!=this.courseDetailData.cur_status&&2!=this.courseDetailData.cur_status},formatTooltip:function(e){return e+"%"},goToDetail:function(e){this.common.checkAuthority("Lesson-Data-ExperimentDetail-QueryTaskDetail",!0)?1===e.type?this.$router.push({name:"LessonSystemAnswerDetail",params:{task_id:e.id}}):2===e.type?this.$router.push({name:"LessonSystemReportDetail",params:{task_id:e.id}}):4===e.type&&this.$router.push({name:"LessonSystemQuestionDetail",params:{task_id:e.id}}):this.$message("无权限,不能查看详情")},pageSizeChange:function(e,t){this.pageSize=t,"getQueryExperimentList"==e&&this.getQueryExperimentList()},pageCurrentChange:function(e,t){this.pageNum=t,"getQueryExperimentList"==e&&this.getQueryExperimentList()},resetForm:function(e){this.$refs[e]&&this.$refs[e].resetFields()},uploadSuccess:function(e,t){var a=this,s="epData"==e?3:"",i={name:t.name,path:t.path,associated_object:this.$route.params.experiment_id,ao_type:s,is_template:0};this.axios.post("".concat(this.common.basePath,"/c_literature"),i).then(function(e){a.getQueryCourseDetail()}).catch(function(e){a.$message.error(e)})},handleTagClose:function(e){var t=this;this.$confirm("是否确认删除该附件？","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.delete("".concat(t.common.basePath,"/c_literature/").concat(e.id),"").then(function(e){t.getQueryCourseDetail(),t.$message.success(e.data.meta.message)}).catch(function(e){t.$message.error(e)})}).catch(function(){})},uploadReportSuccess:function(e){this.reportTaskForm.task_files=JSON.stringify(e)},handleClose:function(e){var t=this;this.$confirm("是否确认删除该附件？","删除",{comfirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){t.reportTaskForm.task_files=null}).catch(function(e){})},getQueryCourseDetail:function(){var e=this;this.loading=!0,this.axios.get("".concat(this.common.basePath,"/baseExperiment/").concat(this.paramsEId),"").then(function(t){e.courseDetailData=t.data.data,e.loading=!1}).catch(function(t){e.$message.error(t),e.loading=!1})},echo:function(){var e=this;this.dialogLoading=!0,this.axios.get("".concat(this.common.basePath,"/baseExperiment/").concat(this.paramsEId),"").then(function(t){e.courseForm=t.data.data,e.dialogLoading=!1}).catch(function(t){e.$message.error(t),e.dialogLoading=!1})},getQueryExperimentList:function(){var e=this;this.loading=!0,this.axios.get("".concat(this.common.basePath,"/baseTask/findList"),{params:{pageNum:this.pageNum,pageSize:this.pageSize,experiment_id:this.paramsEId}}).then(function(t){e.experimentList=t.data.data,e.loading=!1}).catch(function(t){e.$message.error(t),e.loading=!1})},getQueryAnalysis:function(){var e=this;this.loading=!0,this.axios.get("".concat(this.common.basePath,"/baseExperiment/analysis"),{params:{experimentID:this.paramsEId}}).then(function(t){e.teachingAnalysis=t.data.data,e.loading=!1}).catch(function(t){e.$message.error(t),e.loading=!1})},submitCourse:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.axios.patch("".concat(t.common.basePath,"/baseExperiment/").concat(t.paramsEId),t.courseForm).then(function(e){t.getQueryCourseDetail(),t.editCourseDialog=!1,t.$message.success(e.data.meta.message)}).catch(function(e){t.$message.error(e),t.editCourseDialog=!1})})},disabledCourse:function(e){var t=this;this.$confirm("  你在进行实验模板的操作！如果禁用以后将不能使用此模板创建实验！","禁用",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.disabledCourse_(e)}).catch(function(){t.getQueryCourseDetail()})},disabledCourse_:function(e){var t=this;this.axios.patch("".concat(this.common.basePath,"/baseExperiment/").concat(e),{cur_status:2}).then(function(e){t.$message.success(e.data.meta.message),t.getQueryCourseDetail()}).catch(function(e){t.getQueryCourseDetail(),t.$message.error(e)})},noDisabledCourse:function(e){var t=this;this.$confirm("  你在进行实验模板的操作！是否解禁该实验！","解禁",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.noDisabledCourse_(e)}).catch(function(){t.getQueryCourseDetail()})},noDisabledCourse_:function(e){var t=this;this.axios.patch("".concat(this.common.basePath,"/baseExperiment/").concat(e),{cur_status:1}).then(function(e){t.$message.success(e.data.meta.message),t.getQueryCourseDetail()}).catch(function(e){t.getQueryCourseDetail(),t.$message.error(e)})},deleteCourse:function(e){var t=this;this.$confirm("  您正在对课程的实验资料进行删除操作，如果实验资料删除成功将会导致该实验的任务、大纲等资料永久消失！ 请谨慎操作！","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteCourse_(e)}).catch(function(){})},deleteCourse_:function(e){var t=this;this.axios.patch("".concat(this.common.basePath,"/baseExperiment/delete/").concat(e)).then(function(e){t.$message.success(e.data.meta.message),t.$router.push({name:"LessonSystemCourseDetail"})}).catch(function(e){t.$message.error(e)})},submitReport:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.axios.post("".concat(t.common.basePath,"/baseTask"),t.reportTaskForm).then(function(e){t.getQueryExperimentList(),t.reportTaskDialog=!1,t.$message.success(e.data.meta.message)}).catch(function(e){t.$message.error(e),t.reportTaskDialog=!1})})},submitAnswer:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.axios.post("".concat(t.common.basePath,"/baseTask/save"),t.answerTaskForm).then(function(e){t.getQueryExperimentList(),t.answerTaskDialog=!1,t.$message.success(e.data.meta.message)}).catch(function(e){t.$message.error(e),t.answerTaskDialog=!1})})},submitQuestion:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.axios.post("".concat(t.common.basePath,"/baseTask/save/questionnaire"),t.questionTaskForm).then(function(e){t.getQueryExperimentList(),t.questionTaskDialog=!1,t.$message.success(e.data.meta.message)}).catch(function(e){t.$message.error(e),t.questionTaskDialog=!1})})}}},p=u,m=(a("83cd"),a("2877")),d=Object(m["a"])(p,s,i,!1,null,null,null);d.options.__file="LessonSystemExperimentDetail.vue";t["default"]=d.exports},"16ef":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},i=[],o=(a("7f7f"),a("ac6a"),a("313e")),n=a.n(o);a("817d");var r={props:{className:{type:String,default:"chart"},width:{type:String,default:"50%"},height:{type:String,default:"320px"},data:{type:Array,default:null}},watch:{data:function(e,t){this.newData=e,this.initChart()},screenWidth:function(e,t){this.screenWidth=e,console.log("pie",e,t),this.initChart()}},data:function(){return{chart:null,screenWidth:document.body.clientWidth,newData:[]}},mounted:function(){this.initChart(),window.addEventListener("resize",this.__resizeHanlder)},created:function(){var e=this;window.onresize=function(){return function(){window.screenWidth=document.body.clientWidth,e.screenWidth=window.screenWidth}()}},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHanlder),this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=n.a.init(this.$el,"macarons"),this.chart.resize(this.$el,{width:this.screenWidth/2-60+"px"});var e=[],t=this.newData;t.forEach(function(t){e.push(t.name)}),this.chart.setOption({title:{subtext:"",x:"left",y:"top"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",type:"scroll",left:"right",bottom:"100",data:e},calculable:!0,series:[{name:"占比",type:"pie",radius:"55%",center:["50%","50%"],data:t,animationEasing:"cubicInOut",animationDuration:2600,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})}}},l=r,c=a("2877"),u=Object(c["a"])(l,s,i,!1,null,null,null);u.options.__file="TeachingAnalysis.vue";t["a"]=u.exports},"1cad":function(e,t,a){e.exports=a.p+"263e75070edcfb14d01b443246914c45.jpg"},"3adb":function(e,t){e.exports="data:image/png;base64,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"},"3dfd":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"mard10"},[a("el-col",{staticClass:"mard10",attrs:{span:12}},[a("el-form-item",{attrs:{label:"问卷名称：",prop:"questionnaire.name",rules:[{required:!0,message:"请输入任务名称",trigger:"blur"},{validator:function(t,a,s){e.common.wordNumberValid(t,a,s,"single")},trigger:"blur"}]}},[e.isEdit?a("el-input",{model:{value:e.questionnaire.name,callback:function(t){e.$set(e.questionnaire,"name",t)},expression:"questionnaire.name"}}):a("span",[e._v(e._s(e.questionnaire.name))])],1)],1),0==e.type?a("el-col",{staticClass:"mard10",attrs:{span:12}},[a("el-form-item",{attrs:{label:"问卷类型：",prop:"type"}},[e.isEdit?a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.questionnaire.type,callback:function(t){e.$set(e.questionnaire,"type",t)},expression:"questionnaire.type"}},e._l(e.optionsType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})):a("span",[e._v(e._s(e.questionaireType(e.questionnaire.type)))])],1)],1):e._e(),a("el-col",{staticClass:"mart10",attrs:{span:24}},[a("el-form-item",{attrs:{label:"问卷要求：",prop:"questionnaire.description",rules:[{required:!0,message:"请输入任务名称",trigger:"blur"},{validator:function(t,a,s){e.common.wordNumberValid(t,a,s,"textarea")},trigger:"blur"}]}},[e.isEdit?a("el-input",{attrs:{type:"textarea",rows:6},model:{value:e.questionnaire.description,callback:function(t){e.$set(e.questionnaire,"description",t)},expression:"questionnaire.description"}}):a("span",[e._v(e._s(e.questionnaire.description))])],1)],1)],1),a("el-card",{attrs:{shadow:"never"}},[e._l(e.questionnaire.qItems,function(t,s){return a("div",{key:s,staticClass:"questions-box mart5"},[a("div",[e._v(e._s(s+1)+"、")]),a("el-card",{staticClass:"questions-content",attrs:{shadow:"never"}},[a("el-row",{staticClass:"mard10"},[a("el-col",{staticClass:"div-flex",attrs:{span:17}},[a("div",{staticClass:"label-2 label marr5"},[e._v("题干: ")]),e.isEdit?a("el-input",{model:{value:t.question,callback:function(a){e.$set(t,"question",a)},expression:"item.question"}}):a("div",[4!=t.type?a("span",[e._v(e._s(t.question))]):a("span",[e._v(e._s(t.question)+"（"+e._s(t.score)+"分）")])])],1),a("el-col",{staticClass:"text-right question-type",attrs:{offset:1,span:5}},[e._v("\n            "+e._s(e.numMatchingText(t.type))+"\n          ")]),a("el-col",{staticClass:"text-right ",attrs:{span:1}},[e.isEdit?a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-close",circle:""},on:{click:function(t){e.del("question",s)}}}):e._e()],1)],1),a("el-row",{staticClass:"mard10"},[a("el-col",{attrs:{span:22}},[1==t.type||2==t.type?a("div",{staticStyle:{"margin-left":"60px"}},[e._l(t.options,function(t,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isDelete,expression:"!itemOption.isDelete"}],key:i,staticClass:"div-flex mart10 flex-align-items"},[a("div",{staticClass:"label-2 label marr5"},[e._v("选项"+e._s(i+1)+": ")]),a("div",[e.isEdit?a("el-input",{model:{value:t.answer,callback:function(a){e.$set(t,"answer",a)},expression:"itemOption.answer"}}):a("div",[e._v(e._s(t.answer))])],1),a("div",[e.isEdit?a("el-input",{staticClass:"input-with-pa",attrs:{placeholder:""},model:{value:t.score,callback:function(a){e.$set(t,"score",a)},expression:"itemOption.score"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("分数")]),a("span",{attrs:{slot:"append"},slot:"append"},[e._v("分")])]):a("div",[e._v("（"+e._s(t.score)+"分）")])],1),e.isEdit?a("el-button",{staticClass:"marl5",attrs:{type:"danger",size:"mini",icon:"el-icon-close",circle:""},on:{click:function(t){e.del("option",s,i)}}}):e._e()],1)}),2==t.type&&e.isEdit?a("div",{staticClass:"div-flex flex-align-items mart10"},[e._v("\n                最多能选择"),a("el-input-number",{staticClass:"marl5 marr5",attrs:{min:1,max:t.options.length},model:{value:t.max_option,callback:function(a){e.$set(t,"max_option",a)},expression:"item.max_option"}}),e._v("项\n              ")],1):e._e(),a("el-button",{directives:[{name:"show",rawName:"v-show",value:(1==t.type||2==t.type)&&e.isEdit,expression:" (item.type == 1 || item.type == 2) && isEdit"}],staticClass:"mart10",staticStyle:{"margin-left":"65px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addOption(s)}}},[e._v("添加选项")])],2):e._e(),4==t.type&&e.isEdit?a("div",{staticClass:"mart10",staticStyle:{"margin-left":"13px"}},[a("el-input",{staticClass:"input-with-pa",attrs:{placeholder:""},model:{value:t.score,callback:function(a){e.$set(t,"score",a)},expression:"item.score"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("分数")]),a("span",{attrs:{slot:"append"},slot:"append"},[e._v("分")])])],1):e._e(),a("div",{staticClass:"text-right"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.questionnaire.id&&e.isEdit,expression:" questionnaire.id && isEdit"}],staticClass:"mart10",attrs:{type:"primary",size:"small"},on:{click:function(a){e.saveAppointQuestion(t)}}},[e._v("保存")])],1)])],1)],1)],1)}),e.isEdit?a("div",{staticClass:"text-right mart10"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addQution("radioQuestion")}}},[e._v("添加单选题")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addQution("chekboxQuestion")}}},[e._v("添加多选题")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addQution("shortAnswerQuestion")}}},[e._v("添加评语")])],1):e._e()],2)],1)},i=[],o=(a("ac6a"),{props:{questionnaire:{default:null},isEdit:!1,type:{default:0}},data:function(){return{checkbox:!1,optionsType:[{value:1,label:"评价教学"},{value:2,label:"互评"},{value:3,label:"自评"}],questionTemplate:{radioQuestion:{question:"我是第二道试题 ",type:1,options:[{answer:"我是第二试题的第一选项",score:1,isDelete:!1},{answer:"我是第2试题的第二选项",score:2,isDelete:!1},{answer:"我是第2试题的第二选项",score:3,isDelete:!1}]},chekboxQuestion:{question:"我是第二道试题 ",type:2,max_option:1,options:[{answer:"我是第二试题的第一选项",score:1,isDelete:!1},{answer:"我是第二试题的第二选项",score:2,isDelete:!1}]},shortAnswerQuestion:{question:"我是第二道试题",type:4,score:30,analyze:"这是我的习题解析"}},questionTypeText:null}},components:{},computed:{},mounted:function(){},methods:{questionaireType:function(e){switch(e){case 1:return"评价教学";case 2:return"自评";case 3:return"互评"}},numMatchingText:function(e){switch(e){case 1:return this.questionTypeText="单选题";case 2:return this.questionTypeText="多选题";case 3:return this.questionTypeText="判断题";case 4:return this.questionTypeText="评语"}},addQution:function(e){this.questionnaire.qItems.push(JSON.parse(JSON.stringify(this.questionTemplate[e])))},del:function(e,t,a){"question"==e?this._delQution(t):this._delOption(t,a)},_delQution:function(e){if(this.questionnaire.qItems.length<=1)return this.$message.warning("不能删除，必须存在一个题！！！"),!1;this.questionnaire.qItems[e].id?this._pseudoDelQution(e):this.questionnaire.qItems.splice(e,1)},_pseudoDelQution:function(e){var t=this;this.axios.patch("".concat(this.common.basePath,"/question/delete/").concat(this.questionnaire.qItems[e].id),"").then(function(a){t.questionnaire.qItems.splice(e,1)}).catch(function(e){t.$message.error(e)})},_delOption:function(e,t){if(this.questionnaire.qItems[e].options.length<=2)return this.$message.warning("不能删除，必须存在两个选项！！！"),!1;this.questionnaire.qItems[e].options[t].id?this.questionnaire.qItems[e].options[t].isDelete=!0:this.questionnaire.qItems[e].options.splice(t,1)},addOption:function(e){var t=JSON.parse(JSON.stringify(this.questionTemplate.radioQuestion.options[0]));this.questionnaire.qItems[e].options.push(t)},changeRadioRightKey:function(e,t){e.options.forEach(function(e,a){e.answer=a!=t?"false":"true"})},saveAppointQuestion:function(e){var t=this,a=null;a=e.id?"".concat(this.common.basePath,"/question/update"):"".concat(this.common.basePath,"/question/save"),e.paper_id=this.$route.params.id,this.axios.post(a,e).then(function(a){t.paperDetail=a.data.data,a.data.data&&(e.id=a.data.data)}).catch(function(e){t.$message.error(e)})},getQueryQuestionById:function(e){var t=this;this.axios.get("".concat(this.common.basePath,"question/simple/").concat(e.id),"").then(function(t){e=t.data.data}).catch(function(e){t.$message.error(e)})}}}),n=o,r=(a("da46"),a("2877")),l=Object(r["a"])(n,s,i,!1,null,null,null);l.options.__file="Questionnaire.vue";t["a"]=l.exports},"4a9b":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"file-show-list-wrap"},[e.fileList&&e.fileList.length>0?s("div",e._l(e.fileList,function(t,i){return s("el-tag",{key:i+"文件展示",staticClass:"tag",attrs:{closable:e.closable},on:{close:function(a){e.$emit("handleClose",t)}}},["jpg"===t.name.split(".")[1]||"png"===t.name.split(".")[1]||"jpeg"===t.name.split(".")[1]||"gif"===t.name.split(".")[1]||"bmp"===t.name.split(".")[1]?s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,target:"_blank",download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:""+e.common.publicBasePath+t.path,onerror:e.errimage}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"mp4"===t.name.split(".")[1]||"rmvb"===t.name.split(".")[1]||"wmv"===t.name.split(".")[1]||"asf"===t.name.split(".")[1]||"avi"===t.name.split(".")[1]||"3gp"===t.name.split(".")[1]||"mpg"===t.name.split(".")[1]||"mkv"===t.name.split(".")[1]||"dvd"===t.name.split(".")[1]||"ogm"===t.name.split(".")[1]||"mpeg2"===t.name.split(".")[1]||"mpeg4"===t.name.split(".")[1]||"mpeg"===t.name.split(".")[1]||"mov"===t.name.split(".")[1]?s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:a("1cad")}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"mp3"===t.name.split(".")[1]||"ogg"===t.name.split(".")[1]||"wav"===t.name.split(".")[1]||"ape"===t.name.split(".")[1]||"cda"===t.name.split(".")[1]||"midi"===t.name.split(".")[1]||"acc"===t.name.split(".")[1]||"mac"===t.name.split(".")[1]?s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:a("b735")}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"doc"===t.name.split(".")[1]||"docx"===t.name.split(".")[1]?s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:a("8a43")}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"xls"===t.name.split(".")[1]||"xlsx"===t.name.split(".")[1]?s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:a("693b")}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"txt"===t.name.split(".")[1]?s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:a("6919")}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"ppt"===t.name.split(".")[1]||"pptx"===t.name.split(".")[1]?s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:a("d75b")}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"zip"===t.name.split(".")[1]?s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:a("d06b")}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):s("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[s("img",{staticClass:"thumbnail fl",attrs:{src:a("4f13")}}),s("span",{staticClass:"fl name"},[e._v(e._s(t.name))])])])})):e._e()])},i=[],o={data:function(){return{errimage:'this.src="'+a("3adb")+'";this.οnerrοr=null'}},props:{fileList:{type:Array},closable:{type:Boolean,default:!1},isDownload:{type:Boolean,default:!0}},created:function(){},mounted:function(){},methods:{errorHandler:function(){return!1}}},n=o,r=(a("b562"),a("2877")),l=Object(r["a"])(n,s,i,!1,null,"022c7508",null);l.options.__file="FileShow.vue";t["a"]=l.exports},"4f13":function(e,t,a){e.exports=a.p+"7cc76cd11d9a9887bd57315a5f0cd288.jpg"},"566a":function(e,t,a){"use strict";var s=a("0788"),i=a.n(s);i.a},"62e4":function(e,t,a){},6919:function(e,t,a){e.exports=a.p+"2e4936c6128f1c3225b55b431b71db8a.jpg"},"693b":function(e,t,a){e.exports=a.p+"356c209a020157fa001eab7efcc7620a.jpg"},"817d":function(e,t,a){var s,i,o;(function(n,r){i=[t,a("313e")],s=r,o="function"===typeof s?s.apply(t,i):s,void 0===o||(e.exports=o)})(0,function(e,t){var a=function(e){"undefined"!==typeof console&&console&&console.error&&console.error(e)};if(t){var s=["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"],i={color:s,title:{textStyle:{fontWeight:"normal",color:"#008acd"}},visualMap:{itemWidth:15,color:["#5ab1ef","#e0ffff"]},toolbox:{iconStyle:{normal:{borderColor:s[0]}}},tooltip:{backgroundColor:"rgba(50,50,50,0.5)",axisPointer:{type:"line",lineStyle:{color:"#008acd"},crossStyle:{color:"#008acd"},shadowStyle:{color:"rgba(200,200,200,0.2)"}}},dataZoom:{dataBackgroundColor:"#efefff",fillerColor:"rgba(182,162,222,0.2)",handleColor:"#008acd"},grid:{borderColor:"#eee"},categoryAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitLine:{lineStyle:{color:["#eee"]}}},valueAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.1)"]}},splitLine:{lineStyle:{color:["#eee"]}}},timeline:{lineStyle:{color:"#008acd"},controlStyle:{normal:{color:"#008acd"},emphasis:{color:"#008acd"}},symbol:"emptyCircle",symbolSize:3},line:{smooth:!0,symbol:"emptyCircle",symbolSize:3},candlestick:{itemStyle:{normal:{color:"#d87a80",color0:"#2ec7c9",lineStyle:{color:"#d87a80",color0:"#2ec7c9"}}}},scatter:{symbol:"circle",symbolSize:4},map:{label:{normal:{textStyle:{color:"#d87a80"}}},itemStyle:{normal:{borderColor:"#eee",areaColor:"#ddd"},emphasis:{areaColor:"#fe994e"}}},graph:{color:s},gauge:{axisLine:{lineStyle:{color:[[.2,"#2ec7c9"],[.8,"#5ab1ef"],[1,"#d87a80"]],width:10}},axisTick:{splitNumber:10,length:15,lineStyle:{color:"auto"}},splitLine:{length:22,lineStyle:{color:"auto"}},pointer:{width:5}}};t.registerTheme("macarons",i)}else a("ECharts is not Loaded")})},"83cd":function(e,t,a){"use strict";var s=a("62e4"),i=a.n(s);i.a},"8a43":function(e,t,a){e.exports=a.p+"557c778d422c6b562734853fc3b966e2.jpg"},b562:function(e,t,a){"use strict";var s=a("0a50"),i=a.n(s);i.a},b735:function(e,t,a){e.exports=a.p+"8701718ae16e5ff270067dee98eab889.jpg"},d06b:function(e,t,a){e.exports=a.p+"40509e9426c6f711f9d13b71e637e241.jpg"},d75b:function(e,t,a){e.exports=a.p+"5aa84d708ab9486f1ed8e3f17faccd77.jpg"},da38:function(e,t,a){},da46:function(e,t,a){"use strict";var s=a("da38"),i=a.n(s);i.a},e1bb:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"mard10"},[a("el-col",{attrs:{span:24}},[e.isEdit?a("el-form-item",{attrs:{label:"试卷名称：",prop:"paperItem.name",rules:[{required:!0,message:"请输入试卷名称",trigger:"blur"},{validator:function(t,a,s){e.common.wordNumberValid(t,a,s,"single")},trigger:"blur"}]}},[a("el-input",{model:{value:e.paperItem.name,callback:function(t){e.$set(e.paperItem,"name",t)},expression:"paperItem.name"}})],1):a("div",{staticClass:"marl20"},[e._v("试卷名称："+e._s(e.paperItem.name))])],1),a("el-col",{staticClass:"mart20",attrs:{span:12}},[e.isEdit?a("el-form-item",{attrs:{label:"考试时间：",prop:"paperItem.exam_time",rules:[{required:!0,message:"请输入考试时间",trigger:"blur"}]}},[a("el-input",{attrs:{type:"number"},model:{value:e.paperItem.exam_time,callback:function(t){e.$set(e.paperItem,"exam_time",t)},expression:"paperItem.exam_time"}},[a("template",{slot:"append"},[e._v("分钟")])],2)],1):a("div",{staticClass:"marl20"},[e._v("考试时间："+e._s(e.paperItem.exam_time)+"分钟")])],1),a("el-col",{staticClass:"mart20",attrs:{span:12}},[e.isEdit?a("el-form-item",{attrs:{label:"总分："}},[e._v("  \n      \t"+e._s(e.totalScore)+"分\n      ")]):a("div",{staticClass:"marl20"},[e._v("总分："+e._s(e.totalScore))])],1),e.paperItem.id&&e.isEdit?a("el-col",{staticClass:"mart10 marb20 text-right",attrs:{span:24}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.savePaperName}},[e._v("保存")])],1):e._e()],1),a("el-card",{attrs:{shadow:"never"}},[e._l(e.paperItem.questions,function(t,s){return a("div",{key:s,staticClass:"questions-box mart5"},[a("div",[e._v(e._s(s+1)+"、")]),a("el-card",{staticClass:"questions-content",attrs:{shadow:"never"}},[a("el-row",{staticClass:"mard10"},[a("el-col",{staticClass:"div-flex",attrs:{span:6}},[a("div",{staticClass:"label-2 label marr5"},[e._v("分数: ")]),e.isEdit?a("el-input",{attrs:{type:"number","auto-complete":"off"},model:{value:t.score,callback:function(a){e.$set(t,"score",e._n(a))},expression:"item.score"}}):a("div",[e._v(e._s(t.score))]),a("div",{staticClass:"label-1 label marl5"},[e._v(" 分")])],1),a("el-col",{staticClass:"text-right question-type",attrs:{offset:13,span:4}},[e._v("\n\t\t\t\t\t\t"+e._s(e.numMatchingText(t.type))+"\n\t\t\t\t\t")]),a("el-col",{staticClass:"text-right ",attrs:{span:1}},[e.isEdit?a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-close",circle:""},on:{click:function(t){e.del("question",s)}}}):e._e()],1)],1),a("el-row",{staticClass:"mard10"},[a("el-col",{staticClass:"div-flex",attrs:{span:18}},[a("div",{staticClass:"label-2 label marr5"},[e._v("题干: ")]),e.isEdit?a("el-input",{model:{value:t.question,callback:function(a){e.$set(t,"question",a)},expression:"item.question"}}):a("div",[e._v(e._s(t.question))])],1),a("el-col",{staticStyle:{"margin-left":"60px"},attrs:{span:22}},[e._l(t.options,function(i,o){return a("div",{directives:[{name:"show",rawName:"v-show",value:!i.isDelete,expression:"!itemOption.isDelete"}],key:o,staticClass:"div-flex mart10 flex-align-items"},[a("div",{staticClass:"label-2 label marr5"},[e._v("选项"+e._s(o+1)+": ")]),e.isEdit?a("el-input",{model:{value:i.name,callback:function(t){e.$set(i,"name",t)},expression:"itemOption.name"}}):a("div",[e._v(e._s(i.name))]),a("el-radio",{directives:[{name:"show",rawName:"v-show",value:(1==t.type||3==t.type)&&e.isEdit,expression:"(item.type == 1 || item.type == 3) && isEdit"}],staticClass:"marl5",attrs:{label:"true"},on:{change:function(a){e.changeRadioRightKey(t,o)}},model:{value:i.answer,callback:function(t){e.$set(i,"answer",t)},expression:"itemOption.answer"}},[e._v("正确")]),a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:2==t.type&&e.isEdit,expression:"item.type == 2 && isEdit"}],staticClass:"marl5",attrs:{"true-label":"true","false-label":"false"},model:{value:i.answer,callback:function(t){e.$set(i,"answer",t)},expression:"itemOption.answer"}},[e._v("正确")]),e.isEdit?a("el-button",{staticClass:"marl5",attrs:{type:"danger",size:"mini",icon:"el-icon-close",circle:""},on:{click:function(t){e.del("option",s,o)}}}):e._e()],1)}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:(1==t.type||2==t.type)&&e.isEdit,expression:" (item.type == 1 || item.type == 2) && isEdit"}],staticClass:"mart10",staticStyle:{"margin-left":"65px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addOption(s)}}},[e._v("添加选项")]),a("div",{staticClass:"text-right"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.paperItem.id&&e.isEdit,expression:" paperItem.id && isEdit"}],staticClass:"mart10",attrs:{type:"primary",size:"small"},on:{click:function(a){e.saveAppointQuestion(t)}}},[e._v("保存")])],1)],2),a("el-col",{staticClass:"mart20",attrs:{span:22}},[e.isEdit?e._e():a("div",{staticStyle:{color:"#62b549"}},[e._v("\n              正确答案："+e._s(4==t.type?"无标准答案":t.optionAnswer)+"\n            ")])])],1)],1)],1)}),e.isEdit?a("div",{staticClass:"text-right mart10"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addQution("radioQuestion")}}},[e._v("添加单选题")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addQution("chekboxQuestion")}}},[e._v("添加多选题")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addQution("judgeQuestion")}}},[e._v("添加判断题")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addQution("shortAnswerQuestion")}}},[e._v("添加简答题")])],1):e._e()],2)],1)},i=[],o=(a("7f7f"),a("f751"),a("ac6a"),{props:{paperItem:{default:null},isEdit:{default:!0,required:!1}},data:function(){return{checkbox:!1,questionTemplate:{radioQuestion:{question:"我是第二道试题（单选题）",type:1,score:30,analyze:"这是我的习题解析",options:[{name:"我是第二试题的第一选项",answer:"true",isDelete:!1},{name:"我是第2试题的第二选项",answer:"false",isDelete:!1},{name:"我是第2试题的第二选项",answer:"false",isDelete:!1}]},chekboxQuestion:{question:"我是第二道试题（多选题）",type:2,score:30,analyze:"这是我的习题解析",options:[{name:"我是第二试题的第一选项",answer:"true",isDelete:!1},{name:"我是第二试题的第二选项",answer:"true",isDelete:!1}]},judgeQuestion:{question:"我是第二道试题（判断题）",type:3,score:30,analyze:"这是我的习题解析",options:[{name:"我是第二试题的第一选项",answer:"true",isDelete:!1},{name:"我是第2试题的第二选项",answer:"false",isDelete:!1}]},shortAnswerQuestion:{question:"我是第二道试题（简答选题）",type:4,score:30,analyze:"这是我的习题解析"}},questionTypeText:null}},components:{},computed:{totalScore:function(){var e=0;return this.paperItem.questions.forEach(function(t){e+=t.score}),e}},created:function(){this.convertPaperItem()},mounted:function(){},methods:{convertPaperItem:function(){var e=this.paperItem.questions;e&&e.forEach(function(e){e.optionAnswer=[],4!=e.type&&e.options.forEach(function(t,a){"true"==t.answer&&e.optionAnswer.push("选项".concat(a+1))}),e.optionAnswer=e.optionAnswer.join("、")}),Object.assign({},this.paperItem.questions,e)},numMatchingText:function(e){switch(e){case 1:return this.questionTypeText="单选题";case 2:return this.questionTypeText="多选题";case 3:return this.questionTypeText="判断题";case 4:return this.questionTypeText="简答题"}},addQution:function(e){this.paperItem.questions.push(JSON.parse(JSON.stringify(this.questionTemplate[e])))},del:function(e,t,a){"question"==e?this._delQution(t):this._delOption(t,a)},_delQution:function(e){var t=this;if(this.paperItem.questions.length<=1)return this.$message.warning("不能删除，必须存在一个题！！！"),!1;this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){a.value;t.paperItem.questions[e].id?t._pseudoDelQution(e):t.paperItem.questions.splice(e,1),t.$message.success("删除成功，请点击保存")}).catch(function(){})},_pseudoDelQution:function(e){var t=this;this.axios.patch("".concat(this.common.basePath,"/question/delete/").concat(this.paperItem.questions[e].id),"").then(function(a){t.paperItem.questions.splice(e,1)}).catch(function(e){t.$message.error(e)})},_delOption:function(e,t){var a=this;if(1==this.paperItem.questions[e].type){if("true"==this.paperItem.questions[e].options[t].answer)return this.$message.warning("不能删除，单选题必须有一个正确答案！！！"),!1}else if(2==this.paperItem.questions[e].type&&"true"==this.paperItem.questions[e].options[t].answer){var s=0;if(this.paperItem.questions[e].options.forEach(function(e){"true"==e.answer&&s++}),s<=2)return this.$message.warning("不能删除，多选题必须有两个正确答案！！！"),!1}if(this.paperItem.questions[e].options.length<=2)return this.$message.warning("不能删除，必须存在两个选项！！！"),!1;this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(s){s.value;a.paperItem.questions[e].options[t].id?a.paperItem.questions[e].options[t].isDelete=!0:a.paperItem.questions[e].options.splice(t,1),a.$message.success("删除成功，请点击保存")}).catch(function(){})},addOption:function(e){var t=JSON.parse(JSON.stringify(this.questionTemplate.radioQuestion.options[0]));t.answer=!1,this.paperItem.questions[e].options.push(t)},changeRadioRightKey:function(e,t){e.options.forEach(function(e,a){e.answer=a!=t?"false":"true"})},saveAppointQuestion:function(e){var t=this,a=null;a=e.id?"".concat(this.common.basePath,"/question/update"):"".concat(this.common.basePath,"/question/save"),e.paper_id=this.$route.params.associated_object,this.axios.post(a,e).then(function(a){t.$message.success(a.data.meta.message),t.paperDetail=a.data.data,a.data.data&&(e.id=a.data.data)}).catch(function(e){t.$message.error(e)})},getQueryQuestionById:function(e){var t=this;this.axios.get("".concat(this.common.basePath,"question/simple/").concat(e.id),"").then(function(t){e=t.data.data}).catch(function(e){t.$message.error(e)})},savePaperName:function(){var e=this;this.paperItem.name&&this.paperItem.exam_time&&this.axios.patch("".concat(this.common.basePath,"/paper/").concat(this.$route.params.associated_object),this.paperItem).then(function(t){e.$message.success(t.data.meta.message)}).catch(function(t){e.$message.error(t)})}}}),n=o,r=(a("566a"),a("2877")),l=Object(r["a"])(n,s,i,!1,null,null,null);l.options.__file="TestPaperC.vue";t["a"]=l.exports}}]);
//# sourceMappingURL=chunk-b6f3.aa2d5294.js.map