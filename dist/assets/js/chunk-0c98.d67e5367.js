(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c98"],{"0807":function(t,e,a){"use strict";var s=a("e1aa"),o=a.n(s);o.a},"0a77":function(t,e,a){},"77c1":function(t,e,a){"use strict";var s=a("0a77"),o=a.n(s);o.a},"9c51":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.taskDetail?a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"card-title"},[t._v("任务基本信息")])]),a("el-row",[a("el-col",{staticClass:"marb5",attrs:{span:12}},[t._v("\n        任务名称："+t._s(t.taskDetail.name)+"\n        "),1==t.taskDetail.cur_status?a("el-button",{attrs:{disabled:!t.common.checkAuthority(t.$route.name+"_Release",!0),type:"primary",size:"mini"},on:{click:t.releaseTask}},[t._v("\n          "+t._s(t.common.checkAuthority(t.$route.name+"_Release")?t.common.checkAuthority(t.$route.name+"_Release").name:"")+"\n        ")]):t._e()],1),a("el-col",{staticClass:"marb5",attrs:{span:12}},[t._v("\n        截止时间："+t._s(t.common._convertDate(t.taskDetail.end_time,"yyyy年MM月dd日"))+" \n        "),a("el-button",{attrs:{disabled:!t.common.checkAuthority(t.$route.name+"_Delay",!0),type:"primary",size:"mini"},on:{click:function(e){t.delayDialog=!0,t.$refs.delayForm&&t.$refs.delayForm.resetFields()}}},[t._v("\n          "+t._s(t.common.checkAuthority(t.$route.name+"_Delay")?t.common.checkAuthority(t.$route.name+"_Delay").name:"")+"\n        ")])],1),a("el-col",{staticClass:"marb5",attrs:{span:24}},[t._v("\n        得分占比："+t._s(t.taskDetail.value)+"%    \n        报告状态："),a("span",{style:{color:t.reportStatus().color}},[t._v(t._s(t.reportStatus().name))])]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[t._v("\n        报告类型："+t._s(2==t.taskDetail.genre?"个人报告":"小组报告")+" \n      ")]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[t._v("\n        报告要求："+t._s(t.taskDetail.description)+"  \n      ")]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[t._v("\n        附件列表：\n        "),t.taskDetail.task_files?a("el-tag",{staticClass:"marr10 mart10"},[a("a",{attrs:{href:""+t.common.publicBasePath+JSON.parse(t.taskDetail.task_files).path,target:"_blank"}},[t._v("\n            "+t._s(JSON.parse(t.taskDetail.task_files).name)+"\n          ")])]):a("span",[t._v("无")]),1==t.taskDetail.cur_status?a("upload",{staticStyle:{display:"inline-block"},attrs:{disabled:!t.common.checkAuthority(t.$route.name+"_EditFile",!0),buttonText:t.taskDetail.task_files?"另传一个附件":"上传附件"},on:{uploadSuccess:t.uploadReportSuccess}}):t._e()],1),a("el-col",{staticClass:"text-right",attrs:{span:24}},[!t.taskDetail.template&&t.taskDetail.experimentTemplate?a("el-button",{attrs:{disabled:!t.common.checkAuthority(t.$route.name+"_Base",!0),type:"primary"},on:{click:t.upGradeBase}},[t._v("\n          "+t._s(t.common.checkAuthority(t.$route.name+"_Base")?t.common.checkAuthority(t.$route.name+"_Base").name:"")+"\n        ")]):t._e()],1)],1)],1),a("div",[a("el-card",{staticClass:"mart20"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"card-title"},[t._v("完成任务")])]),a("el-tabs",{model:{value:t.questionActiveName,callback:function(e){t.questionActiveName=e},expression:"questionActiveName"}},[a("el-tab-pane",{attrs:{label:"未交",name:"1"}},[t._l(t.answerMemberListData,function(e,s){return t.answerMemberListData.length?a("div",{staticClass:"person-group-item_w"},[a("el-dropdown",{attrs:{"hide-on-click":!1,placement:"bottom-start"}},[a("div",{staticClass:"img-photo-fix wh50"},[a("img",{attrs:{src:e.head_img?e.head_img:"默认图",onerror:t.defaultImg(e.sex),width:"50px",height:"50px"}})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-row",{staticClass:"mar5 member-info-fix"},[a("el-col",{attrs:{span:9}},[a("p",[a("img",{attrs:{src:e.head_img?e.head_img:"默认图",onerror:t.defaultImg(e.sex),width:"100px",height:"100px"}})])]),a("el-col",{attrs:{span:15}},[a("p",[t._v("姓名："+t._s(e.user_name?e.user_name:"无"))]),a("p",[t._v("工/学号："+t._s(e.account?e.account:"无"))]),a("p",[t._v("手机："+t._s(e.phone_num?e.phone_num:"无"))]),a("p",[t._v("院系："+t._s(e.facultyName?e.facultyName:"无"))]),a("p",[t._v("邮箱："+t._s(e.mail?e.mail:"无"))])])],1)],1)],1)],1):t._e()}),t.answerMemberListData.length?t._e():a("div",{staticClass:"mar10"},[t._v("暂无数据")])],2),a("el-tab-pane",{attrs:{label:"已提交",name:"2"}},[t.answerMemberListData.length?a("div",[a("el-row",{attrs:{gutter:20}},[t._l(t.answerMemberListData,function(e,s){return a("el-col",{key:s,staticClass:"answer-member-box",attrs:{span:6}},[a("el-card",[a("p",[t._v(t._s(e.name)+" ")]),a("p",[e.path?a("el-tag",{staticClass:"marr10"},[a("a",{attrs:{href:""+t.common.publicBasePath+JSON.parse(e.path).path,target:"_blank"}},[t._v("\n                        "+t._s(JSON.parse(e.path).name)+"\n                      ")])]):t._e()],1),a("p",[t._v(t._s(e.user_name)+" 于 "+t._s(t.common._convertDate(e.create_time,"yyyy年MM月dd日"))+" 上传")]),a("p",[t._v("得分："+t._s(e.score?e.score:0)+"分   \n                    "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.score,expression:"item.score"}],staticClass:"marl10",attrs:{disabled:!t.common.checkAuthority(t.$route.name+"_EditScore",!0),type:"primary",size:"mini"},on:{click:function(a){t.showScoreDialog(e)}}},[t._v("\n                      "+t._s(t.common.checkAuthority(t.$route.name+"_EditScore")?t.common.checkAuthority(t.$route.name+"_EditScore").name:"")+"\n                    ")])],1)])],1)}),a("el-col",{staticClass:"mart20",attrs:{span:24}},[a("el-button",{staticClass:"marl10",attrs:{disabled:!t.common.checkAuthority(t.$route.name+"_DownloadReport",!0),type:"primary",size:"mini"},on:{click:t.downLoadReeport}},[t._v("\n                  "+t._s(t.common.checkAuthority(t.$route.name+"_DownloadReport")?t.common.checkAuthority(t.$route.name+"_DownloadReport").name:"")+"\n                ")])],1)],2)],1):a("div",{staticClass:"mar10"},[t._v("暂无数据")])]),a("el-tab-pane",{attrs:{label:"未打分",name:"3"}},[t.answerMemberListData.length?a("div",[a("el-row",{attrs:{gutter:20}},[t._l(t.answerMemberListData,function(e,s){return a("el-col",{key:s,staticClass:"answer-member-box",attrs:{span:6}},[a("el-card",[a("p",[t._v(t._s(e.name)+" ")]),a("p",[e.path?a("el-tag",{staticClass:"marr10"},[a("a",{attrs:{href:""+t.common.publicBasePath+JSON.parse(e.path).path,target:"_blank"}},[t._v("\n                        "+t._s(JSON.parse(e.path).name)+"\n                      ")])]):t._e()],1),a("p",[t._v(t._s(e.user_name)+" 于 "+t._s(t.common._convertDate(e.create_time,"yyyy年MM月dd日"))+" 上传")]),a("p",[t._v("得分："+t._s(e.score?e.score:0)+"分   \n                    "),a("el-button",{staticClass:"marl10",attrs:{disabled:!t.common.checkAuthority(t.$route.name+"_Score",!0),type:"primary",size:"mini"},on:{click:function(a){t.showScoreDialog(e)}}},[t._v("\n                      "+t._s(t.common.checkAuthority(t.$route.name+"_Score")?t.common.checkAuthority(t.$route.name+"_Score").name:"")+"\n                    ")])],1)])],1)}),a("el-col",{staticClass:"mart20",attrs:{span:24}},[a("upload",{attrs:{url:"/report/upload?taskID="+t.$route.params.id,disabled:!t.common.checkAuthority(t.$route.name+"_ImportScore",!0),buttonText:t.common.checkAuthority(t.$route.name+"_ImportScore")?t.common.checkAuthority(t.$route.name+"_ImportScore").name:""},on:{uploadSuccess:t.importScore}})],1)],2)],1):a("div",{staticClass:"mar10"},[t._v("暂无数据")])])],1)],1)],1),a("el-dialog",{attrs:{width:"500px",title:"评分",closeOnClickModal:!1,visible:t.scoreDialog},on:{"update:visible":function(e){t.scoreDialog=e}}},[t.taskDetail?a("div",[a("el-form",{ref:"scoreForm",attrs:{model:t.scoreForm,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"score",label:"得分",rules:[{required:!0,message:"请打分",trigger:"blur"}]}},[a("el-input-number",{attrs:{min:1,max:t.taskDetail.score},model:{value:t.scoreForm.score,callback:function(e){t.$set(t.scoreForm,"score",e)},expression:"scoreForm.score"}}),t._v("\n             "+t._s("最大分数："+t.taskDetail.score)+"分\n          ")],1)],1)],1):t._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.submitScore("scoreForm")}}},[t._v("打 分")]),a("el-button",{on:{click:function(e){t.scoreDialog=!1}}},[t._v("取 消")])],1)]),a("el-dialog",{attrs:{width:"500px",title:"延期",closeOnClickModal:!1,visible:t.delayDialog},on:{"update:visible":function(e){t.delayDialog=e}}},[t.taskDetail?a("div",[a("el-form",{ref:"delayForm",attrs:{model:t.delayForm,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"end_time",label:"时间",rules:[{required:!0,message:"请选择日期",trigger:"blur"}]}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.delayForm.end_time,callback:function(e){t.$set(t.delayForm,"end_time",e)},expression:"delayForm.end_time"}})],1)],1)],1):t._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.submitDelayTask("delayForm")}}},[t._v("提交")]),a("el-button",{on:{click:function(e){t.delayDialog=!1}}},[t._v("取 消")])],1)])],1):t._e()},o=[],r=a("d443"),i={components:{upload:r["a"]},data:function(){return{isLoad:!0,paperDialog:!1,delayDialog:!1,scoreDialog:!1,taskDetail:null,editFileDialog:!1,questionActiveName:"1",answerMemberListData:[],loginUserId:sessionStorage.getItem("access_key"),isPaperDialogShowClose:!0,scoreForm:{score:null,id:null},delayForm:{end_time:null},editFileForm:{task_files:null}}},computed:{reportStatus:function(){return function(){if(this.taskDetail)switch(this.taskDetail.cur_status){case 1:return{name:"未发布",color:"#f5b800"};case 2:return{name:"进行中",color:"#d298fd"};case 3:return{name:"已截止",color:"red"};case 4:return{name:"已结束",color:"#3aff6e"}}}}},watch:{questionActiveName:function(t){this.getQueryReportMember()}},mounted:function(){this.getQueryTaskDetail(),this.getQueryReportMember()},methods:{uploadReportSuccess:function(t){this.editFileForm.task_files=JSON.stringify(t),this.submitReportFile()},submitReportFile:function(){var t=this;this.axios.patch("".concat(this.common.basePath,"/task/").concat(this.$route.params.id),this.editFileForm).then(function(e){t.$message.success(e.data.meta.message),t.getQueryTaskDetail()}).catch(function(e){t.$message.error(e)})},upGradeBase:function(){var t=this;this.axios.get("".concat(this.common.basePath,"/baseTask/upgrade"),{params:{taskID:this.$route.params.id}}).then(function(e){t.$message.success(e.data.meta.message),t.getQueryTaskDetail()}).catch(function(e){t.$message.error(e)})},defaultImg:function(t){return 1==t?'this.src="'+a("e93b")+'"':'this.src="'+a("e0a3")+'"'},getQueryTaskDetail:function(){var t=this;this.axios.get("".concat(this.common.basePath,"/task/").concat(this.$route.params.id),"").then(function(e){t.taskDetail=e.data.data,t.isLoad=!1}).catch(function(e){t.$message.error(e),t.isLoad=!1})},getQueryReportMember:function(){var t=this;this.answerMemberListData=[],this.axios.get("".concat(this.common.basePath,"/report/member/").concat(this.$route.params.id),{params:{type:this.questionActiveName}}).then(function(e){t.answerMemberListData=e.data.data}).catch(function(e){t.$message.error(e)})},showScoreDialog:function(t){this.scoreDialog=!0,this.scoreForm.id=t.id},submitScore:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e._submitScore()})},_submitScore:function(){var t=this;this.axios.patch("".concat(this.common.basePath,"/report/").concat(this.scoreForm.id),this.scoreForm).then(function(e){t.getQueryReportMember(),t.scoreDialog=!1}).catch(function(e){t.scoreDialog=!1,t.$message.error(e)})},releaseTask:function(){var t=this;this.axios.get("".concat(this.common.basePath,"/task/release/").concat(this.$route.params.id),"").then(function(e){t.$message.success(e.data.meta.message),t.getQueryTaskDetail()}).catch(function(e){t.$message.error(e)})},submitDelayTask:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.axios.patch("".concat(e.common.basePath,"/task/").concat(e.$route.params.id),e.delayForm).then(function(t){e.getQueryTaskDetail(),e.delayDialog=!1}).catch(function(t){e.delayDialog=!1,e.$message.error(t)})})},downLoadReeport:function(){var t=this;this.axios.get("".concat(this.common.basePath,"/report/download?taskID=").concat(this.$route.params.id),{responseType:"blob"}).then(function(e){t.common._fileBold(e),t.$message.success("导出成功")}).catch(function(e){t.$message.error(e)})},importScore:function(t,e){this.$message.success("上传成功"),this.getQueryReportMember()}}},n=i,c=(a("0807"),a("2877")),l=Object(c["a"])(n,s,o,!1,null,null,null);l.options.__file="ReportTaskDetailCom.vue";e["a"]=l.exports},e1aa:function(t,e,a){},ea30:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrap-box"},[t.taskDetail?a("el-card",{staticClass:"title-card"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/lesson/testlist"}}},[t._v("实验列表")]),a("el-breadcrumb-item",{attrs:{to:{name:"TestDetail",params:{id:t.taskDetail.experiment_id}}}},[t._v("实验详情")]),a("el-breadcrumb-item",[t._v("报告任务详情")])],1)],1):t._e(),a("div",{staticClass:"router-view-wrap transparent-bg"},[a("div",{staticClass:"router-view-content task-detail"},[a("report-taskdetailcom")],1)])],1)},o=[],r=a("9c51"),i={data:function(){return{taskDetail:null}},components:{"report-taskdetailcom":r["a"]},computed:{},mounted:function(){this.getQueryTaskDetail()},methods:{getQueryTaskDetail:function(){var t=this;this.axios.get("".concat(this.common.basePath,"/task/").concat(this.$route.params.id),"").then(function(e){t.taskDetail=e.data.data}).catch(function(e){t.$message.error(e)})}}},n=i,c=(a("77c1"),a("2877")),l=Object(c["a"])(n,s,o,!1,null,null,null);l.options.__file="ReportDetail.vue";e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-0c98.d67e5367.js.map