{"version":3,"sources":["webpack:///./src/views/deviceManage/WorkList.vue?08df","webpack:///src/views/deviceManage/WorkList.vue","webpack:///./src/views/deviceManage/WorkList.vue?55e6","webpack:///./src/views/deviceManage/WorkList.vue","webpack:///./src/views/deviceManage/WorkList.vue?e50c"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","id","separator-class","_v","common","checkAuthority","data","tableData","rows","label","prop","width","show-overflow-tooltip","scopedSlots","_u","key","fn","scope","type","size","disabled","on","click","$event","showDetail","row","background","layout","current-page","pageNum","page-size","pageSize","total","size-change","pageSizeChange","current-change","pageCurrentChange","visible","dialogDetailVisible","title","loading","dialogLoading","update:visible","detailData","body-style","padding","_s","user_name","experiment_name","_convertDate","create_time","_l","item","index","address","identifier","timeTableRecord","begin_index","begin_time","end_index","end_time","_e","itemInner","indexInner","slot","rejectWorkList","confirmWorkList","staticRenderFns","WorkListvue_type_script_lang_js_","typeTree","JSON","parse","sessionStorage","getItem","typeTreeProps","value","children","modelList","searchForm","models","type_id","cur_status","tempId","created","mounted","getTableList","methods","_this","tableLoading","config","method","url","concat","basePath","stringify","length","model_id","axios","then","response","$nextTick","_","catch","errorMsg","$message","error","clearForm","val","getWorkDetail","_this2","scrapDevice","_this3","cascaderChanged","getModelList","_this4","params","$refs","deviceForm","resetFields","_this5","success","meta","message","_this6","deviceManage_WorkListvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WorkList_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WorkList_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"assets/js/chunk-d757.b83aec80.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content-wrap-box\",attrs:{\"id\":\"work-list\"}},[_c('el-card',{staticClass:\"title-card\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',[_vm._v(\"教室工单\")])],1)],1),_c('div',{staticClass:\"router-view-wrap\"},[_c('div',{staticClass:\"router-view-content\"},[(_vm.common.checkAuthority('WorkList-list', true))?_c('div',[_c('el-table',{attrs:{\"data\":_vm.tableData.rows}},[_c('el-table-column',{attrs:{\"label\":\"申请人\",\"prop\":\"user_name\",\"width\":\"150\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"label\":\"院系\",\"prop\":\"faculty_name\",\"width\":\"150px\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"label\":\"实验名\",\"prop\":\"experiment_name\"}}),_c('el-table-column',{attrs:{\"label\":\"电话\",\"prop\":\"phone_num\",\"width\":\"120px\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"disabled\":!_vm.common.checkAuthority('WorkList-detail', true)},on:{\"click\":function($event){_vm.showDetail(scope.row)}}},[_vm._v(\"查 看\")])]}}])})],1)],1):_c('div',{staticClass:\"text-center text-info\"},[_vm._v(\" 你无权查看此内容 \")])]),(_vm.common.checkAuthority('WorkList-list', true))?_c('div',{staticClass:\"router-view-bottom\"},[_c('div'),_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"total, sizes, prev, pager, next\",\"current-page\":_vm.pageNum,\"page-size\":_vm.pageSize,\"total\":_vm.tableData.total},on:{\"size-change\":_vm.pageSizeChange,\"current-change\":_vm.pageCurrentChange}})],1):_c('div',{staticClass:\"router-view-bottom\"},[_c('div')]),_c('el-dialog',{attrs:{\"visible\":_vm.dialogDetailVisible,\"title\":\"工单详情\",\"id\":\"work-list-dialog\",\"loading\":_vm.dialogLoading},on:{\"update:visible\":function($event){_vm.dialogDetailVisible=$event}}},[_c('h4',{staticClass:\"text-info\"},[_vm._v(\"已预约教室\")]),(_vm.detailData.classRooms)?_c('div',[_c('el-card',{staticClass:\"marb10\",attrs:{\"body-style\":{'padding': '0 20px'}}},[_c('p',[_c('span',[_c('i',{staticClass:\"fa fa-user\"}),_vm._v(\"预约人：\"+_vm._s(_vm.detailData.user_name))]),_c('span',{staticClass:\"marl10\"},[_c('i',{staticClass:\"fa fa-tag marl10\"}),_vm._v(\"实验名称：\"+_vm._s(_vm.detailData.experiment_name))]),_c('span',{staticClass:\"marl10 fr\"},[_c('i',{staticClass:\"fa fa-calendar marl10\"}),_vm._v(\"预约时间：\"+_vm._s(_vm.common._convertDate(_vm.detailData.create_time, \"yyyy年MM月dd日\")))])]),_vm._l((_vm.detailData.classRooms),function(item,index){return _c('el-card',{key:(index + \"已预约教室\"),staticClass:\"marb10\",attrs:{\"body-style\":{padding: '0 20px'}}},[_c('p',[_c('span',[_c('i',{staticClass:\"fa fa-paperclip\"}),_vm._v(\"地址：\"+_vm._s(item.address))]),_c('span',{staticClass:\"marl10\"},[_c('i',{staticClass:\"fa fa-paperclip marl10\"}),_vm._v(\"编号：\"+_vm._s(item.identifier))])]),_c('p',[_c('span',[_vm._v(\"开始节次: \"+_vm._s(item.timeTableRecord.begin_index)+\"   时间: \"+_vm._s(_vm.common._convertDate(item.timeTableRecord.begin_time, \"yyyy年MM月dd日\")))]),_c('span',{staticClass:\"fr\"},[_vm._v(\"结束节次: \"+_vm._s(item.timeTableRecord.end_index)+\"   时间: \"+_vm._s(_vm.common._convertDate(item.timeTableRecord.end_time, \"yyyy年MM月dd日\")))])])])})],2)],1):_vm._e(),_c('h4',{staticClass:\"text-info\"},[_vm._v(\"冲突预约\")]),(_vm.detailData.conflictRecordVo)?_c('div',_vm._l((_vm.detailData.conflictRecordVo),function(item,index){return _c('el-card',{key:(index + \"已预约人\"),staticClass:\"marb10\",attrs:{\"body-style\":{'padding': '0 20px'}}},[_c('p',[_c('span',[_c('i',{staticClass:\"fa fa-user\"}),_vm._v(\"预约人：\"+_vm._s(item.user_name))]),_c('span',{staticClass:\"marl10\"},[_c('i',{staticClass:\"fa fa-tag marl10\"}),_vm._v(\"实验名称：\"+_vm._s(item.experiment_name))]),_c('span',{staticClass:\"marl10 fr\"},[_c('i',{staticClass:\"fa fa-calendar marl10\"}),_vm._v(\"预约时间：\"+_vm._s(_vm.common._convertDate(item.create_time, \"yyyy年MM月dd日\")))])]),(item.classRooms)?_c('div',_vm._l((item.classRooms),function(itemInner,indexInner){return _c('el-card',{key:(indexInner + \"冲突教室\"),staticClass:\"marb10\",attrs:{\"body-style\":{'padding': '0 20px'}}},[_c('p',{staticClass:\"text-danger\"},[_c('i',{staticClass:\"fa fa-home\"}),_c('span',[_vm._v(\"地址：\"+_vm._s(itemInner.address)+\" \")]),_c('span',{staticClass:\"marl10\"},[_c('i',{staticClass:\"fa fa-paperclip marl10\"}),_vm._v(\"编号：\"+_vm._s(itemInner.identifier))])]),_c('p',[_c('span',[_vm._v(\"开始节次: \"+_vm._s(itemInner.timeTableRecord.begin_index)+\"   时间: \"+_vm._s(_vm.common._convertDate(itemInner.timeTableRecord.begin_time, \"yyyy年MM月dd日\")))]),_c('span',{staticClass:\"fr\"},[_vm._v(\"结束节次: \"+_vm._s(itemInner.timeTableRecord.end_index)+\"   时间: \"+_vm._s(_vm.common._convertDate(itemInner.timeTableRecord.end_time, \"yyyy年MM月dd日\")))])])])})):_vm._e()])})):_vm._e(),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"default\"},on:{\"click\":function($event){_vm.dialogDetailVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"warning\",\"disabled\":!_vm.common.checkAuthority('WorkList-reject', true)},on:{\"click\":_vm.rejectWorkList}},[_vm._v(\"拒 绝\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":!_vm.common.checkAuthority('WorkList-agree', true)},on:{\"click\":_vm.confirmWorkList}},[_vm._v(\"同 意\")])],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- 教室工单(显示在实验室管理下) -->\r\n<template>\r\n  <div class=\"content-wrap-box\" id=\"work-list\">\r\n    <el-card class=\"title-card\">\r\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n        <el-breadcrumb-item>教室工单</el-breadcrumb-item> \r\n      </el-breadcrumb>\r\n    </el-card>\r\n    <div class=\"router-view-wrap\">\r\n      <!-- 页面主要内容 -->\r\n      <div class=\"router-view-content\">\r\n        <div v-if=\"common.checkAuthority('WorkList-list', true)\">\r\n        <!-- 搜索表单 -->\r\n          <!-- <el-form ref=\"searchForm\" :model=\"searchForm\" label-width=\"120px\">\r\n            <el-row>\r\n              <el-col :span=\"8\" v-if=\"common.checkAuthorityTree('Standard-list')\">\r\n                <el-form-item label=\"设备规格：\" prop=\"models\">\r\n                  <el-cascader :options=\"typeTree\" :props=\"typeTreeProps\" v-model=\"searchForm.models\" change-on-select class=\"fill-width\" @change=\"cascaderChanged\"></el-cascader>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"8\" v-if=\"common.checkAuthorityTree('Standard-listType')\">\r\n                <el-form-item label=\"设备型号：\" prop=\"type\">\r\n                  <el-select v-model=\"searchForm.type_id\" class=\"fill-width\" placeholder=\"请先选择规格后再选择型号\" :disabled=\"searchForm.models.length <= 0\">\r\n                    <el-option v-for=\"(item, index) in modelList\" :value=\"item.id\" :label=\"item.model_name\" :key=\"`${index}型号`\"></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"编号：\" prop=\"identifier\">\r\n                  <el-input class=\"fill-width\" v-model=\"searchForm.identifier\"></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"借还状态：\" prop=\"cur_status\">\r\n                  <el-select v-model=\"searchForm.cur_status\" class=\"fill-width\">\r\n                    <el-option v-for=\"(item, index) in common.borrowStatus\" :value=\"item.id\" :label=\"item.label\" :key=\"`借还状态${index}`\"></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\" \">\r\n                  <el-button type=\"primary\" @click=\"getTableList\">搜索</el-button>\r\n                  <el-button type=\"default\" @click=\"clearForm\">重置</el-button>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n          </el-form> -->\r\n\r\n          <el-table\r\n            :data=\"tableData.rows\">\r\n            <el-table-column label=\"申请人\" prop=\"user_name\" width=\"150\" show-overflow-tooltip></el-table-column>\r\n            <el-table-column label=\"院系\" prop=\"faculty_name\" width=\"150px\" show-overflow-tooltip></el-table-column>\r\n            <el-table-column label=\"实验名\" prop=\"experiment_name\"></el-table-column>\r\n            <el-table-column label=\"电话\" prop=\"phone_num\" width=\"120px\"></el-table-column>\r\n            <!-- <el-table-column label=\"借出时间\" width=\"150px\"><template slot-scope=\"scope\">{{common._convertDate(scope.row.borrow_time, \"yyyy年MM月dd日\")}}</template></el-table-column> -->\r\n            <el-table-column label=\"操作\" width=\"120\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button type=\"primary\" size=\"mini\" :disabled=\"!common.checkAuthority('WorkList-detail', true)\" @click=\"showDetail(scope.row)\">查 看</el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n        <div v-else class=\"text-center text-info\"> 你无权查看此内容 </div>\r\n      </div>\r\n      \r\n      <!-- 页面底部 -->\r\n      <div v-if=\"common.checkAuthority('WorkList-list', true)\" class=\"router-view-bottom\">\r\n        <div></div>\r\n        <!-- 分页 -->\r\n        <el-pagination\r\n          background\r\n          layout=\"total, sizes, prev, pager, next\"\r\n          :current-page=\"pageNum\"\r\n          :page-size=\"pageSize\"\r\n          :total=\"tableData.total\"\r\n          @size-change=\"pageSizeChange\"\r\n          @current-change=\"pageCurrentChange\"\r\n          >\r\n        </el-pagination>\r\n      </div>\r\n      <div v-else class=\"router-view-bottom\"><div></div></div>\r\n      \r\n      <!-- 工单详情 -->\r\n      <el-dialog :visible.sync=\"dialogDetailVisible\" title=\"工单详情\" id=\"work-list-dialog\" :loading=\"dialogLoading\">\r\n        <h4 class=\"text-info\">已预约教室</h4>\r\n        <div v-if=\"detailData.classRooms\">\r\n          <el-card class=\"marb10\" :body-style=\"{'padding': '0 20px'}\">\r\n            <p>\r\n              <span><i class=\"fa fa-user\"></i>预约人：{{detailData.user_name}}</span>\r\n              <span class=\"marl10\"><i class=\"fa fa-tag marl10\"></i>实验名称：{{detailData.experiment_name}}</span>\r\n              <span class=\"marl10 fr\"><i class=\"fa fa-calendar marl10\"></i>预约时间：{{common._convertDate(detailData.create_time, \"yyyy年MM月dd日\")}}</span>\r\n            </p>\r\n            <el-card v-for=\"(item, index) in detailData.classRooms\" :key=\"`${index}已预约教室`\" class=\"marb10\" :body-style=\"{padding: '0 20px'} \">\r\n              <p>\r\n                <span><i class=\"fa fa-paperclip\"></i>地址：{{item.address}}</span>\r\n                <span class=\"marl10\"><i class=\"fa fa-paperclip marl10\"></i>编号：{{item.identifier}}</span>\r\n              <p>\r\n                <span>开始节次: {{item.timeTableRecord.begin_index}} &nbsp; 时间: {{common._convertDate(item.timeTableRecord.begin_time, \"yyyy年MM月dd日\")}}</span>\r\n                <span class=\"fr\">结束节次: {{item.timeTableRecord.end_index}} &nbsp; 时间: {{common._convertDate(item.timeTableRecord.end_time, \"yyyy年MM月dd日\")}}</span>\r\n              </p>\r\n            </el-card>\r\n          </el-card>\r\n        </div>\r\n\r\n        <h4 class=\"text-info\">冲突预约</h4>\r\n        <div v-if=\"detailData.conflictRecordVo\">\r\n          <el-card v-for=\"(item, index) in detailData.conflictRecordVo\" :key=\"`${index}已预约人`\" class=\"marb10\" :body-style=\"{'padding': '0 20px'}\">\r\n            <p>\r\n              <span><i class=\"fa fa-user\"></i>预约人：{{item.user_name}}</span>\r\n              <span class=\"marl10\"><i class=\"fa fa-tag marl10\"></i>实验名称：{{item.experiment_name}}</span>\r\n              <span class=\"marl10 fr\"><i class=\"fa fa-calendar marl10\"></i>预约时间：{{common._convertDate(item.create_time, \"yyyy年MM月dd日\")}}</span>\r\n            </p>\r\n            <div v-if=\"item.classRooms\">\r\n              <el-card v-for=\"(itemInner, indexInner) in item.classRooms\" :key=\"`${indexInner}冲突教室`\" class=\"marb10\" :body-style=\"{'padding': '0 20px'}\">\r\n              <p class=\"text-danger\"><i class=\"fa fa-home\"></i><span>地址：{{itemInner.address}} </span> <span class=\"marl10\"><i class=\"fa fa-paperclip marl10\"></i>编号：{{itemInner.identifier}}</span></p>\r\n              <p>\r\n                <span>开始节次: {{itemInner.timeTableRecord.begin_index}} &nbsp; 时间: {{common._convertDate(itemInner.timeTableRecord.begin_time, \"yyyy年MM月dd日\")}}</span>\r\n                <span class=\"fr\">结束节次: {{itemInner.timeTableRecord.end_index}} &nbsp; 时间: {{common._convertDate(itemInner.timeTableRecord.end_time, \"yyyy年MM月dd日\")}}</span>\r\n              </p>\r\n            </el-card>\r\n            </div>\r\n          </el-card>\r\n        </div>\r\n        <span slot=\"footer\">\r\n          <el-button type=\"default\" @click=\"dialogDetailVisible = false\">取 消</el-button>\r\n          <el-button type=\"warning\" :disabled=\"!common.checkAuthority('WorkList-reject', true)\" @click=\"rejectWorkList\">拒 绝</el-button>\r\n          <el-button type=\"primary\" :disabled=\"!common.checkAuthority('WorkList-agree', true)\" @click=\"confirmWorkList\">同 意</el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data () {\r\n      return {\r\n        typeTree: JSON.parse(sessionStorage.getItem(\"typeTree\")),\r\n        typeTreeProps: {\r\n          label: 'd_name',\r\n          value: 'id',\r\n          children: 'children'\r\n        },\r\n        modelList: null, //型号列表 在选择规格树后查询\r\n        searchForm: {\r\n          models: [],\r\n          type_id: null,\r\n          cur_status: null\r\n        },\r\n        \r\n        tableData: {\r\n          rows: [],\r\n          total: 0,\r\n        },\r\n        pageNum:  1,\r\n        pageSize: 10,\r\n\r\n        dialogLoading: false,\r\n        dialogDetailVisible: false,\r\n        tempId: null,\r\n        detailData: {},\r\n      }\r\n    },\r\n    created () {\r\n      // console.log(this.$store.state.authority)\r\n    },\r\n    mounted () {\r\n      if(this.common.checkAuthority(\"WorkList-list\", true)) {\r\n        this.getTableList()\r\n      }\r\n    },\r\n    methods: {\r\n      /**\r\n       * 根据搜索条件查询列表\r\n       * @return {[type]} [description]\r\n       */\r\n      getTableList() {\r\n        this.tableLoading = true\r\n\r\n        let data      = this.searchForm\r\n        data.pageNum  = this.pageNum\r\n        data.pageSize = this.pageSize\r\n        data.cur_status = 2\r\n        let config = {\r\n          method: \"post\",\r\n          url: `${this.common.basePath}/l_bespeak_record/list`,\r\n          data: JSON.parse(JSON.stringify(data))\r\n        }\r\n\r\n        if(this.searchForm.models && this.searchForm.models.length > 0) {\r\n          config.data.model_id = this.searchForm.models[this.searchForm.models.length - 1]\r\n        }\r\n        delete config.data.models\r\n        \r\n        this.axios(config).then((response) => {\r\n          this.tableData = response.data.data\r\n          this.$nextTick(_ => {\r\n            this.tableLoading = false\r\n          })\r\n        }).catch((errorMsg) => {\r\n          this.tableLoading = false\r\n          this.$message.error(errorMsg)\r\n        })\r\n      },\r\n      /**\r\n       * 清空 还原搜索表单\r\n       * @return {[type]} [description]\r\n       */\r\n      clearForm() {\r\n        this.searchForm = {\r\n          models: [],\r\n          type_id: null,\r\n          cur_status: null\r\n        }\r\n      },\r\n      pageSizeChange(val) {\r\n        this.pageSize = val\r\n        this.getTableList()\r\n      },\r\n      pageCurrentChange(val) {\r\n        this.pageNum = val\r\n        this.getTableList()\r\n      },\r\n      showDetail(row) {\r\n        this.getWorkDetail(row.id)\r\n      },\r\n      getWorkDetail (id) {\r\n        this.dialogLoading = true\r\n        let config = {\r\n          method: \"get\",\r\n          url: `${this.common.basePath}/l_bespeak_record/detail/${id}`,\r\n        }\r\n        this.axios(config).then((response) => {\r\n          this.tempId = id\r\n          this.detailData = response.data.data\r\n          this.dialogLoading = false\r\n          this.dialogDetailVisible = true\r\n        }).catch((errorMsg) => {\r\n          this.$message.error(errorMsg)\r\n          this.dialogDetailVisible = false\r\n          this.dialogLoading = false\r\n        })\r\n      },\r\n      /**\r\n       * 报废设备\r\n       * @param  {[type]} row [description]\r\n       * @return {[type]}     [description]\r\n       */\r\n      scrapDevice(row, type) {\r\n        this.common.scrapDevice(row, type).then( _ => {\r\n          this.getTableList()\r\n        }).catch(_ => {})\r\n      },\r\n      /**\r\n       * 点击规格树 将最终选择的规格进行型号查询\r\n       * @param  {[type]} val [description]\r\n       * @return {[type]}     [description]\r\n       */\r\n      cascaderChanged(val) {\r\n        this.searchForm.type_id = null\r\n        this.getModelList(val[val.length - 1])\r\n      },\r\n      /**\r\n       * 根据分类Id获取型号列表\r\n       * @return {[type]} [description]\r\n       */\r\n      getModelList(id) {\r\n        let config = {\r\n          method: \"get\",\r\n          url: `${this.common.basePath}/spec/select/model/public`,\r\n          params: {\r\n            id: id,\r\n            pageNum: 1,\r\n            pageSize: 999\r\n          }\r\n        }\r\n        this.axios(config).then((response) => {\r\n          this.modelList = response.data.data.rows\r\n          if(this.$refs.deviceForm) {\r\n            this.$refs.deviceForm.resetFields()\r\n          }\r\n        }).catch((errorMsg) => {\r\n          this.$message.error(errorMsg)\r\n        })\r\n      },\r\n      confirmWorkList () {\r\n        let config = {\r\n          method: \"get\",\r\n          url: `${this.common.basePath}/l_bespeak_record/agree/${this.tempId}`,\r\n        }\r\n        this.axios(config).then((response) => {\r\n          this.getTableList()\r\n          this.$message.success(response.data.meta.message)\r\n          this.dialogDetailVisible = false\r\n        }).catch((errorMsg) => {\r\n          this.$message.error(errorMsg)\r\n        })\r\n      },\r\n      rejectWorkList () {\r\n        let config = {\r\n          method: \"delete\",\r\n          url: `${this.common.basePath}/l_bespeak_record/reject/${this.tempId}`,\r\n        }\r\n        this.axios(config).then((response) => {\r\n          this.getTableList()\r\n          this.$message.success(response.data.meta.message)\r\n          this.dialogDetailVisible = false\r\n        }).catch((errorMsg) => {\r\n          this.$message.error(errorMsg)\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"less\">\r\n  #work-list-dialog {\r\n    .el-dialog__body {\r\n      padding-top: 0;\r\n    }\r\n    .el-card {\r\n      border-color: #adadad;\r\n    }\r\n  }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WorkList.vue?vue&type=template&id=21e66863&\"\nimport script from \"./WorkList.vue?vue&type=script&lang=js&\"\nexport * from \"./WorkList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WorkList.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"WorkList.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkList.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorkList.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}