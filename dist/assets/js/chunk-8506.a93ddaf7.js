(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8506"],{"0a50":function(e,t,a){},"1cad":function(e,t,a){e.exports=a.p+"263e75070edcfb14d01b443246914c45.jpg"},"3adb":function(e,t){e.exports="data:image/png;base64,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"},"4a9b":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"file-show-list-wrap"},[e.fileList&&e.fileList.length>0?o("div",e._l(e.fileList,function(t,i){return o("el-tag",{key:i+"文件展示",staticClass:"tag",attrs:{closable:e.closable},on:{close:function(a){e.$emit("handleClose",t)}}},["jpg"===t.name.split(".")[1]||"png"===t.name.split(".")[1]||"jpeg"===t.name.split(".")[1]||"gif"===t.name.split(".")[1]||"bmp"===t.name.split(".")[1]?o("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,target:"_blank",download:t.name}},[o("img",{staticClass:"thumbnail fl",attrs:{src:""+e.common.publicBasePath+t.path,onerror:e.errimage}}),o("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"mp4"===t.name.split(".")[1]||"rmvb"===t.name.split(".")[1]||"wmv"===t.name.split(".")[1]||"asf"===t.name.split(".")[1]||"avi"===t.name.split(".")[1]||"3gp"===t.name.split(".")[1]||"mpg"===t.name.split(".")[1]||"mkv"===t.name.split(".")[1]||"dvd"===t.name.split(".")[1]||"ogm"===t.name.split(".")[1]||"mpeg2"===t.name.split(".")[1]||"mpeg4"===t.name.split(".")[1]||"mpeg"===t.name.split(".")[1]||"mov"===t.name.split(".")[1]?o("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[o("img",{staticClass:"thumbnail fl",attrs:{src:a("1cad")}}),o("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"mp3"===t.name.split(".")[1]||"ogg"===t.name.split(".")[1]||"wav"===t.name.split(".")[1]||"ape"===t.name.split(".")[1]||"cda"===t.name.split(".")[1]||"midi"===t.name.split(".")[1]||"acc"===t.name.split(".")[1]||"mac"===t.name.split(".")[1]?o("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[o("img",{staticClass:"thumbnail fl",attrs:{src:a("b735")}}),o("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"doc"===t.name.split(".")[1]||"docx"===t.name.split(".")[1]?o("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[o("img",{staticClass:"thumbnail fl",attrs:{src:a("8a43")}}),o("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"xls"===t.name.split(".")[1]||"xlsx"===t.name.split(".")[1]?o("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[o("img",{staticClass:"thumbnail fl",attrs:{src:a("693b")}}),o("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"txt"===t.name.split(".")[1]?o("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[o("img",{staticClass:"thumbnail fl",attrs:{src:a("6919")}}),o("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"ppt"===t.name.split(".")[1]||"pptx"===t.name.split(".")[1]?o("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[o("img",{staticClass:"thumbnail fl",attrs:{src:a("d75b")}}),o("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):"zip"===t.name.split(".")[1]?o("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[o("img",{staticClass:"thumbnail fl",attrs:{src:a("d06b")}}),o("span",{staticClass:"fl name"},[e._v(e._s(t.name))])]):o("a",{style:e.isDownload?"":"pointer-events: none",attrs:{href:""+e.common.publicBasePath+t.path,download:t.name}},[o("img",{staticClass:"thumbnail fl",attrs:{src:a("4f13")}}),o("span",{staticClass:"fl name"},[e._v(e._s(t.name))])])])})):e._e()])},i=[],l={data:function(){return{errimage:'this.src="'+a("3adb")+'";this.οnerrοr=null'}},props:{fileList:{type:Array},closable:{type:Boolean,default:!1},isDownload:{type:Boolean,default:!0}},created:function(){},mounted:function(){},methods:{errorHandler:function(){return!1}}},s=l,n=(a("b562"),a("2877")),r=Object(n["a"])(s,o,i,!1,null,"022c7508",null);r.options.__file="FileShow.vue";t["a"]=r.exports},"4f13":function(e,t,a){e.exports=a.p+"7cc76cd11d9a9887bd57315a5f0cd288.jpg"},6919:function(e,t,a){e.exports=a.p+"2e4936c6128f1c3225b55b431b71db8a.jpg"},"693b":function(e,t,a){e.exports=a.p+"356c209a020157fa001eab7efcc7620a.jpg"},"8a43":function(e,t,a){e.exports=a.p+"557c778d422c6b562734853fc3b966e2.jpg"},b562:function(e,t,a){"use strict";var o=a("0a50"),i=a.n(o);i.a},b735:function(e,t,a){e.exports=a.p+"8701718ae16e5ff270067dee98eab889.jpg"},bb73:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap-box"},[a("el-card",{staticClass:"title-card"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("设备耗材")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"router-view-wrap"},[a("div",{staticClass:"router-view-content"},[e.common.checkAuthority("Consume-list",!0)?a("el-row",{staticClass:"padding-row"},[a("el-col",{attrs:{span:7}},[a("div",[a("el-button",{staticClass:"fill-width",attrs:{type:"primary",size:"mini",disabled:!e.common.checkAuthority("Consume-add",!0)},on:{click:function(t){e.addTree(null)}}},[e._v("添加顶级")])],1),e.treeData?a("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,i=t.data;return a("span",{staticClass:"fill-width"},[a("el-tooltip",{attrs:{enterable:!1,content:o.label,placement:"right-start"}},[a("div",{on:{mouseover:function(t){e.tempId=i.id},mouseout:function(t){e.tempId=null}}},[a("span",{class:{"text-primary":e.activeId==i.id}},[e._v("\n                    "+e._s(o.label)+"\n                    "),e.tempId==i.id?a("span",[e.common.checkAuthority("Consume-add",!0)?a("el-button",{attrs:{type:"text"},on:{click:function(t){t.stopPropagation(),e.addTree(i)}}},[e._v("添加次级")]):e._e(),e.common.checkAuthority("Consume-edit",!0)?a("el-button",{attrs:{type:"text"},on:{click:function(t){t.stopPropagation(),e.editTree(i)}}},[e._v("编辑")]):e._e(),e.common.checkAuthority("Consume-delete",!0)?a("el-button",{staticClass:"text-danger",attrs:{type:"text"},on:{click:function(t){t.stopPropagation(),e.deleteTree(i)}}},[e._v("删除")]):e._e()],1):e._e()])])])],1)}}])}):e._e()],1),e.common.checkAuthority("Consume-listType",!0)?a("el-col",{attrs:{span:17}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableData.rows,"show-header":!0}},[a("el-table-column",{attrs:{prop:"materialModel",label:"名称","show-overflow-tooltip":"",width:"120"}}),a("el-table-column",{attrs:{prop:"modelType",label:"类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.modelType?a("el-tag",[e._v("耗材")]):e._e(),2===t.row.modelType?a("el-tag",{attrs:{type:"success"}},[e._v("设备")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"amount",label:"库存",width:"100"}}),a("el-table-column",{attrs:{prop:"inStockAmount",label:"余量",width:"100"}}),a("el-table-column",{attrs:{prop:"description",label:"用途","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(a){e.showDetailDialog(t.row)}}},[e._v("查 看")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.common.checkAuthority("Consume-editType",!0)},on:{click:function(a){e.showModelDialog("edit",t.row)}}},[e._v("编 辑")]),a("el-button",{attrs:{type:"danger",size:"mini",disabled:!e.common.checkAuthority("Consume-deleteType",!0)},on:{click:function(a){e.deleteModel(t.row)}}},[e._v("删 除")])]}}])})],1)],1):a("el-col",{staticClass:"text-center text-info",attrs:{span:17}},[e._v(" 你无权查看此内容 ")])],1):a("div",{staticClass:"text-center text-info"},[e._v(" 你无权查看此内容 ")])],1),e.common.checkAuthority("Consume-list",!0)&&e.common.checkAuthority("Consume-listType",!0)?a("div",{staticClass:"router-view-bottom"},[a("div",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.common.checkAuthority("Consume-addType",!0)},on:{click:function(t){e.showModelDialog("new")}}},[e._v("新增型号")])],1),a("el-pagination",{staticClass:"fill-width",attrs:{background:"",layout:"total, sizes, prev, pager, next",total:e.tableData.total},on:{"size-change":e.handleSizeChanged,"current-change":e.handlePageChanged}})],1):a("div",{staticClass:"router-view-bottom"},[a("div")]),a("el-dialog",{attrs:{title:"耗材类型",visible:e.dialogTypeVisible,width:"50vw"},on:{"update:visible":function(t){e.dialogTypeVisible=t}}},[a("el-form",{ref:"typeForm",attrs:{model:e.typeForm,"label-width":"100px",rules:e.typeRules}},[a("el-form-item",{attrs:{label:"名称：",prop:"materialType"}},[a("el-input",{model:{value:e.typeForm.materialType,callback:function(t){e.$set(e.typeForm,"materialType",t)},expression:"typeForm.materialType"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTypeVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addTreeSubmit}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"耗材型号",visible:e.dialogModelVisible,width:"50vw"},on:{"update:visible":function(t){e.dialogModelVisible=t}}},[a("el-form",{ref:"modelForm",attrs:{model:e.modelForm,"label-width":"100px",rules:e.modelRules}},[a("el-form-item",{attrs:{label:"名称：",prop:"materialModel"}},[a("el-input",{model:{value:e.modelForm.materialModel,callback:function(t){e.$set(e.modelForm,"materialModel",t)},expression:"modelForm.materialModel"}})],1),a("el-form-item",{attrs:{label:"类型：",prop:"modelType"}},[a("el-select",{staticClass:"fill-width",attrs:{placeholder:"请选择类型"},model:{value:e.modelForm.modelType,callback:function(t){e.$set(e.modelForm,"modelType",t)},expression:"modelForm.modelType"}},e._l(e.modelTypeList,function(e,t){return a("el-option",{key:t+"类型",attrs:{value:e.id,label:e.name}})}))],1),a("el-form-item",{attrs:{label:"用途：",prop:"description"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.modelForm.description,callback:function(t){e.$set(e.modelForm,"description",t)},expression:"modelForm.description"}})],1),a("el-form-item",{attrs:{label:"注意事项：",prop:"attention"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.modelForm.attention,callback:function(t){e.$set(e.modelForm,"attention",t)},expression:"modelForm.attention"}})],1),"edit"==e.operateType?a("el-form-item",{attrs:{label:"附件："}},[a("file-show",{attrs:{fileList:e.modelForm.modelData,closable:!0},on:{handleClose:e.handleClose}}),a("upload",{attrs:{buttonText:"点击上传"},on:{uploadSuccess:function(t){e.uploadFileSuccess(t,8)}}})],1):e._e(),"edit"==e.operateType?a("el-form-item",{attrs:{label:"图片附件："}},[a("file-show",{attrs:{fileList:e.modelForm.imgData,closable:!0},on:{handleClose:e.handleClose}}),a("upload",{attrs:{fileTypes:["png","jpg"],buttonText:"点击上传"},on:{uploadSuccess:function(t){e.uploadFileSuccess(t,10)}}})],1):e._e(),"edit"==e.operateType?a("el-form-item",{attrs:{label:"视频附件："}},[a("file-show",{attrs:{fileList:e.modelForm.videoData,closable:!0},on:{handleClose:e.handleClose}}),a("upload",{attrs:{fileTypes:["mp4","avi","mpeg"],buttonText:"点击上传"},on:{uploadSuccess:function(t){e.uploadFileSuccess(t,9)}}})],1):e._e(),"edit"==e.operateType?a("span",{staticClass:"text-info"},[e._v('附件操作为实时操作, 只操作附件无需点击 "确定" 按钮')]):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogModelVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitModel}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"耗材型号详情",visible:e.dialogDetailVisible,width:"50vw"},on:{"update:visible":function(t){e.dialogDetailVisible=t}}},[a("el-form",{attrs:{model:e.detailData,"label-width":"90px","label-position":"left"}},[a("el-form-item",{attrs:{label:"名称："}},[a("span",[e._v(e._s(e.detailData.materialModel))])]),a("el-form-item",{attrs:{label:"类型："}},[1===e.detailData.modelType?a("el-tag",[e._v("耗材")]):e._e(),2===e.detailData.modelType?a("el-tag",{attrs:{type:"success"}},[e._v("设备")]):e._e()],1),a("el-form-item",{attrs:{label:"库存："}},[a("span",[e._v(e._s(e.detailData.amount))])]),a("el-form-item",{attrs:{label:"余量："}},[a("span",[e._v(e._s(e.detailData.inStockAmount))])]),a("el-form-item",{attrs:{label:"用途："}},[a("span",[e._v(e._s(e.detailData.description))])]),a("el-form-item",{attrs:{label:"附件："}},[a("file-show",{attrs:{fileList:e.detailData.modelData}})],1),a("el-form-item",{attrs:{label:"图片附件："}},[a("file-show",{attrs:{fileList:e.detailData.imgData}})],1),a("el-form-item",{attrs:{label:"视频附件："}},[a("file-show",{attrs:{fileList:e.detailData.videoData}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogDetailVisible=!1}}},[e._v("确 定")])],1)],1)],1)],1)},i=[],l=(a("7f7f"),a("cadf"),a("551c"),a("097d"),a("d443")),s=a("4a9b"),n={data:function(){var e=this;return{pageLoading:!1,tableLoading:!1,treeData:[],activeId:null,tempId:null,defaultProps:{children:"childrens",label:"materialType"},tableData:{rows:[],total:0},pageNum:1,pageSize:10,operateType:"new",dialogTypeVisible:!1,typeForm:{materialType:null},typeRules:{materialType:[{required:!0,message:"请输入名称",trigger:"blur"},{validator:function(t,a,o){e.common.wordNumberValid(t,a,o,"single")},trigger:"blur"}]},dialogModelVisible:!1,modelForm:{materialModel:null,description:null,attention:null,modelType:1},modelRules:{materialModel:[{required:!0,message:"请输入名称",trigger:"blur"},{validator:function(t,a,o){e.common.wordNumberValid(t,a,o,"single")},trigger:"blur"}],modelType:[{required:!0,message:"请选择",trigger:"change"}]},modelTypeList:[{name:"耗材",id:1},{name:"设备",id:2}],dialogDetailVisible:!1,detailData:{}}},components:{upload:l["a"],FileShow:s["a"]},created:function(){},mounted:function(){this.common.checkAuthority("Consume-list",!0)&&this.getTypeTree()},methods:{uploadFileSuccess:function(e,t){var a=this,o={name:e.name,path:e.path,associated_object:this.modelForm.id,ao_type:t},i={url:"".concat(this.common.basePath,"/c_literature"),method:"post",data:o};this.axios(i).then(function(e){a.$message({type:"success",message:"上传成功！"}),a.getModelDetail("modelForm",a.modelForm.id,"file")}).catch(function(e){a.$message.error(e)})},handleClose:function(e){var t=this,a={url:"".concat(this.common.basePath,"/c_literature/").concat(e.id),method:"delete"};this.$confirm("删除后需要重新上传","删除附件",{comfirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){t.axios(a).then(function(e){t.getModelDetail("modelForm",t.modelForm.id,"file")}).catch(function(e){t.$message.error(e)})}).catch(function(e){})},getModelDetail:function(e,t,a){var o=this,i=new Promise(function(i,l){var s={method:"post",url:"".concat(o.common.basePath,"/material_model/detail?id=").concat(t)};o.axios(s).then(function(t){"all"==a?o[e]=t.data.data:(a="file")&&(o[e].modelData=t.data.data.modelData,o[e].imgData=t.data.data.imgData,o[e].videoData=t.data.data.videoData),i("成功")}).catch(function(e){o.$message.error(e),l(e)})});return i},getTypeTree:function(){var e=this;this.pageLoading=!0;var t={method:"post",url:"".concat(this.common.basePath,"/material_type/tree"),data:{}};this.axios(t).then(function(t){e.treeData=t.data.data,!e.activeId&&(e.activeId=t.data.data[0].id),e.common.checkAuthority("Consume-listType",!0)&&e.getModelList(t.data.data[0].id),e.pageLoading=!1}).catch(function(t){e.pageLoading=!1,e.$message.error(t)})},addTree:function(e){this.operateType="new",this.dialogTypeVisible=!0,this.typeForm={materialType:null},e&&(this.typeForm.parent_id=e.id)},editTree:function(e){this.operateType="edit",this.dialogTypeVisible=!0,this.typeForm=JSON.parse(JSON.stringify({id:e.id,materialType:e.materialType}))},addTreeSubmit:function(e){var t=this,a={method:"post",url:"new"==this.operateType?"".concat(this.common.basePath,"/material_type/add"):"".concat(this.common.basePath,"/material_type/update"),data:this.typeForm};this.$refs.typeForm.validate(function(e){e?t.axios(a).then(function(e){t.$message.success(e.data.meta.message),t.dialogTypeVisible=!1,t.getTypeTree()}).catch(function(e){t.dialogTypeVisible=!1,t.$message.error(e)}):t.$message.error("请检查表单填写是否正确！")})},deleteTree:function(e){var t=this;this.typeForm=JSON.parse(JSON.stringify(e)),this.$confirm("当前删除的内容将无法找回","确认删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){var a={method:"post",url:"".concat(t.common.basePath,"/material_type/delete"),params:{id:t.typeForm.id}};t.axios(a).then(function(e){t.$message.success(e.data.meta.message),t.dialogTypeVisible=!1,t.activeId==t.typeForm.id&&(t.activeId=null),t.getTypeTree()}).catch(function(e){t.dialogTypeVisible=!1,t.$message.error(e)})}).catch(function(e){})},handleNodeClick:function(e,t){this.activeId=e.id,this.getModelList(this.activeId)},getModelList:function(e){var t=this;this.pageLoading=!0;var a={method:"post",url:"".concat(this.common.basePath,"/material_model/list"),data:{materialModel:null,materialType:e,pageNum:this.pageNum,pageSize:this.pageSize}};this.axios(a).then(function(e){t.tableData=e.data.data,t.pageLoading=!1}).catch(function(e){t.pageLoading=!1,t.$message.error(e)})},showModelDialog:function(e,t){var a=this;this.operateType=e,this.dialogModelVisible=!0,"edit"==e?this.getModelDetail("modelForm",t.id,"all"):this.modelForm={materialModel:null,description:null,attention:null,modelType:1},this.$nextTick(function(e){a.$refs.modelForm.clearValidate()})},submitModel:function(){var e=this,t={method:"post",url:"new"==this.operateType?"".concat(this.common.basePath,"/material_model/add"):"".concat(this.common.basePath,"/material_model/update"),data:JSON.parse(JSON.stringify(this.modelForm))};t.data.materialType=this.activeId,this.$refs.modelForm.validate(function(a){a?e.axios(t).then(function(t){e.$message.success(t.data.meta.message),e.dialogModelVisible=!1,e.getModelList(e.activeId)}).catch(function(t){e.$message.error(t)}):e.$message.error("请检查表单填写是否正确")})},deleteModel:function(e){var t=this;this.$confirm("当前删除的内容将无法找回","确认删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(a){var o={method:"post",url:"".concat(t.common.basePath,"/material_model/delete"),params:{id:e.id}};t.axios(o).then(function(e){t.$message.success(e.data.meta.message),t.getModelList(t.activeId)}).catch(function(e){t.$message.error(e)})}).catch(function(e){})},handleSizeChanged:function(e){this.pageSize=e,this.getModelList(this.activeId)},handlePageChanged:function(e){this.pageNum=e,this.getModelList(this.activeId)},showDetailDialog:function(e){var t=this;this.getModelDetail("detailData",e.id,"all").then(function(e){t.dialogDetailVisible=!0}).catch(function(e){})}}},r=n,c=a("2877"),d=Object(c["a"])(r,o,i,!1,null,null,null);d.options.__file="Consume.vue";t["default"]=d.exports},d06b:function(e,t,a){e.exports=a.p+"40509e9426c6f711f9d13b71e637e241.jpg"},d75b:function(e,t,a){e.exports=a.p+"5aa84d708ab9486f1ed8e3f17faccd77.jpg"}}]);
//# sourceMappingURL=chunk-8506.a93ddaf7.js.map