(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5084"],{"1cab":function(t,e,a){"use strict";var s=a("f752"),i=a.n(s);i.a},"23b7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrap-box"},[a("el-card",{staticClass:"title-card"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/lesson/testlist"}}},[t._v("实验列表")]),a("el-breadcrumb-item",{attrs:{to:{name:"TestDetail",params:{id:t.$route.params.experiment_id}}}},[t._v("实验详情")]),a("el-breadcrumb-item",[t._v("考勤任务详情")])],1)],1),a("div",{staticClass:"router-view-wrap"},[a("div",{staticClass:"router-view-content task-detail"},[a("attendance-taskdetail")],1)])],1)},i=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoad,expression:"isLoad"}]},[t.taskDetail?a("div",{staticClass:"router-view-content task-detail"},[a("el-card",[a("el-row",[a("el-col",{staticClass:"marb5",attrs:{span:12}},[t._v("\n          实验名称："+t._s(t.taskDetail.lab_name)+"  \n        ")]),a("el-col",{staticClass:"marb5",attrs:{span:12}},[t._v("\n          状态："+t._s(t.typeNum(t.taskDetail.status))+" \n          "),1==t.taskDetail.status?a("el-button",{attrs:{disabled:!t.common.checkAuthority("AttendanceTaskDetail_ReleaseTask",!0),type:"primary",size:"mini"},on:{click:function(e){t.taskChangeType(2)}}},[t._v("\n            "+t._s(t.common.checkAuthority("AttendanceTaskDetail_ReleaseTask")?t.common.checkAuthority("AttendanceTaskDetail_ReleaseTask").name:"")+"\n          ")]):t._e(),2==t.taskDetail.status?a("el-button",{attrs:{disabled:!t.common.checkAuthority("AttendanceTaskDetail_EndTask",!0),type:"primary",size:"mini"},on:{click:t.taskPauseType}},[t._v("\n            "+t._s(t.common.checkAuthority("AttendanceTaskDetail_EndTask")?t.common.checkAuthority("AttendanceTaskDetail_EndTask").name:"")+"\n          ")]):t._e(),3==t.taskDetail.status?a("el-button",{attrs:{disabled:!t.common.checkAuthority("AttendanceTaskDetail_StartTask",!0),type:"primary",size:"mini"},on:{click:t.taskPauseType}},[t._v("\n            "+t._s(t.common.checkAuthority("AttendanceTaskDetail_StartTask")?t.common.checkAuthority("AttendanceTaskDetail_StartTask").name:"")+"\n          ")]):t._e()],1),a("el-col",{staticClass:"marb5",attrs:{span:24}},[t._v("\n          打卡日期："+t._s(t.taskDetail.eTime?t.common._convertDate(t.taskDetail.eTime,"yyyy年MM月dd日"):"还未打卡")+" \n        ")]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[t._v("\n          二维码： "),a("span",{staticStyle:{color:"#71706f"}},[t._v("（点击鼠标右键可保存图片到本地）")]),a("qrcode",{staticClass:"qrcode-canvas-wrap mart5",attrs:{value:t.taskDetail.qr_code}})],1),a("el-col",{staticClass:"marb5",attrs:{span:24}},[t._v("\n          开启人姓名："+t._s(t.taskDetail.creator)+"\n        ")]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[t._v("\n          得分占比："+t._s(t.taskDetail.value)+"% \n        ")]),a("el-col",{staticClass:"marb5",attrs:{span:24}},[a("div",{staticClass:"fl"},[t._v("\n            考勤结果："+t._s(t.taskDetail.finish)+"/"+t._s(t.taskDetail.stay)+"\n          ")]),a("el-button",{staticClass:"fl marl10",attrs:{disabled:!t.common.checkAuthority("AttendanceTaskDetail_exportSheet",!0),type:"primary",size:"small"},on:{click:t.downloadSheetModule}},[t._v("\n            "+t._s(t.common.checkAuthority("AttendanceTaskDetail_exportSheet")?t.common.checkAuthority("AttendanceTaskDetail_exportSheet").name:"")+"\n          ")]),a("upload",{staticClass:"fl marl10",attrs:{size:"small",url:"/work/import",isDisabled:!t.common.checkAuthority("AttendanceTaskDetail_ImportResult",!0),fileTypes:["xls","xlsx"],buttonText:t.common.checkAuthority("AttendanceTaskDetail_ImportResult")?t.common.checkAuthority("AttendanceTaskDetail_ImportResult").name:""},on:{uploadSuccess:t.importSheet}})],1)],1)],1),a("el-card",{staticClass:"mart5 person-group-item"},[a("el-tabs",{model:{value:t.typeActiveName,callback:function(e){t.typeActiveName=e},expression:"typeActiveName"}},[a("el-tab-pane",{attrs:{label:"已打卡",name:"1"}},[t._l(t.yiCheckUserList,function(e,s){return t.yiCheckUserList&&t.yiCheckUserList.length?a("div",{staticClass:"person-group-item_w marb20"},[a("el-dropdown",{attrs:{"hide-on-click":!1,placement:"bottom-start"}},[a("div",{staticClass:"img-photo-fix wh50"},[a("img",{attrs:{src:e.headImg?e.headImg:"默认图",onerror:t.defaultImg(e.sex),width:"50px",height:"50px"}})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-row",{staticClass:"mar5 member-info-fix"},[a("el-col",{attrs:{span:9}},[a("p",[a("img",{attrs:{src:e.headImg?e.headImg:"默认图",onerror:t.defaultImg(e.sex),width:"100px",height:"100px"}})])]),a("el-col",{attrs:{span:15}},[a("p",[t._v("姓名："+t._s(e.name?e.name:"无"))]),a("p",[t._v("工/学号："+t._s(e.account?e.account:"无"))]),a("p",[t._v("手机："+t._s(e.phoneNumber?e.phoneNumber:"无"))]),a("p",[t._v("院系："+t._s(e.faculty?e.faculty:"无"))]),a("p",[t._v("邮箱："+t._s(e.mail?e.mail:"无"))])])],1)],1)],1)],1):t._e()}),t.yiCheckUserList.length?t._e():a("div",{staticClass:"mar10"},[t._v("暂无")])],2),a("el-tab-pane",{attrs:{label:"未打卡",name:"2"}},[t._l(t.weiCheckUserList,function(e,s){return t.weiCheckUserList&&t.weiCheckUserList.length?a("div",{staticClass:"person-group-item_w marb20"},[a("el-dropdown",{attrs:{"hide-on-click":!1,placement:"bottom-start"}},[a("div",{staticClass:"img-photo-fix wh50"},[a("img",{attrs:{src:e.headImg?e.headImg:"默认图",onerror:t.defaultImg(e.sex),width:"50px",height:"50px"}})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-row",{staticClass:"mar5 member-info-fix"},[a("el-col",{attrs:{span:9}},[a("p",[a("img",{attrs:{src:e.headImg?e.headImg:"默认图",onerror:t.defaultImg(e.sex),width:"100px",height:"100px"}})])]),a("el-col",{attrs:{span:15}},[a("p",[t._v("姓名："+t._s(e.name?e.name:"无"))]),a("p",[t._v("工/学号："+t._s(e.account?e.account:"无"))]),a("p",[t._v("手机："+t._s(e.phoneNumber?e.phoneNumber:"无"))]),a("p",[t._v("院系："+t._s(e.faculty?e.faculty:"无"))]),a("p",[t._v("邮箱："+t._s(e.mail?e.mail:"无"))])])],1)],1)],1)],1):t._e()}),t.weiCheckUserList.length?t._e():a("div",{staticClass:"mar10"},[t._v("暂无")])],2)],1)],1)],1):t._e()])},c=[],o=(a("ac6a"),a("cadf"),a("551c"),a("097d"),a("d443")),r=a("d7b0"),l={components:{upload:o["a"],qrcode:r["a"]},data:function(){return{taskDetail:null,checkUserList:[],yiCheckUserList:[],weiCheckUserList:[],isLoad:!0,typeActiveName:"1"}},computed:{},mounted:function(){this.getQueryTaskDetail(),this.getQueryCheckUserList()},methods:{defaultImg:function(t){return 1==t?'this.src="'+a("e93b")+'"':'this.src="'+a("e0a3")+'"'},typeNum:function(t){switch(t){case 1:return"未开启";case 2:return"进行中";case 3:return"已结束"}},getQueryTaskDetail:function(){var t=this;this.axios.get("".concat(this.common.basePath,"/work/info/"),{params:{task_id:this.$route.params.task_id}}).then(function(e){t.taskDetail=e.data.data,t.isLoad=!1}).catch(function(e){t.$message.error(e),t.isLoad=!1})},getQueryCheckUserList:function(){var t=this;this.axios.get("".concat(this.common.basePath,"/work/check/taskId"),{params:{id:this.$route.params.task_id}}).then(function(e){t._checkUserList(e.data.data)}).catch(function(e){t.$message.error(e)})},_checkUserList:function(t){var e=this;this.yiCheckUserList=[],this.weiCheckUserList=[],t.forEach(function(t){1==t.status?e.yiCheckUserList.push(t):2==t.status&&e.weiCheckUserList.push(t)})},taskChangeType:function(t){var e=this;this.axios.patch("".concat(this.common.basePath,"/task/").concat(this.$route.params.task_id),{cur_status:t}).then(function(t){e.getQueryTaskDetail()}).catch(function(t){e.$message.error(t)})},taskPauseType:function(){var t=this;this.axios.get("".concat(this.common.basePath,"/task/pause"),{params:{id:this.$route.params.task_id}}).then(function(e){t.getQueryTaskDetail()}).catch(function(e){t.$message.error(e)})},importSheet:function(){this.getQueryTaskDetail()},downloadSheetModule:function(){var t=this;this.axios.get("".concat(this.common.basePath,"/work/export"),{params:{task_id:this.$route.params.task_id},responseType:"blob"}).then(function(e){t.common._fileBold(e),t.$message.success("下载成功")}).catch(function(e){t.$message.error(e)})}}},m=l,u=(a("1cab"),a("2877")),h=Object(u["a"])(m,n,c,!1,null,null,null);h.options.__file="AttendanceTaskDetailCom.vue";var d=h.exports,p={components:{"attendance-taskdetail":d},data:function(){return{}},computed:{},mounted:function(){},methods:{}},k=p,_=Object(u["a"])(k,s,i,!1,null,null,null);_.options.__file="AttendanceTaskDetail.vue";e["default"]=_.exports},f752:function(t,e,a){}}]);
//# sourceMappingURL=chunk-5084.8e1a11da.js.map