(function(e){function t(t){for(var a,s,i=t[0],c=t[1],l=t[2],u=0,d=[];u<i.length;u++)s=i[u],o[s]&&d.push(o[s][0]),o[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);h&&h(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var i=n[s];0!==o[i]&&(a=!1)}a&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},s={app:0},o={app:0},r=[];function i(e){return c.p+"assets/js/"+({}[e]||e)+"."+{1125:"1073671a",5949:"980c452a","18f8":"b1ca9451","1f54":"7e6cdb73","2c82":"7f2b9c3a","2e3e":"2e3c634c","62ee":"7205f83e","79ac":"3c1909c3","838a":"4d29c79f","9c88":"6c9ef9d9",a8c0:"a13db0c3","chunk-001f":"f49e1457","chunk-05f8":"6f4cad89","chunk-067c":"5b450800","chunk-07b1":"b90c559a","chunk-0bbf":"2324ed88","chunk-0c98":"d67e5367","chunk-0d16":"1f81ab97","chunk-0f8f":"1805d8cf","chunk-1196":"f61bf763","chunk-127b":"e429c8b0","chunk-14a1":"661c6821","chunk-1923":"bdf0fd27","chunk-1c35":"d839554c","chunk-1fc8":"6c73af4e","chunk-20db":"d21da1ef","chunk-23c1":"1886c83a","chunk-25bf":"db6d4c98","chunk-26d7":"009cca18","chunk-2974":"a8271ae9","chunk-2a4a":"54631085","chunk-2c37":"c8b85a54","chunk-2eca":"f2d00b6d","chunk-320c":"04665347","chunk-3876":"fc7ea75b","chunk-3a38":"67c10268","chunk-3a4a":"1977cb21","chunk-4624":"77dd0698","chunk-47a1":"97539fc8","chunk-47ac":"99c67c62","chunk-48f7":"1a96921b","chunk-4b06":"b4e145ba","chunk-4c5c":"1e1484f7","chunk-5084":"8e1a11da","chunk-53b6":"bdb559f2","chunk-546a":"6123aea0","chunk-54ee":"c03db7a1","chunk-5765":"4d527531","chunk-5ff4":"51cca3a7","chunk-619f":"05948877","chunk-61e2":"ebfaf1bf","chunk-65e2":"d0c65ec8","chunk-686a":"2fc7f0b8","chunk-699a":"0e18c218","chunk-69f5":"81159b73","chunk-6c4b":"8142749c","chunk-6d88":"7e162233","chunk-711d":"35ba9180","chunk-7191":"945d0377","chunk-7249":"c333d677","chunk-730a":"ef7d6ed3","chunk-74e7":"26e99ce8","chunk-794c":"153a7fea","chunk-7be6":"f461c4c3","chunk-7c1f":"d46da7a2","chunk-7d18":"d730fc94","chunk-7fef":"8c414bdc","chunk-8506":"a93ddaf7","chunk-90c9":"8780c852","chunk-91cd":"5de9d5dc","chunk-9620":"26b683ab","chunk-9fc5":"453a009c","chunk-b51f":"19705c64","chunk-b6f3":"aa2d5294","chunk-bb4c":"ce8bee03","chunk-c45c":"5ec54745","chunk-c995":"4893b6f6","chunk-d3c1":"1229cc4e","chunk-d757":"b83aec80","chunk-dfdc":"0f47e855","chunk-e561":"f1c62082","chunk-e909":"92130bd9","chunk-460c":"6b14b3e4","chunk-dc68":"51b341a1","chunk-eb6e":"9cf4937a","chunk-ee1f":"a674e1f9",d2f3:"dccf5cbd",f566:"8fa18299"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-001f":1,"chunk-05f8":1,"chunk-067c":1,"chunk-07b1":1,"chunk-0bbf":1,"chunk-0c98":1,"chunk-0d16":1,"chunk-0f8f":1,"chunk-1196":1,"chunk-127b":1,"chunk-14a1":1,"chunk-1923":1,"chunk-1c35":1,"chunk-1fc8":1,"chunk-20db":1,"chunk-23c1":1,"chunk-25bf":1,"chunk-2974":1,"chunk-2a4a":1,"chunk-2c37":1,"chunk-2eca":1,"chunk-320c":1,"chunk-3876":1,"chunk-3a38":1,"chunk-3a4a":1,"chunk-4624":1,"chunk-47a1":1,"chunk-47ac":1,"chunk-48f7":1,"chunk-4b06":1,"chunk-4c5c":1,"chunk-5084":1,"chunk-53b6":1,"chunk-546a":1,"chunk-54ee":1,"chunk-5765":1,"chunk-5ff4":1,"chunk-619f":1,"chunk-61e2":1,"chunk-65e2":1,"chunk-686a":1,"chunk-699a":1,"chunk-69f5":1,"chunk-6c4b":1,"chunk-6d88":1,"chunk-711d":1,"chunk-7191":1,"chunk-7249":1,"chunk-730a":1,"chunk-74e7":1,"chunk-794c":1,"chunk-7be6":1,"chunk-7c1f":1,"chunk-7d18":1,"chunk-7fef":1,"chunk-8506":1,"chunk-90c9":1,"chunk-91cd":1,"chunk-9620":1,"chunk-9fc5":1,"chunk-b51f":1,"chunk-b6f3":1,"chunk-bb4c":1,"chunk-c45c":1,"chunk-c995":1,"chunk-d3c1":1,"chunk-d757":1,"chunk-dfdc":1,"chunk-e909":1,"chunk-460c":1,"chunk-dc68":1,"chunk-eb6e":1,"chunk-ee1f":1};s[e]?t.push(s[e]):0!==s[e]&&n[e]&&t.push(s[e]=new Promise(function(t,n){for(var a="assets/css/"+({}[e]||e)+"."+{1125:"31d6cfe0",5949:"31d6cfe0","18f8":"31d6cfe0","1f54":"31d6cfe0","2c82":"31d6cfe0","2e3e":"31d6cfe0","62ee":"31d6cfe0","79ac":"31d6cfe0","838a":"31d6cfe0","9c88":"31d6cfe0",a8c0:"31d6cfe0","chunk-001f":"9f555a48","chunk-05f8":"7f32e731","chunk-067c":"8f603ce4","chunk-07b1":"17660906","chunk-0bbf":"c82ffba5","chunk-0c98":"de07d43f","chunk-0d16":"48c78326","chunk-0f8f":"9773c83e","chunk-1196":"2013b703","chunk-127b":"fa418d60","chunk-14a1":"092cd62e","chunk-1923":"238dba35","chunk-1c35":"7a8ee398","chunk-1fc8":"5635aece","chunk-20db":"437050a5","chunk-23c1":"52f0ac93","chunk-25bf":"259c49e5","chunk-26d7":"31d6cfe0","chunk-2974":"1b7cd685","chunk-2a4a":"13581e7a","chunk-2c37":"7c8df77e","chunk-2eca":"b692006d","chunk-320c":"564241f6","chunk-3876":"1defebce","chunk-3a38":"f360c01e","chunk-3a4a":"46930613","chunk-4624":"e30e656d","chunk-47a1":"1b7cd685","chunk-47ac":"7efc174a","chunk-48f7":"32900a92","chunk-4b06":"191f0eee","chunk-4c5c":"0cd11fda","chunk-5084":"db88c80f","chunk-53b6":"5e6f8a36","chunk-546a":"a5583166","chunk-54ee":"a7be7530","chunk-5765":"cc1737ef","chunk-5ff4":"8313462b","chunk-619f":"6db6da22","chunk-61e2":"23b35daa","chunk-65e2":"269f1905","chunk-686a":"fc21c7c7","chunk-699a":"aa23fb57","chunk-69f5":"a3d8e7e6","chunk-6c4b":"50981908","chunk-6d88":"cf483048","chunk-711d":"275856fb","chunk-7191":"f7105c01","chunk-7249":"06e3135f","chunk-730a":"39c3073a","chunk-74e7":"d63b9797","chunk-794c":"1b3d7261","chunk-7be6":"bc5c5580","chunk-7c1f":"46bee619","chunk-7d18":"4fa36d96","chunk-7fef":"ac7f0732","chunk-8506":"1b7cd685","chunk-90c9":"6e4b12c4","chunk-91cd":"63c120fc","chunk-9620":"2d3a0e25","chunk-9fc5":"b64dc956","chunk-b51f":"5e0fa9f1","chunk-b6f3":"9cab8a8c","chunk-bb4c":"450591d9","chunk-c45c":"b9d7a543","chunk-c995":"2c6e9102","chunk-d3c1":"90dcbd21","chunk-d757":"03ab80ce","chunk-dfdc":"6f78cc4b","chunk-e561":"31d6cfe0","chunk-e909":"09403dcd","chunk-460c":"b7ea1259","chunk-dc68":"0b96b190","chunk-eb6e":"efb35354","chunk-ee1f":"0d00ddfa",d2f3:"31d6cfe0",f566:"31d6cfe0"}[e]+".css",s=c.p+a,o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var i=o[r],l=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(l===a||l===s))return t()}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){i=u[r],l=i.getAttribute("data-href");if(l===a||l===s)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var a=t&&t.target&&t.target.src||s,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.request=a,n(o)},d.href=s;var h=document.getElementsByTagName("head")[0];h.appendChild(d)}).then(function(){s[e]=0}));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var r=new Promise(function(t,n){a=o[e]=[t,n]});t.push(a[2]=r);var l,u=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=i(e),l=function(t){d.onerror=d.onload=null,clearTimeout(h);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src,r=new Error("Loading chunk "+e+" failed.\n("+a+": "+s+")");r.type=a,r.request=s,n[1](r)}o[e]=void 0}};var h=setTimeout(function(){l({type:"timeout",target:d})},12e4);d.onerror=d.onload=l,u.appendChild(d)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var h=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("04f5"),s=n.n(a);s.a},"04f5":function(e,t,n){},"26e1":function(e,t,n){"use strict";var a=n("e454"),s=n.n(a);s.a},"3ac8":function(e,t,n){},"41f3":function(e,t,n){"use strict";var a=n("a0ec"),s=n.n(a);s.a},"45fd":function(e,t,n){},"473c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"feedback"},[n("div",{staticClass:"build-form"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:14}},[n("div",{staticClass:"form-box"},[n("el-form",{ref:"buildForm",staticClass:"demo-dynamic",attrs:{model:e.buildForm,"label-width":"100px",size:"middle"}},[n("el-form-item",{attrs:{prop:"name",label:"标题：",rules:[{required:!0,message:"请输入标题",trigger:"blur"}]}},[n("el-input",{model:{value:e.buildForm.name,callback:function(t){e.$set(e.buildForm,"name",t)},expression:"buildForm.name"}})],1),n("el-form-item",{attrs:{prop:"enclosure",label:"图片：",rules:[{required:!0,message:"请上传图片",trigger:"blur"}]}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.common.msBasePath+"/file/uplode","show-file-list":!1,"auto-upload":!0,multiple:"",limit:9999,"before-upload":e.beforeAvatarUpload,"http-request":e.uploadFile}},[e.buildForm.enclosure?n("img",{staticClass:"avatar",attrs:{src:"https://static.crledu.com"+e.buildForm.enclosure}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),n("el-form-item",{attrs:{prop:"desc",label:"问题描述：",rules:[{required:!0,message:"请输入问题描述的内容",trigger:"blur"},{min:1,max:255,message:"长度在 1 到 255 个字符",trigger:"blur"}]}},[n("el-input",{attrs:{type:"textarea",rows:"6"},model:{value:e.buildForm.desc,callback:function(t){e.$set(e.buildForm,"desc",t)},expression:"buildForm.desc"}})],1),n("el-form-item",{attrs:{prop:"tel",label:"你的手机：",rules:[{required:!0,message:"请输入你的手机号",trigger:"blur"},{pattern:/(^1[3|4|5|7|8]\d{9}$)|(^09\d{8}$)/,message:"手机号不符合规范"}]}},[n("el-input",{model:{value:e.buildForm.tel,callback:function(t){e.$set(e.buildForm,"tel",t)},expression:"buildForm.tel"}})],1)],1)],1)]),n("el-col",{attrs:{span:10}},[n("div",{staticClass:"function-box"},[n("el-form",{staticClass:"function-box-title"},[n("el-form-item",{staticClass:"is-required",attrs:{label:"发生位置："}})],1),n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",attrs:{data:e.projectFunctionList,"show-checkbox":"","node-key":"id","default-expanded-keys":e.expandedKeysArr,"highlight-current":"",props:e.defaultFunctionProps},on:{"node-click":e.handleNodeClick,check:e.handleNodeCheckedClick},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,s=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",{staticClass:"fl",on:{click:function(e){}}},[e._v(e._s(a.label))]),0==s.childrens.length?n("i",{ref:"arrow"+s.id,staticClass:"el-icon-arrow-right fr i-mart2"}):e._e(),0!=s.childrens.length?n("i",{ref:"arrow"+s.id,staticClass:"fr i-mart2"}):e._e()])}}])})],1)])],1),n("div",{staticClass:"build-btns"},[n("el-button",{attrs:{size:"small"},on:{click:e.displayDialog}},[e._v("取 消")]),n("el-button",{attrs:{size:"small"},on:{click:function(t){e.resetForm("buildForm")}}},[e._v("重 置")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.submitForm("buildForm")}}},[e._v("提 交")])],1)],1)])},s=[],o=(n("7f7f"),{data:function(){return{loading:!1,buildForm:{enclosure:null,desc:null,tel:null,name:null},projectFunctionList:null,defaultFunctionProps:{children:"childrens",label:"name"},addList:null,expandedKeysArr:[]}},props:{dialogVisible:Boolean},methods:{displayDialog:function(){this.$emit("changeDialogVisible",!1)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,n="image/png"===e.type;return t||n||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),t||n},uploadFile:function(e){var t=this,n=e.file,a=new FormData;a.append("multipartFile",n),this.axios.post("".concat(this.common.msBasePath,"/other/upload"),a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){t.$message.success("文件上传成功！！",20),t.buildForm.enclosure=e.data.data}).catch(function(e){t.$message.error(e)})},getCheckedKeys:function(){this.function=this.$refs.tree.getCheckedKeys()},resetChecked:function(){this.$refs.tree.setCheckedKeys([])},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(t.getCheckedKeys(),0!=t.function.length){var n={title:t.buildForm.name,enclosure:t.buildForm.enclosure,detailed:t.buildForm.desc,phone:t.buildForm.tel,function:t.function.join(","),project_id:t.activeIndex?t.activeIndex:null,deploy_id:1};t.axios.post("".concat(t.common.msBasePath,"/other/insert"),n).then(function(e){0===e.data.meta.code?(t.$message.success("新建反馈信息成功！！！",20),t.$emit("changeDialogVisible",!1)):t.$message.error(e.data.meta.message,20)}).catch(function(e){t.$message.error(e)})}else t.$message.error("新建反馈信息的发生位置未选择！！！")})},resetForm:function(e){this.getFunctionList(),this.resetChecked(),this.$refs[e].resetFields()},getFunctionList:function(){var e=this;this.loading=!0,this.axios.get("".concat(this.common.msBasePath,"/other/show"),{params:{id:null,deploy_id:6}}).then(function(t){0===t.data.meta.code?e.projectFunctionList=t.data.data?t.data.data:null:e.$message.error(t.data.meta.message,20),e.loading=!1}).catch(function(t){e.$message.error(t),e.loading=!1})},handleNodeClick:function(e,t,n){var a=this;0===e.childrens.length&&(this.loading=!0,this.axios.get("".concat(this.common.msBasePath,"/other/show"),{params:{id:e.id,deploy_id:6}}).then(function(t){if(0===t.data.meta.code){var n=t.data.data?t.data.data:null;if(0===n.length){a.$message.info("没有下一级啦...",20);var s="arrow"+e.id;a.$refs[s].style.display="none"}else{a.expandedKeysArr.push(e.id),a.expandedKeysArr.length>1&&(a.expandedKeysArr=a.expandedKeysArr.slice(a.expandedKeysArr.length-1)),e.childrens||a.$set(e,"childrens",[]);for(var o=0;o<n.length;o++)e.childrens.push(n[o])}}else a.$message.error(t.data.meta.message,20);setTimeout(function(){a.loading=!1},100)}).catch(function(e){a.$message.error(e),a.loading=!1}))},handleNodeCheckedClick:function(e,t){var n=this;t.checkedKeys.indexOf(e.id)>-1&&0===e.childrens.length&&(this.loading=!0,this.axios.get("".concat(this.common.msBasePath,"/other/show"),{params:{id:e.id,deploy_id:6}}).then(function(t){if(0===t.data.meta.code){var a=t.data.data?t.data.data:null;if(0===a.length){n.$message.info("没有下一级啦...",20);var s="arrow"+e.id;n.$refs[s].style.display="none"}else{n.expandedKeysArr.push(e.id),n.expandedKeysArr.length>1&&(n.expandedKeysArr=n.expandedKeysArr.slice(n.expandedKeysArr.length-1)),e.childrens||n.$set(e,"childrens",[]);for(var o=0;o<a.length;o++)e.childrens.push(a[o])}}else n.$message.error(t.data.meta.message,20);setTimeout(function(){n.loading=!1},100)}).catch(function(e){n.$message.error(e),n.loading=!1}))}},mounted:function(){this.$refs["buildForm"]&&this.$refs["buildForm"].resetFields(),this.getFunctionList(),console.log(this.dialogVisible)}}),r=o,i=(n("784b"),n("2877")),c=Object(i["a"])(r,a,s,!1,null,null,null);c.options.__file="Feedback.vue";t["default"]=c.exports},5089:function(e,t,n){"use strict";var a=n("f638"),s=n.n(a);s.a},"51da":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("55dd"),n("f751"),n("cadf"),n("551c"),n("097d");var a=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n(e.layout,{tag:"component"}),n("el-dialog",{attrs:{title:"设备二维码",visible:e.$store.state.dialogQRcodeVisible,width:"300px"},on:{"update:visible":function(t){e.$set(e.$store.state,"dialogQRcodeVisible",t)}}},[n("qrcode",{staticClass:"qrcode-canvas-wrap",attrs:{value:e.$store.state.QRcodeValue}}),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$store.commit("exchangeShowStatus",!1)}}},[e._v("确 定")])],1)],1)],1)},o=[],r=(n("ac6a"),n("7f7f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"blank-wrap"}},[n("router-view")],1)}),i=[],c={},l=c,u=(n("d0d8"),n("2877")),d=Object(u["a"])(l,r,i,!1,null,"2df31f4c",null);d.options.__file="BlankLayout.vue";var h,m,p,f,g=d.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"wapper"}},[a("div",{staticClass:"header-wrap"},[e._m(0),a("div",{staticClass:"left-button-icon"},[a("el-button",{staticClass:"el-icon-button",attrs:{circle:"",title:"说明书"},on:{click:function(t){e.$router.push({name:"InstructionsPage"})}}},[a("i",{staticClass:"fa fa-book"})]),a("el-button",{staticClass:"el-icon-button",attrs:{circle:"",title:"反馈/报错"},on:{click:function(t){e.dialogVisible=!0}}},[a("i",{staticClass:"el-icon-question"})])],1),e.userBaseInfo?a("div",{staticClass:"mid-button-icon"},[a("el-dropdown",{staticClass:"el-icon-button",on:{command:e.dropdownClicked}},[a("span",{staticClass:"el-dropdown-link"},[a("el-avatar",{staticClass:"marr5 fl",attrs:{size:40,src:e.common.filePath+e.userBaseInfo.head_img}},[1===e.userBaseInfo.sex?a("img",{attrs:{src:n("e93b"),height:"40",width:"40"}}):2===e.userBaseInfo.sex?a("img",{attrs:{src:n("e0a3"),height:"40",width:"40"}}):a("img",{attrs:{src:n("e93b")}})]),a("el-link",{staticClass:"fl user_name",attrs:{underline:!1}},[e._v(e._s(e.userBaseInfo.user_name))])],1),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"base_info"}},[e._v("基本信息")]),a("el-dropdown-item",{attrs:{command:"info"}},[e._v("修改信息")]),a("el-dropdown-item",{attrs:{command:"pass"}},[e._v("更改密码")])],1)],1)],1):e._e(),a("div",{staticClass:"right-button-group"},[a("el-button",{staticClass:"el-icon-button",attrs:{circle:"",title:"前往登录"},on:{click:function(t){e.$router.push({name:"Login"})}}},[a("i",{staticClass:"fa fa-sign-in"})]),a("el-button",{staticClass:"el-icon-button",attrs:{circle:"",title:"切换导航"},on:{click:e.changeMode}},[a("i",{staticClass:"fa fa-exchange"})])],1)]),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"content-wrap-row"},[a("transition",{attrs:{name:"el-zoom-in-top"}},["horizontal"==e.navMode?a("nav-bar",{attrs:{showType:e.navMode,resource:e.resourceList}}):e._e()],1),a("transition",{attrs:{name:"el-zoom-in-bottom"}},["vertical"==e.navMode?a("el-col",{staticClass:"nav-bar-vertical nav-bg",attrs:{span:3}},[a("nav-bar",{attrs:{showType:e.navMode,resource:e.resourceList}})],1):e._e()],1),a("el-col",{class:{"content-vertical":"vertical"==e.navMode},attrs:{span:"vertical"==e.navMode?21:24}},[a("div",{ref:"contentWrap",staticClass:"content-wrap",class:{"vertical-box":"vertical"==e.navMode,"horizontal-box":"horizontal"==e.navMode}},[e.dataReady?a("router-view",{directives:[{name:"loading",rawName:"v-loading",value:e.mainLoading,expression:"mainLoading"}]}):e._e()],1)])],1)],1),a("el-dialog",{attrs:{title:"新建反馈信息",visible:e.dialogVisible,width:"800px",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("build-feedback",{attrs:{dialogVisible:e.dialogVisible},on:{changeDialogVisible:e.changeDialogVisible}})],1),a("el-dialog",{attrs:{title:e.editPassword?"修改密码":"修改用户信息",visible:e.personDialogVisible,width:e.editPassword?"500px":"800px",center:""},on:{"update:visible":function(t){e.personDialogVisible=t}}},[a("el-form",{ref:"personForm",attrs:{model:e.personForm,rules:e.rules,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[e.editPassword?e._e():a("el-form-item",{attrs:{label:"工号/学号：",prop:"account"}},[a("span",[e._v(e._s(e.personForm.account))])]),e.editPassword?e._e():a("el-form-item",{attrs:{label:"姓名：",prop:"user_name"}},[a("el-input",{model:{value:e.personForm.user_name,callback:function(t){e.$set(e.personForm,"user_name",t)},expression:"personForm.user_name"}})],1)],1),a("el-col",{attrs:{span:12}},[e.editPassword?e._e():a("el-form-item",{attrs:{label:"头像：",prop:"head_img"}},[a("crop-avatar",{attrs:{fileTypes:["png","jpg"],size:"mini",avatar:e.personForm.head_img},on:{uploadSuccess:e.uploadAvatarSuccess}})],1)],1),a("el-col",{attrs:{span:12}},[e.editPassword?e._e():a("el-form-item",{attrs:{label:"年级：",prop:"grade_num"}},[a("el-input",{attrs:{type:"number"===typeof e.personForm.grade_num?"number":""},model:{value:e.personForm.grade_num,callback:function(t){e.$set(e.personForm,"grade_num",t)},expression:"personForm.grade_num"}},[a("template",{slot:"append"},[e._v("届")])],2)],1)],1),a("el-col",{attrs:{span:12}},[e.editPassword?e._e():a("el-form-item",{attrs:{label:"班级：",prop:"class_num"}},[a("el-input",{attrs:{type:"number"===typeof e.personForm.class_num?"number":""},model:{value:e.personForm.class_num,callback:function(t){e.$set(e.personForm,"class_num",t)},expression:"personForm.class_num"}},[a("template",{slot:"append"},[e._v("班")])],2)],1)],1),a("el-col",{attrs:{span:24}},[e.editPassword?a("el-form-item",{attrs:{label:"原密码：",prop:"oldPassword"}},[a("el-input",{attrs:{type:"password","show-password":!0,palcehoder:"请同时输入原密码和新密码才能正确提交"},model:{value:e.personForm.oldPassword,callback:function(t){e.$set(e.personForm,"oldPassword",t)},expression:"personForm.oldPassword"}})],1):e._e()],1),a("el-col",{attrs:{span:24}},[e.editPassword?a("el-form-item",{attrs:{label:"新密码：",prop:"newPassword"}},[a("el-input",{attrs:{type:"password","show-password":!0,palcehoder:"请同时输入原密码和新密码才能正确提交"},model:{value:e.personForm.newPassword,callback:function(t){e.$set(e.personForm,"newPassword",t)},expression:"personForm.newPassword"}})],1):e._e()],1),a("el-col",{attrs:{span:24}},[e.editPassword?a("el-form-item",{attrs:{label:"确认密码：",prop:"newPasswordAgain"}},[a("el-input",{attrs:{type:"password","show-password":!0,palcehoder:"请再次输入新密码"},model:{value:e.personForm.newPasswordAgain,callback:function(t){e.$set(e.personForm,"newPasswordAgain",t)},expression:"personForm.newPasswordAgain"}})],1):e._e()],1),a("el-col",{attrs:{span:12}},[e.editPassword?e._e():a("el-form-item",{attrs:{label:"性别：",prop:"sex"}},[a("el-select",{staticClass:"fill-width",model:{value:e.personForm.sex,callback:function(t){e.$set(e.personForm,"sex",t)},expression:"personForm.sex"}},[a("el-option",{attrs:{value:1,label:"男"}}),a("el-option",{attrs:{value:2,label:"女"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[e.editPassword?e._e():a("el-form-item",{attrs:{label:"入校时间：",prop:"admission_time"}},[a("el-date-picker",{staticClass:"fill-width",attrs:{"value-format":"timestamp",placeholder:"请选择入学时间"},model:{value:e.personForm.admission_time,callback:function(t){e.$set(e.personForm,"admission_time",t)},expression:"personForm.admission_time"}})],1)],1),a("el-col",{attrs:{span:24}},[e.facultyTreeData&&!e.editPassword?a("el-form-item",{attrs:{label:"院系：",prop:"faculties_ids"}},[a("el-cascader",{staticClass:"fill-width text-info",attrs:{options:e.facultyTreeData,props:e.facultyProps,"change-on-select":""},model:{value:e.personForm.faculties_ids,callback:function(t){e.$set(e.personForm,"faculties_ids",t)},expression:"personForm.faculties_ids"}})],1):e._e()],1),a("el-col",{attrs:{span:12}},[e.editPassword?e._e():a("el-form-item",{attrs:{label:"手机：",prop:"phone_num"}},[a("el-input-number",{staticClass:"fill-width text-left-penetrate",attrs:{min:0,controls:!1},model:{value:e.personForm.phone_num,callback:function(t){e.$set(e.personForm,"phone_num",t)},expression:"personForm.phone_num"}})],1)],1),a("el-col",{attrs:{span:12}},[e.editPassword?e._e():a("el-form-item",{attrs:{label:"邮箱：",prop:"mail"}},[a("el-input",{attrs:{type:"email"},model:{value:e.personForm.mail,callback:function(t){e.$set(e.personForm,"mail",t)},expression:"personForm.mail"}})],1)],1),a("el-col",{attrs:{span:24}},[e.editPassword?e._e():a("el-form-item",{attrs:{label:"简介：",prop:"sim_desc"}},[a("el-input",{attrs:{rows:"5",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.personForm.sim_desc,callback:function(t){e.$set(e.personForm,"sim_desc",t)},expression:"personForm.sim_desc"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.personDialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitPersonForm}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"基本信息",visible:e.baseDialogVisible,width:"800px",center:""},on:{"update:visible":function(t){e.baseDialogVisible=t}}},[e.userBaseInfo?a("el-form",{staticClass:"show-detail-form",attrs:{"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"工号/学号：",prop:"account"}},[a("span",[e._v(e._s(e.userBaseInfo.account))])]),a("el-form-item",{attrs:{label:"姓名：",prop:"user_name"}},[a("span",[e._v(e._s(e.userBaseInfo.user_name))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"头像：",prop:"head_img"}},[e.userBaseInfo.head_img||""===e.userBaseInfo.head_img?a("el-avatar",{attrs:{shape:"square",size:50,src:e.common.filePath+e.userBaseInfo.head_img}},[a("img",{attrs:{src:"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png"}})]):a("span",[e._v("未上传头像")])],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"年级：",prop:"grade_num"}},[a("span",[e._v(e._s(e.userBaseInfo.grade_num?e.userBaseInfo.grade_num+"届":""))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"班级：",prop:"class_num"}},[a("span",[e._v(e._s(e.userBaseInfo.class_num?e.userBaseInfo.class_num+"班":""))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别：",prop:"sex"}},[1===e.userBaseInfo.sex?a("i",{staticClass:"el-icon-male"}):e._e(),2===e.userBaseInfo.sex?a("i",{staticClass:"el-icon-female"}):e._e()])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"入校时间：",prop:"admission_time"}},[a("span",[e._v(e._s(e.common._convertDate(e.userBaseInfo.admission_time,"yyyy年MM月dd日")))])])],1),a("el-col",{attrs:{span:24}},[e.facultyTreeData?a("el-form-item",{attrs:{label:"院系：",prop:"faculties_ids"}},[a("el-cascader",{staticClass:"fill-width text-info",attrs:{disabled:"",options:e.facultyTreeData,props:e.facultyProps,"change-on-select":""},model:{value:e.userBaseInfo.faculties_ids,callback:function(t){e.$set(e.userBaseInfo,"faculties_ids",t)},expression:"userBaseInfo.faculties_ids"}})],1):e._e()],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机：",prop:"phone_num"}},[a("span",[e._v(e._s(e.userBaseInfo.phone_num))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"邮箱：",prop:"mail"}},[a("span",[e._v(e._s(e.userBaseInfo.mail))])])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"简介：",prop:"sim_desc"}},[a("el-input",{attrs:{disabled:"",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.userBaseInfo.sim_desc,callback:function(t){e.$set(e.userBaseInfo,"sim_desc",t)},expression:"userBaseInfo.sim_desc"}})],1)],1)],1)],1):e._e()],1)],1)},b=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("img",{staticClass:"logo-img",attrs:{src:n("aca7"),alt:""}}),a("h1",{staticClass:"title-in-header"},[e._v("智能实验室平台")])])}],k=n("4328"),w=n.n(k),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-menu",{staticClass:"no-border-right",class:{"vertical-nav":"vertical"==e.showType},attrs:{id:"nav","default-active":e.activeNav,mode:e.showType,"background-color":"#fff","unique-opened":"","text-color":"#606266","active-text-color":"#409EFF"},on:{select:e.navClicked}},[e.checkAuthority("LessonManageIndex")?n("el-submenu",{attrs:{index:"1"}},[n("template",{slot:"title"},[n("i",{staticClass:"fa fa-book"}),e._v(" 课程管理")]),e.checkSecondAuthority("LessonSystem")?n("el-menu-item",{attrs:{index:"LessonSystem"}},[e._v("课程体系")]):e._e(),e.checkSecondAuthority("LessonList")?n("el-menu-item",{attrs:{index:"LessonList"}},[e._v("课程")]):e._e(),e.checkSecondAuthority("TestList")?n("el-menu-item",{attrs:{index:"TestList"}},[e._v("实验")]):e._e(),e.checkSecondAuthority("CourseCount")?n("el-menu-item",{attrs:{index:"CourseCount"}},[e._v("课程安排")]):e._e()],2):e._e(),e.checkAuthority("LabManageIndex")?n("el-submenu",{attrs:{index:"3"}},[n("template",{slot:"title"},[n("i",{staticClass:"fa fa-cubes"}),e._v(" 实验室管理")]),e.checkSecondAuthority("LabList")?n("el-menu-item",{attrs:{index:"LabList"}},[e._v("实验室")]):e._e(),e.checkSecondAuthority("ClassroomList")?n("el-menu-item",{attrs:{index:"ClassroomList"}},[e._v("教室")]):e._e(),e.checkSecondAuthority("WorkList")?n("el-menu-item",{attrs:{index:"WorkList"}},[e._v("教室工单")]):e._e(),e.checkSecondAuthority("ClassOccupy")?n("el-menu-item",{attrs:{index:"ClassOccupy"}},[e._v("教室占用")]):e._e()],2):e._e(),e.checkAuthority("DeviceManageIndex")?n("el-submenu",{attrs:{index:"4"}},[n("template",{slot:"title"},[n("i",{staticClass:"fa fa-flask"}),e._v(" 设备管理")]),e.checkSecondAuthority("Standard")?n("el-menu-item",{attrs:{index:"Standard"}},[e._v("设备规格")]):e._e(),e.checkSecondAuthority("DeviceList")?n("el-menu-item",{attrs:{index:"DeviceList"}},[e._v("实验设备")]):e._e(),e.checkSecondAuthority("Rent")?n("el-menu-item",{attrs:{index:"Rent"}},[e._v("设备借还")]):e._e(),e.checkSecondAuthority("Repair")?n("el-menu-item",{attrs:{index:"Repair"}},[e._v("设备维修")]):e._e(),e.checkSecondAuthority("Scrap")?n("el-menu-item",{attrs:{index:"Scrap"}},[e._v("设备报废")]):e._e()],2):e._e(),e.checkAuthority("ConsumablesManageIndex")?n("el-submenu",{attrs:{index:"9"}},[n("template",{slot:"title"},[n("i",{staticClass:"fa fa-gavel"}),e._v(" 耗材管理")]),e.checkSecondAuthority("Consume")?n("el-menu-item",{attrs:{index:"Consume"}},[e._v("设备耗材")]):e._e(),e.checkSecondAuthority("Warehouse")?n("el-menu-item",{attrs:{index:"Warehouse"}},[e._v("耗材仓库")]):e._e(),e.checkSecondAuthority("Record")?n("el-menu-item",{attrs:{index:"Record"}},[e._v("入库")]):e._e(),e.checkSecondAuthority("Out")?n("el-menu-item",{attrs:{index:"Out"}},[e._v("出库")]):e._e(),e.checkSecondAuthority("MyOut")?n("el-menu-item",{attrs:{index:"MyOut"}},[e._v("我的申请")]):e._e(),e.checkSecondAuthority("MyDevice")?n("el-menu-item",{attrs:{index:"MyDevice"}},[e._v("我的设备")]):e._e()],2):e._e(),e.checkAuthority("PersonManageIndex")?n("el-submenu",{attrs:{index:"5"}},[n("template",{slot:"title"},[n("i",{staticClass:"fa fa-group"}),e._v(" 人员管理")]),e.checkSecondAuthority("RoleList")?n("el-menu-item",{attrs:{index:"RoleList"}},[e._v("角色管理")]):e._e(),e.checkSecondAuthority("Authority")?n("el-menu-item",{attrs:{index:"Authority"}},[e._v("权限管理")]):e._e(),e.checkSecondAuthority("UserList")?n("el-menu-item",{attrs:{index:"UserList"}},[e._v("用户管理")]):e._e(),e.checkSecondAuthority("Faculty")?n("el-menu-item",{attrs:{index:"Faculty"}},[e._v("院系管理")]):e._e(),e.checkSecondAuthority("Empower")?n("el-menu-item",{attrs:{index:"Empower"}},[e._v("授权管理")]):e._e()],2):e._e(),e.checkAuthority("EptManageIndex")?n("el-submenu",{attrs:{index:"6"}},[n("template",{slot:"title"},[n("i",{staticClass:"fa fa-tasks"}),e._v(" 实验管理")]),e.checkSecondAuthority("ReportScore")?n("el-menu-item",{attrs:{index:"ReportScore"}},[e._v("报告评分")]):e._e(),e.checkSecondAuthority("ExerciseScore")?n("el-menu-item",{attrs:{index:"ExerciseScore"}},[e._v("习题评分")]):e._e(),e.checkSecondAuthority("ReportTaskList")?n("el-menu-item",{attrs:{index:"ReportTaskList"}},[e._v("提交报告")]):e._e(),e.checkSecondAuthority("ExperimentalExercises")?n("el-menu-item",{attrs:{index:"ExperimentalExercises"}},[e._v("实验习题")]):e._e(),e.checkSecondAuthority("ExperimentalQuestionnaire")?n("el-menu-item",{attrs:{index:"ExperimentalQuestionnaire"}},[e._v("问卷调查")]):e._e()],2):e._e(),e.checkAuthority("LogManageIndex")?n("el-submenu",{attrs:{index:"7"}},[n("template",{slot:"title"},[n("i",{staticClass:"fa fa-align-left"}),e._v(" 系统管理")]),e.checkSecondAuthority("User")?n("el-menu-item",{attrs:{index:"User"}},[e._v("用户日志")]):e._e(),e.checkSecondAuthority("Security")?n("el-menu-item",{attrs:{index:"Security"}},[e._v("安全日志")]):e._e(),e.checkSecondAuthority("System")?n("el-menu-item",{attrs:{index:"System"}},[e._v("系统日志")]):e._e()],2):e._e(),e.checkAuthority("SettingsIndex")?n("el-submenu",{attrs:{index:"8"}},[n("template",{slot:"title"},[n("i",{staticClass:"fa fa-gear"}),e._v(" 设置")]),e.checkSecondAuthority("HomeSetting")?n("el-menu-item",{attrs:{index:"HomeSetting"}},[e._v("门户页面")]):e._e(),e.checkSecondAuthority("ArticleSetting")?n("el-menu-item",{attrs:{index:"ArticleSetting"}},[e._v("文章设置")]):e._e(),e.checkSecondAuthority("SchoolYear")?n("el-menu-item",{attrs:{index:"SchoolYear"}},[e._v("学年学期")]):e._e()],2):e._e()],1)},_=[],x=new Array("星期日","星期一","星期二","星期三","星期四","星期五","星期六"),S=new Date,N=new Array(100),A=new Array(12),C="甲乙丙丁戊己庚辛壬癸",L="子丑寅卯辰巳午未申酉戌亥",P="一二三四五六七八九十",$="正二三四五六七八九十冬腊";function T(e,t){return e>>t&1}function F(){var e,t,n,a;f=3!=arguments.length?new Date:new Date(arguments[0],arguments[1],arguments[2]);var s=!1,o=f.getFullYear();for(e=365*(o-1921)+Math.floor((o-1921)/4)+A[f.getMonth()]+f.getDate()-38,f.getYear()%4==0&&f.getMonth()>1&&e++,t=0;;t++){for(a=N[t]<4095?11:12,n=a;n>=0;n--){if(e<=29+T(N[t],n)){s=!0;break}e=e-29-T(N[t],n)}if(s)break}h=1921+t,m=a-n+1,p=e,12==a&&(m==Math.floor(N[t]/65536)+1&&(m=1-m),m>Math.floor(N[t]/65536)+1&&m--)}function I(){var e="";return e+=C.charAt((h-4)%10),e+=L.charAt((h-4)%12),e+="年 ",m<1?(e+="(闰)",e+=$.charAt(-m-1)):e+=$.charAt(m-1),e+="月",e+=p<11?"初":p<20?"十":p<30?"廿":"三十",p%10==0&&10!=p||(e+=P.charAt((p-1)%10)),e}function D(e,t,n){return e<1921||e>2020?"":(t=parseInt(t)>0?t-1:11,F(e,t,n),I())}N=new Array(2635,333387,1701,1748,267701,694,2391,133423,1175,396438,3402,3749,331177,1453,694,201326,2350,465197,3221,3402,400202,2901,1386,267611,605,2349,137515,2709,464533,1738,2901,330421,1242,2651,199255,1323,529706,3733,1706,398762,2741,1206,267438,2647,1318,204070,3477,461653,1386,2413,330077,1197,2637,268877,3365,531109,2900,2922,398042,2395,1179,267415,2635,661067,1701,1748,398772,2742,2391,330031,1175,1611,200010,3749,527717,1452,2742,332397,2350,3222,268949,3402,3493,133973,1386,464219,605,2349,334123,2709,2890,267946,2773,592565,1210,2651,395863,1323,2707,265877),A[0]=0,A[1]=31,A[2]=59,A[3]=90,A[4]=120,A[5]=151,A[6]=181,A[7]=212,A[8]=243,A[9]=273,A[10]=304,A[11]=334;var M=new Date,E=M.getFullYear(),O=M.getMonth()+1,B=M.getDate();M.getDay(),parseInt(M.getTime()/1e3);function R(e){var t=e.getYear();return t<1e3&&(t+=1900),t}function j(){var e=R(S)+"年"+(S.getMonth()+1)+"月"+S.getDate()+"日 "+x[S.getDay()]+" ";return e+=D(E,O,B),e}j();var q={data:function(){return{navArray:[],activeNav:this.$route.name||"",pageAuthority:null,pageAuthorityCodeList:[]}},props:{showType:{required:!0,type:String,default:"vertical"},resource:{required:!0,default:"vertical"}},watch:{},created:function(){this.setPageAuthority()},mounted:function(){},methods:{setPageAuthority:function(){var e=this;try{JSON.parse(sessionStorage.getItem("Authority")).forEach(function(t,n){"PageAuthority"==t.code&&(e.pageAuthority=t.mate)})}catch(t){e.pageAuthority=null}this.pageAuthorityCodeList=this.pageAuthority.map(function(e){return e.code})},checkAuthority:function(e){var t=!1;return this.pageAuthority.forEach(function(n,a){e==n.code&&n.holdOn&&(t=!0)}),-1==this.pageAuthorityCodeList.join(",").indexOf(e)&&(t=!0),t},checkSecondAuthority:function(e){var t=!1;try{JSON.parse(sessionStorage.getItem("Authority")).forEach(function(n,a){n.code==e&&(t=n.holdOn)})}catch(e){t=!1}return t},navClicked:function(e,t){-1==e.indexOf("-")?(this.$router.push({name:e}),this.activeNav=e):this.$message.warning("该功能暂未开放",100)}}},K=q,V=Object(u["a"])(K,y,_,!1,null,null,null);V.options.__file="NavBar.vue";var z=V.exports,U=n("d443"),J=n("9556"),Q=n("ef95"),W=n("473c"),H={data:function(){var e=this,t=function(t,n,a){var s=e;n?s.checkPassword(n).then(function(e){a()}).catch(function(e){a(new Error(e))}):a(new Error("原密码不能为空"))},n=function(t,n,a){n?e.personForm.oldPassword?n==e.personForm.password?a(new Error("新密码与原密码相同")):n.length<6?a(new Error("密码长度必须是6位以上")):a():a(new Error("您未输入原密码")):a(new Error("新密码不能为空"))},a=function(t,n,a){n?n!=e.personForm.newPassword?a(new Error("两次输入的密码不一致")):a():a(new Error("请再次输入密码不能为空"))},s=function(e,t,n){t?/^1[34578]\d{9}$/.test(t)?n():n(new Error("请输入正确的手机号码")):n(new Error("请输入手机号码"))};return{dataReady:!1,loading:!1,mainLoading:!1,navMode:"vertical",resourceList:[],dialogVisible:!1,personDialogVisible:!1,facultyTreeData:null,facultyProps:{children:"childrens",label:"faculty",value:"id"},editPassword:!1,personForm:{head_img:null,user_name:null,account:null,sex:null,admission_time:null,faculties_ids:[],phone_num:void 0,mail:null,oldPassword:null,newPassword:null,newPasswordAgain:null,grade_num:null,class_num:null,sim_desc:null},rules:{user_name:[{required:!0,message:"请输入用户名",trigger:"blur"}],account:[{required:!0,message:"请输入工号/学号",trigger:"blur"}],oldPassword:[{required:!0,validator:t,trigger:"blur"}],faculties_ids:[{required:!0,message:"请选择院系",trigger:"change"}],newPassword:[{required:!0,validator:n,trigger:"blur"}],newPasswordAgain:[{required:!0,validator:a,trigger:"blur"}],phone_num:[{required:!0,validator:s,trigger:"blur"}],mail:[{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],sim_desc:[{validator:function(t,n,a){e.common.wordNumberValid(t,n,a,"textarea")},trigger:"blur"}]},userBaseInfo:null,baseDialogVisible:!1}},components:{"nav-bar":z,"build-feedback":W["default"],upload:U["a"],"upload-avatar":J["a"],"crop-avatar":Q["a"]},watch:{navMode:{handler:function(e,t){},deep:!0},$route:{handler:function(e,t){var n=this;this.mainLoading=!0,this.$nextTick(function(){n.mainLoading=!1})},deep:!0}},created:function(){var e=this;sessionStorage.getItem("Authority")?this.getStandardTree().then(function(t){e.dataReady=!0,e.initFacultyTree()}).catch(function(e){}):(this.$message.error("登录失效, 请重新登录!"),setTimeout(function(t){e.$router.push({name:"Login"})},2e3))},mounted:function(){this.getUserBaseInfo()},methods:{checkPassword:function(e){var t=this,n=new Promise(function(n,a){var s={url:"".concat(t.common.basePath,"/user/check"),method:"get",params:{id:JSON.parse(sessionStorage.getItem("Access-Key")),password:e}};t.axios(s).then(function(e){n(!0)}).catch(function(e){a(e)})});return n},reLogin:function(){var e=this,t={url:"".concat(this.common.basePath,"/login/in"),method:"post",data:w.a.stringify({account:JSON.parse(sessionStorage.getItem("Access-Account")),pass:"123456"})};this.axios(t).then(function(t){sessionStorage.setItem("Access-Token",JSON.stringify(t.headers["access-token"])),sessionStorage.setItem("Access-Key",JSON.stringify(t.data.data.userId)),sessionStorage.setItem("Access-Account",JSON.stringify(t.data.data.account)),sessionStorage.setItem("Authority",JSON.stringify(t.data.data.webList)),e.$router.go(0)}).catch(function(e){})},changeMode:function(){var e=this;this.loading=!0,"horizontal"==this.navMode?(this.navMode="vertical",this.loading=!1,sessionStorage.setItem("navMode","vertical")):(this.navMode="horizontal",this.loading=!1,sessionStorage.setItem("navMode","horizontal")),setTimeout(function(){e.loading=!1},500)},getStandardTree:function(){var e=this;e.pageLoading=!0;var t={method:"get",url:"".concat(this.common.basePath,"/spec/tree/public")},n=new Promise(function(n,a){e.axios(t).then(function(t){sessionStorage.setItem("typeTree",JSON.stringify(t.data.data)),e.$store.commit("setTypeTree",t.data.data),n(t.data.data)}).catch(function(t){e.pageLoading=!1,e.$message.error(t),a("查询设备规格出错")})});return n},initFacultyTree:function(){var e=this;this.pageLoading=!0;var t={method:"get",url:"".concat(this.common.basePath,"/faculty/tree/public")};this.axios(t).then(function(t){e.facultyTreeData=t.data.data||[]}).catch(function(t){e.$message.error(t)})},changeDialogVisible:function(e){this.dialogVisible=e},dropdownClicked:function(e){var t=this,n={method:"get",url:"".concat(this.common.basePath,"/user/one/user"),params:{id:sessionStorage.getItem("Access-Key")}};this.axios(n).then(function(n){t.personForm=n.data.data,!n.data.data.faculties_ids&&(t.personForm.faculties_ids=[]),t.$nextTick(function(e){t.$refs.personForm&&t.$refs.personForm.clearValidate()}),"info"==e&&(t.editPassword=!1),"pass"==e&&(t.editPassword=!0),"base_info"==e?t.baseDialogVisible=!0:t.personDialogVisible=!0}).catch(function(e){t.$message.error(e)})},getUserBaseInfo:function(){var e=this,t={method:"get",url:"".concat(this.common.basePath,"/user/one/user"),params:{id:sessionStorage.getItem("Access-Key")}};this.axios(t).then(function(t){e.userBaseInfo=t.data.data}).catch(function(t){e.$message.error(t)})},uploadAvatarSuccess:function(e){this.personForm.head_img=e.path},submitPersonForm:function(){var e=this,t={method:this.editPassword?"patch":"post",url:this.editPassword?"".concat(this.common.basePath,"/user/up/password/").concat(this.personForm.id):"".concat(this.common.basePath,"/user/one/up_user"),data:this.editPassword?{password:this.personForm.newPassword}:this.personForm};this.$refs.personForm.validate(function(n){n?(e.editPassword||(t.data.faculty=e.personForm.faculties_ids[e.personForm.faculties_ids.length-1],delete t.data.faculties_ids),e.axios(t).then(function(t){e.$message.success(e.editPassword?"修改密码成功, 请重新登录":t.data.meta.message),e.editPassword&&(sessionStorage.removeItem("Access-Account"),sessionStorage.removeItem("Access-Key"),sessionStorage.removeItem("Access-Token"),sessionStorage.removeItem("Authority"),e.$router.push({name:"Login"})),e.getUserBaseInfo(),e.personDialogVisible=!1}).catch(function(t){e.dialogPersonVisible=!1,e.$message.error(t)})):e.$message.error("请检查表单填写是否正确")})}}},Y=H,G=(n("5089"),Object(u["a"])(Y,v,b,!1,null,"6c119f96",null));G.options.__file="NavLayout.vue";var Z=G.exports,X=n("d7b0"),ee={props:{layout:{type:String,default:"nav-layout"}},watch:{$route:{handler:function(e,t){this.$store.commit("setAuthority",null),this.checkThisPageAuthority(),t.path&&sessionStorage.setItem("historyName",t.name)},deep:!0}},components:{qrcode:X["a"],"nav-layout":Z,"blank-layout":g},data:function(){return{}},mounted:function(){},methods:{checkThisPageAuthority:function(){var e=this;try{var t=JSON.parse(sessionStorage.getItem("Authority"));t&&t.forEach(function(t,n){t.code==e.$route.name&&e.$store.commit("setAuthority",t.mate)})}catch(e){"Login"!=this.$route.name&&"Dashboard"!=this.$route.name&&(this.$message.error("登录验证失效, 请重新登录"),this.$router.push({name:"Login"}))}},traverseTree:function(e){if(e&&e.childrens&&e.childrens.length>0){var t=0;for(t=0;t<e.childrens.length;t++)this.traverseTree(e.childrens[t]),console.log(e.childrens[t])}}}},te=ee,ne=(n("034f"),Object(u["a"])(te,s,o,!1,null,null,null));ne.options.__file="App.vue";var ae=ne.exports,se=n("8c4f"),oe=function(){return n.e("chunk-4b06").then(n.bind(null,"7277"))},re=function(){return n.e("chunk-546a").then(n.bind(null,"a55b"))},ie=function(){return n.e("5949").then(n.bind(null,"5949"))},ce=function(){return n.e("chunk-23c1").then(n.bind(null,"c385"))},le=function(){return n.e("chunk-619f").then(n.bind(null,"2ddb"))},ue=function(){return n.e("chunk-d3c1").then(n.bind(null,"bde9"))},de=function(){return n.e("chunk-1c35").then(n.bind(null,"92ac"))},he=function(){return n.e("chunk-69f5").then(n.bind(null,"4dff"))},me=function(){return n.e("chunk-5765").then(n.bind(null,"17aa"))},pe=function(){return n.e("chunk-91cd").then(n.bind(null,"e548"))},fe=function(){return n.e("chunk-7d18").then(n.bind(null,"c12b"))},ge=function(){return n.e("chunk-1fc8").then(n.bind(null,"f649"))},ve=function(){return n.e("chunk-dfdc").then(n.bind(null,"f402"))},be=function(){return Promise.all([n.e("chunk-e909"),n.e("chunk-460c")]).then(n.bind(null,"a956"))},ke=function(){return n.e("chunk-4c5c").then(n.bind(null,"0b7d"))},we=function(){return n.e("chunk-eb6e").then(n.bind(null,"1781"))},ye=function(){return n.e("chunk-c995").then(n.bind(null,"4d0e"))},_e=function(){return n.e("chunk-07b1").then(n.bind(null,"a943"))},xe=function(){return n.e("chunk-0c98").then(n.bind(null,"ea30"))},Se=function(){return n.e("chunk-7249").then(n.bind(null,"d268"))},Ne=function(){return n.e("chunk-9620").then(n.bind(null,"c794"))},Ae=function(){return n.e("chunk-bb4c").then(n.bind(null,"ec92"))},Ce=function(){return n.e("chunk-711d").then(n.bind(null,"7d98"))},Le=function(){return n.e("chunk-5084").then(n.bind(null,"23b7"))},Pe=function(){return n.e("chunk-48f7").then(n.bind(null,"1eec"))},$e=function(){return n.e("chunk-47ac").then(n.bind(null,"7f74"))},Te=function(){return n.e("chunk-25bf").then(n.bind(null,"d6b8"))},Fe=function(){return n.e("chunk-54ee").then(n.bind(null,"b3c5"))},Ie=function(){return n.e("chunk-2a4a").then(n.bind(null,"2b6f"))},De=function(){return n.e("chunk-b51f").then(n.bind(null,"bc90"))},Me=function(){return n.e("chunk-b6f3").then(n.bind(null,"0ecc"))},Ee=function(){return n.e("chunk-067c").then(n.bind(null,"d841"))},Oe=function(){return n.e("chunk-c45c").then(n.bind(null,"a459"))},Be=function(){return n.e("chunk-5ff4").then(n.bind(null,"2d39"))},Re=function(){return n.e("chunk-53b6").then(n.bind(null,"ff6a"))},je=function(){return n.e("62ee").then(n.bind(null,"62ee"))},qe=function(){return n.e("chunk-7c1f").then(n.bind(null,"e612"))},Ke=function(){return n.e("chunk-127b").then(n.bind(null,"040e"))},Ve=function(){return n.e("f566").then(n.bind(null,"f566"))},ze=function(){return n.e("chunk-47a1").then(n.bind(null,"ed22"))},Ue=function(){return n.e("chunk-3a38").then(n.bind(null,"4fae"))},Je=function(){return n.e("chunk-ee1f").then(n.bind(null,"44cc"))},Qe=function(){return n.e("chunk-2c37").then(n.bind(null,"7812"))},We=function(){return n.e("chunk-320c").then(n.bind(null,"b2d2"))},He=function(){return n.e("chunk-d757").then(n.bind(null,"0580"))},Ye=function(){return n.e("chunk-730a").then(n.bind(null,"f933"))},Ge=function(){return n.e("d2f3").then(n.bind(null,"d2f3"))},Ze=function(){return n.e("chunk-8506").then(n.bind(null,"bb73"))},Xe=function(){return n.e("chunk-6c4b").then(n.bind(null,"c517"))},et=function(){return n.e("chunk-686a").then(n.bind(null,"f8ad"))},tt=function(){return n.e("chunk-e561").then(n.bind(null,"29b3"))},nt=function(){return n.e("chunk-4624").then(n.bind(null,"e070"))},at=function(){return n.e("chunk-2974").then(n.bind(null,"e98c"))},st=function(){return n.e("chunk-6d88").then(n.bind(null,"55f6"))},ot=function(){return n.e("chunk-3876").then(n.bind(null,"a1d4"))},rt=function(){return n.e("chunk-0f8f").then(n.bind(null,"633c"))},it=function(){return n.e("2e3e").then(n.bind(null,"2e3e"))},ct=function(){return n.e("chunk-794c").then(n.bind(null,"1044"))},lt=function(){return n.e("chunk-1923").then(n.bind(null,"94e6"))},ut=function(){return n.e("1f54").then(n.bind(null,"1f54"))},dt=function(){return n.e("79ac").then(n.bind(null,"79ac"))},ht=function(){return n.e("chunk-3a4a").then(n.bind(null,"0632"))},mt=function(){return n.e("1125").then(n.bind(null,"1125"))},pt=function(){return n.e("chunk-001f").then(n.bind(null,"037d"))},ft=function(){return n.e("chunk-05f8").then(n.bind(null,"2aa2"))},gt=function(){return n.e("chunk-1196").then(n.bind(null,"95b7"))},vt=function(){return n.e("838a").then(n.bind(null,"838a"))},bt=function(){return n.e("chunk-14a1").then(n.bind(null,"88d6"))},kt=function(){return n.e("chunk-74e7").then(n.bind(null,"8a52"))},wt=function(){return n.e("chunk-2eca").then(n.bind(null,"057e"))},yt=function(){return n.e("9c88").then(n.bind(null,"9c88"))},_t=function(){return n.e("chunk-26d7").then(n.bind(null,"09b2"))},xt=function(){return n.e("chunk-7fef").then(n.bind(null,"49ec"))},St=function(){return n.e("a8c0").then(n.bind(null,"a8c0"))},Nt=function(){return n.e("2c82").then(n.bind(null,"2c82"))},At=function(){return n.e("chunk-65e2").then(n.bind(null,"f756"))},Ct=function(){return n.e("chunk-61e2").then(n.bind(null,"71fb"))},Lt=function(){return n.e("chunk-90c9").then(n.bind(null,"28e4"))},Pt=function(){return Promise.all([n.e("chunk-e909"),n.e("chunk-dc68")]).then(n.bind(null,"aa2b"))},$t=function(){return n.e("chunk-7be6").then(n.bind(null,"3f48"))},Tt=function(){return n.e("chunk-0d16").then(n.bind(null,"9454"))},Ft=function(){return n.e("chunk-9fc5").then(n.bind(null,"9476"))},It=function(){return n.e("chunk-699a").then(n.bind(null,"2972"))},Dt=function(){return n.e("chunk-20db").then(n.bind(null,"25d6"))},Mt=function(){return n.e("chunk-7191").then(n.bind(null,"997b"))},Et=function(){return n.e("18f8").then(n.bind(null,"18f8"))},Ot=function(){return Promise.resolve().then(n.bind(null,"473c"))},Bt=function(){return n.e("chunk-0bbf").then(n.bind(null,"b5e4"))};a["default"].use(se["a"]);var Rt=new se["a"]({mode:"history",base:"/web/",routes:[{path:"*",redirect:"/login"},{path:"/maintenance",name:"MaintenanceSystemIndex",component:Et,navName:"维护系统",meta:{showNav:!1},children:[{path:"feedback",name:"FeedbackPage",navName:"反馈",component:Ot,meta:{showNav:!0}},{path:"instructions",name:"InstructionsPage",navName:"说明书",component:Bt,meta:{showNav:!0}}]},{path:"/dashboard",name:"Dashboard",component:oe,meta:{showNav:!1}},{path:"/login",name:"Login",component:re,meta:{showNav:!1}},{path:"/lesson",name:"LessonManageIndex",component:ie,navName:"课程管理",meta:{showNav:!0},children:[{path:"list",name:"LessonListIndex",navName:"课程",component:ie,meta:{showNav:!0},children:[{path:"",name:"LessonList",navName:"课程",component:ce,meta:{showNav:!0}},{path:"detail/:id",name:"LessonListDetail",navName:"课程-详情",component:le,meta:{showNav:!0}},{path:"studentregister/:id",name:"StudentRegister",navName:"学生花名册",component:pe,meta:{showNav:!0}},{path:"scoreresult/:member_id/:course_id",name:"ScoreResult",navName:"学生成绩单",component:fe,meta:{showNav:!0}},{path:"classoccupy",name:"ClassOccupy",navName:"教室占用",component:Te,meta:{showNav:!0}},{path:"createquestionnaire/:course_id",name:"LessonCreateQuestionnaire",navName:"添加课程问卷",component:Re,meta:{showNav:!0}},{path:"questionnairedetail/:course_id/:cquestionnaire_id/:questionnaire_id",name:"LessonQuestionnaireDetail",navName:"课程问卷详情",component:je,meta:{showNav:!0}},{path:"questionnairecheck/:course_id/:cquestionnaire_id/:questionnaire_id",name:"LessonQuestionnaireCheck",navName:"查看问卷",component:qe,meta:{showNav:!0}},{path:"questionnairescore/:course_id/:cquestionnaire_id/:questionnaire_id",name:"LessonQuestionnaireScore",navName:"答题",component:Ke,meta:{showNav:!0}}]},{path:"testlist",name:"TestListIndex",navName:"实验",component:ie,meta:{showNav:!0},children:[{path:"",name:"TestList",navName:"实验",component:ue,meta:{showNav:!0}},{path:"testdetail/:id",name:"TestDetail",navName:"实验-详情",component:de,meta:{showNav:!0}},{path:"bookingclassroom/:experiment_id",name:"BookingClassroom",navName:"预约教室",component:ye,meta:{showNav:!0}},{path:"attendancetaskdetail/:task_id/:experiment_id",name:"AttendanceTaskDetail",navName:"考勤任务详情",component:Le,meta:{showNav:!0}},{path:"exerciserequest/:id",name:"ExerciseRequest",navName:"习题要求",component:ve,meta:{showNav:!0}},{path:"createquestionnaire/:id",name:"CreateQuestionnaire",navName:"创建问卷",component:Se,meta:{showNav:!0}},{path:"exercisestaskdetail/:experiment_id/:task_id",name:"ExercisesTaskDetail",navName:"习题任务详情",component:be,meta:{showNav:!0}},{path:"attendancesheet/:experiment_id",name:"AttendanceSheet",navName:"考勤表",component:Pe,meta:{showNav:!0}},{path:"questionnairetaskdetail/:id",name:"QuestionnaireTaskDetail",navName:"问卷任务详情",component:Ne,meta:{showNav:!0}},{path:"questionnairecheck/:experiment_id/:questionnaire_id/:task_id",name:"QuestionnaireCheck",navName:"问卷详情",component:Ae,meta:{showNav:!0}},{path:"questionnairescore/:experiment_id/:questionnaire_id/:task_id",name:"QuestionnaireScore",navName:"填写问卷",component:Ce,meta:{showNav:!0}},{path:"testpaper/:experiment_id/:task_id/:associated_object",name:"TestPaper",navName:"试卷详情",component:ge,meta:{showNav:!0}},{path:"reportdetail/:id",name:"ReportDetail",navName:"报告详情",component:xe,meta:{showNav:!0}},{path:"exercisequestiondetail/:experiment_id/:task_id/:solution_id:/type",name:"ExerciseQuestionDetail",navName:"习题详情",component:ke,meta:{showNav:!0}},{path:"markingscore/:experiment_id/:task_id/:solution_id",name:"MarkingScore",navName:"评分",component:we,meta:{showNav:!0}},{path:"scheduleofachievements/:experiment_id",name:"ScheduleOfAchievements",navName:"成绩明细表",component:_e,meta:{showNav:!0}},{path:"coursecount",name:"CourseCount",navName:"课程安排",component:$e,meta:{showNav:!0}},{path:"testgroupstudentresister/:id/:courseId",name:"TestGroupStudentResister",navName:"小组花名册",component:he,meta:{showNav:!0}},{path:"testpersonalstudentresister/:id/:courseId",name:"TestPersonalStudentResister",navName:"个人花名册",component:me,meta:{showNav:!0}}]},{path:"system",name:"LessonSystemIndex",navName:"课程",component:ie,meta:{showNav:!0},children:[{path:"",name:"LessonSystem",navName:"课程体系",component:Fe,meta:{showNav:!0}},{path:"coursedetail/:course_id",name:"LessonSystemCourseDetail",navName:"课程体系-课程详情",component:Ie,meta:{showNav:!0}},{path:"questionnairedetail/:course_id/:questionnaire_id",name:"LessonSystemQuestionnaireDetail",navName:"课程体系-课程详情-问卷详情",component:De,meta:{showNav:!0}},{path:"experimentdetail/:course_id/:experiment_id",name:"LessonSystemExperimentDetail",navName:"课程体系-课程详情-实验详情",component:Me,meta:{showNav:!0}},{path:"reportdetail/:course_id/:experiment_id/:task_id",name:"LessonSystemReportDetail",navName:"课程体系-课程详情-实验详情-报告任务详情",component:Ee,meta:{showNav:!0}},{path:"answerdetail/:course_id/:experiment_id/:task_id",name:"LessonSystemAnswerDetail",navName:"课程体系-课程详情-实验详情-答题任务详情",component:Oe,meta:{showNav:!0}},{path:"questiondetail/:course_id/:experiment_id/:task_id",name:"LessonSystemQuestionDetail",navName:"课程体系-课程详情-实验详情-问卷任务详情",component:Be,meta:{showNav:!0}}]}]},{path:"/device",name:"DeviceManageIndex",component:Ve,navName:"设备管理",meta:{showNav:!0},children:[{path:"standard",name:"Standard",navName:"设备规格",component:ze,meta:{showNav:!0}},{path:"list",name:"DeviceList",navName:"实验设备",component:Ue,meta:{showNav:!0}},{path:"repair",name:"Repair",navName:"设备维修",component:Qe,meta:{showNav:!0}},{path:"scrap",name:"Scrap",navName:"设备报废",component:We,meta:{showNav:!0}},{path:"rent",name:"Rent",navName:"设备借还",component:Je,meta:{showNav:!0}},{path:"worklist",name:"WorkList",navName:"设备工单",component:He,meta:{showNav:!0}},{path:"mydevice",name:"MyDevice",navName:"我的设备",component:Ye,meta:{showNav:!0}}]},{path:"/consumables",name:"ConsumablesManageIndex",component:Ge,navName:"耗材管理",meta:{showNav:!0},children:[{path:"consume",name:"Consume",navName:"设备耗材",component:Ze,meta:{showNav:!0}},{path:"warehouse",name:"Warehouse",navName:"耗材仓库",component:Xe,meta:{showNav:!0}},{path:"record",name:"Record",navName:"入库",component:et,meta:{showNav:!0}},{path:"instockdetail/:id",name:"InstockDetail",navName:"入库-详情",component:ot,meta:{showNav:!0}},{path:"instockdetailedform/:type/:id",name:"InstockDetailedForm",navName:"入库-入库单",component:tt,meta:{showNav:!0}},{path:"out",name:"Out",navName:"出库",component:nt,meta:{showNav:!0}},{path:"myout",name:"MyOut",navName:"我的申请",component:st,meta:{showNav:!0}},{path:"outstockdetail/:type/:id",name:"OutstockDetail",navName:"出库/我的申请-详情",component:rt,meta:{showNav:!0}},{path:"outstockDetailedform/:page/:type/:id",name:"OutstockDetailedForm",navName:"出库-出库单",component:at,meta:{showNav:!0}}]},{path:"/person",name:"PersonManageIndex",component:it,navName:"人员管理",meta:{showNav:!0},children:[{path:"userlist",name:"UserList",navName:"用户管理",component:ct,meta:{showNav:!0}},{path:"rolelist",name:"RoleList",navName:"角色管理",component:lt,meta:{showNav:!0}},{path:"authority",name:"Authority",navName:"权限管理",component:ut,meta:{showNav:!0}},{path:"faculty",name:"Faculty",navName:"院系管理",component:dt,meta:{showNav:!0}},{path:"empower",name:"Empower",navName:"授权管理",component:ht,meta:{showNav:!0}}]},{path:"/lab",name:"LabManageIndex",component:vt,navName:"实验室管理",meta:{showNav:!0},children:[{path:"lablist",name:"LabList",navName:"实验室",component:bt,meta:{showNav:!0}},{path:"classroomlist",name:"ClassroomList",navName:"教室",component:kt,meta:{showNav:!0}},{path:"classroomdetail/:id",name:"ClassroomDetail",navName:"教室-详情",component:wt,meta:{showNav:!0}}]},{path:"/log",name:"LogManageIndex",component:mt,navName:"日志管理",meta:{showNav:!0},children:[{path:"user",name:"User",navName:"用户日志",component:pt,meta:{showNav:!0}},{path:"system",name:"System",navName:"系统日志",component:ft,meta:{showNav:!0}},{path:"security",name:"Security",navName:"安全日志",component:gt,meta:{showNav:!0}}]},{path:"/eptmanage",name:"EptManageIndex",component:Nt,navName:"实验管理",meta:{showNav:!0},children:[{path:"reporttasklist",name:"ReportTaskList",navName:"学生报告任务表",component:At,meta:{showNav:!0}},{path:"reporttaskdetail/:id/:experiment_id",name:"ReportTaskDetail",navName:"学生报告详情",component:Ct,meta:{showNav:!0}},{path:"exercisescore",name:"ExerciseScore",navName:"习题评分",component:Lt,meta:{showNav:!0}},{path:"exercisescoredetail/:task_id/:experiment_id",name:"ExerciseScoreDetail",navName:"习题评分详情",component:Pt,meta:{showNav:!0}},{path:"exercisetestpaper/:report_id/:experiment_id/:associated_object",name:"ExerciseTestPaper",navName:"问卷详情",component:$t,meta:{showNav:!0}},{path:"experimentalexercises",name:"ExperimentalExercises",navName:"问卷详情",component:Tt,meta:{showNav:!0}},{path:"reportscore",name:"ReportScore",navName:"报告评分",component:Ft,meta:{showNav:!0}},{path:"reportscoredetail/:id/:experiment_id",name:"ReportScoreDetail",navName:"报告评价详情",component:It,meta:{showNav:!0}},{path:"eptmarkingscore/:solution_id/",name:"EPTMarkingScore",navName:"评分",component:Dt,meta:{showNav:!0}},{path:"experimentalquestionnaire",name:"ExperimentalQuestionnaire",navName:"实验问卷调查",component:Mt,meta:{showNav:!0}}]},{path:"/settings",name:"SettingsIndex",component:yt,navName:"设置",meta:{showNav:!0},children:[{path:"articlesetting",name:"ArticleSetting",navName:"文章设置",component:_t,meta:{showNav:!0}},{path:"homesetting",name:"HomeSetting",navName:"门户页面",component:xt,meta:{showNav:!0}},{path:"schoolyear",name:"SchoolYear",navName:"学年学期",component:St,meta:{showNav:!0}}]}]}),jt=n("2f62");a["default"].use(jt["a"]);var qt=new jt["a"].Store({state:{noticeNum:null,dialogQRcodeVisible:!1,QRcodeValue:"默认二维码内容...",typeTree:[],authority:null},mutations:{setAuthority:function(e,t){e.authority=t},exchangeShowStatus:function(e,t){t?(e.dialogQRcodeVisible=!0,e.QRcodeValue=t.qr_code):e.dialogQRcodeVisible=!1},exchangeShowStatus_:function(e,t){t?(e.dialogQRcodeVisible=!0,e.QRcodeValue=t.qrCode):e.dialogQRcodeVisible=!1},change:function(e,t){e.noticeNum=t},setTypeTree:function(e,t){e.typeTree=t}},actions:{}}),Kt=n("5c96"),Vt=n.n(Kt);n("c69f");a["default"].use(Vt.a);n("51da"),n("7f10"),n("3b2b"),n("a481"),n("456d"),n("6b54");var zt=new a["default"]({router:Rt,store:qt}),Ut={basePath:"".concat(window.location.origin,"/api"),msBasePath:"".concat(window.location.origin,"/ms"),publicBasePath:"".concat(window.location.origin),filePath:"".concat(window.location.origin),webSocketSever:"".concat(window.location.host,"/api/websocket"),ws:{},noticeNum:null,elementPagination:{pageSizes:[10,20,30],pageSizeDefault:10,pageNumDefault:1},startInterval:!1,emailReg:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,mobileReg:/^1[34578]\d{9}$/,curStatus:[{label:"全部",id:null},{label:"在库",id:1},{label:"借出",id:2},{label:"维修",id:10},{label:"报废",id:20}],borrowStatus:[{label:"全部",id:null},{label:"已借出",id:1},{label:"已归还",id:10},{label:"已报废",id:20}],repairStatus:[{label:"全部",id:null},{label:"维修中",id:1},{label:"维修完成",id:10},{label:"已报废",id:20}],personStatus:[{label:"在籍",value:1},{label:"已毕业",value:2},{label:"已退休",value:3},{label:"已离校",value:4}],result:null,resultBoolean:!1,buttonLoading:!1,traverseTree:function(e){if(e)if(e.childrens&&e.childrens.length>0){var t=0;for(t=0;t<e.childrens.length;t++)this.traverseTree(e.childrens[t])}else delete e.childrens},getDictionaryData:function(e){var t={method:"get",url:"".concat(this.basePath,"/contrast/all/tree"),params:{typeId:e}},n=new Promise(function(e,n){zt.axios(t).then(function(t){e(t.data.data)}).catch(function(e){zt.$message.error(e),n([])})});return n},_convertDate:function(e,t){return e?new Date(e).Format(t):"无"},showStatusText:function(e){switch(e){case 1:return{name:"补充材料阶段",stageColor:"stageColor1"};case 2:return{name:"项目受理阶段",stageColor:"stageColor2"};case 3:return{name:"专家预审阶段",stageColor:"stageColor3"};case 4:return{name:"专家评审阶段",stageColor:"stageColor4"};case 5:return{name:"网信会议阶段",stageColor:"stageColor5"};case 6:return{name:"提交财政意见阶段",stageColor:"stageColor6"};case 7:return{name:"审核财政意见阶段",stageColor:"stageColor7"};case 8:return{name:"项目实施阶段",stageColor:"stageColor8"};case 9:return{name:"已完结",stageColor:"stageColor9"};case 19:return{name:"已关闭",stageColor:"stageColor19"};default:return{name:"全部",stageColor:"stageColor-none"}}},projectStatusData:function(){return[{id:1,name:"补充材料阶段"},{id:2,name:"项目受理阶段"},{id:3,name:"专家预审阶段"},{id:4,name:"专家评审阶段"},{id:5,name:"网信会议阶段"},{id:6,name:"提交财政意见阶段"},{id:7,name:"审核财政意见阶段"},{id:8,name:"项目实施阶段"},{id:9,name:"已完结"},{id:19,name:"已关闭"}]},downloadFileByUrl:function(e){window.open(e)},_controlTable:function(e){var t,n=JSON.parse(sessionStorage.getItem("controlTable"));return n?(n.forEach(function(n){e==n.id&&(t=n.name)}),t||"无"):"无"},backForward:function(){var e=sessionStorage.getItem("historyPath")||"/";zt.$router.push({path:e})},transferGender:function(e){return 1==e?"男":"女"},resultWeek:function(e){var t=new Date(e).getDay();return t},transferDeviceStatus:function(e){var t="";switch(e){case 1:t="在库";break;case 2:t="借出";break;case 10:t="维修";break;case 20:t="报废";break;default:t="该状态未定义";break}return t},transferPersonStatus:function(e){var t="";switch(e){case 1:t="在籍";break;case 2:t="已毕业";break;case 10:t="已退休";break;case 20:t="已离校";break;default:t="该状态未定义";break}return t},transferBorrowStatus:function(e){var t="";switch(e){case 1:t="已借出";break;case 10:t="已归还";break;case 20:t="已报废";break;default:t="该状态未定义";break}return t},transferRepairStatus:function(e){var t="";switch(e){case 1:t="维修中";break;case 10:t="维修完成";break;case 20:t="已报废";break;default:t="该状态未定义";break}return t},roleType:function(){return[{value:1,label:"课程组长"},{value:2,label:"任课教师"},{value:3,label:"学生"},{value:4,label:"助教"}]},returnDevice:function(e,t){var n=this,a=new Promise(function(a,s){zt.$confirm("确认入库?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var o={url:"".concat(n.basePath).concat(t),method:"patch",data:w.a.stringify({id:[e.id].toString(0),de_id:[e.de_id].toString(0),user_id:parseInt(sessionStorage.getItem("Access-Key"))})};zt.axios(o).then(function(e){zt.$message.success("成功"),a("成功")}).catch(function(e){zt.$message.error(e),s("入库失败")})}).catch(function(){})});return a},scrapDevice:function(e,t){var n=this,a=new Promise(function(a,s){zt.$prompt('<span><i class="required-label"></i>报废原因</span>',"报废",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,inputValidator:function(e){return!!e||(zt.$message.error("请检查必填项"),!1)},inputErrorMessage:"请输入报废原因"}).then(function(o){var r=o.value,i={method:"post",url:"".concat(n.basePath,"/scrap/add"),data:{reason:r,de_id:[e.de_id],user_id:JSON.parse(sessionStorage.getItem("Access-Key"))||null,type:t}};r?zt.axios(i).then(function(e){zt.$message.success(e.data.meta.message),a("成功")}).catch(function(e){zt.$message.error(e),s("报废失败")}):s("报废失败")}).catch(function(e){})});return a},showQRCode:function(e){zt.store.state.dialogQRcodeVisible=!0},checkAuthority:function(e,t){var n=null,a=!1,s=zt.$store.state.authority;if(!s)return!1;s.forEach(function(t,s){e==t.code&&1!=t.type&&(t.holdOn&&(a=!0),n=t)});var o=s.map(function(e){return e.code}).join(",");return-1==o.indexOf(e)&&(a=!0),t?a:n},checkAuthorityTree:function(e){var t=!1,n=JSON.parse(sessionStorage.getItem("Authority"));return n.forEach(function(n){n.mate.forEach(function(n){e==n.code&&n.holdOn&&(t=!0)})}),t},getWeek:function(e){var t;return t=new Date(e),"星期"+"日一二三四五六".charAt(t.getDay())},wordNumberValid:function(e,t,n,a){return t?"single"==a?t.length>20?n(new Error("最大字数不能超过20个字")):n():t.length>128?n(new Error("最大字数不能超过128个字")):n():n()},returnConfig:function(){var e={"Access-Token":null,"Access-Key":null,nonce:null,"Time-Stamp":null,secret:null,type:null};try{sessionStorage.getItem("Access-Token")&&(e["Access-Token"]=JSON.parse(sessionStorage.getItem("Access-Token")||null)),sessionStorage.getItem("Access-Key")&&(e["Access-Key"]=JSON.parse(sessionStorage.getItem("Access-Key")||null))}catch(e){return this.$message.error("获取Access-Token 或 Access-Key 有误, 上传文件失败!"),!1}e["nonce"]=Math.floor(1e16*Math.random()),e["Time-Stamp"]=(new Date).valueOf(),e["secret"]="labmiss",e["type"]="PC";var t={nonce:e.nonce,"Time-Stamp":e["Time-Stamp"],secret:e.secret,"Access-Key":e["Access-Key"]},n=[];for(var a in t)n.push(a);n.sort();var s=[];return n.forEach(function(e,n){s.push(t[e])}),e["sign"]=window.md5Js(s.join("")),e},_fileBold:function(e){var t=decodeURI(e.headers["content-disposition"].substring(20,e.headers["content-disposition"].length)),n=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.style.display="none",a.href=n,a.setAttribute("download",t),document.body.appendChild(a),a.click()},splicingParams:function(e){if(!e)return"";var t="";return Object.keys(e).map(function(n){t+=n+"="+e[n]+"&"}),t=t.substring(t.length-1,1),t},exerciseOptions:function(e){switch(e){case 1:return"A";case 2:return"B";case 3:return"C";case 4:return"D";case 5:return"E";case 6:return"F";case 7:return"G";case 8:return"H";case 9:return"I";case 11:return"J";case 12:return"K";case 13:return"L";case 14:return"M";case 15:return"N";case 16:return"O";case 17:return"P";case 18:return"Q";case 20:return"R"}}};Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e};var Jt=n("bc3a"),Qt=n.n(Jt),Wt=n("8237"),Ht=n.n(Wt),Yt=n("313e"),Gt=n.n(Yt),Zt=n("b2d8"),Xt=n.n(Zt);n("64e1");a["default"].config.productionTip=!1,a["default"].prototype.common=Ut,window.md5Js=Ht.a,a["default"].prototype.md5=Ht.a,a["default"].prototype.echarts=Gt.a,a["default"].use(Xt.a),Qt.a.defaults.headers["X-Requested-With"]="XMLHttpRequest",a["default"].prototype.axios=Qt.a,a["default"].prototype.axios.interceptors.request.use(function(e,t){try{sessionStorage.getItem("Access-Token")&&(e.headers.common["Access-Token"]=JSON.parse(sessionStorage.getItem("Access-Token")||null)),sessionStorage.getItem("Access-Key")&&(e.headers.common["Access-Key"]=JSON.parse(sessionStorage.getItem("Access-Key")||null))}catch(e){console.log("获取Access-Token 或 Access-Key 有误!")}e.headers.common["nonce"]=Math.floor(1e16*Math.random()),e.headers.common["Time-Stamp"]=(new Date).valueOf(),e.headers.common["secret"]="labmiss",e.headers.common["type"]="PC";var n={nonce:e.headers.common.nonce,"Time-Stamp":e.headers.common["Time-Stamp"],secret:e.headers.common.secret,"Access-Key":e.headers.common["Access-Key"]},a=n;"get"==e.method&&(a=Object.assign(n,e.params));var s=[];for(var o in a)s.push(o);s.sort();var r=[];return s.forEach(function(e,t){r.push(a[e])}),e.headers.common["sign"]=window.md5Js(r.join("")),e},function(e){return Promise.reject(e)}),a["default"].prototype.axios.interceptors.response.use(function(e){return e.data.meta&&0!=e.data.meta.code?401==e.data.meta.code||405==e.data.meta.code?(setTimeout(function(){window.location.href=window.location.origin+"/web/login"},1500),Promise.reject("登录验证失效, 请重新登录")):403==e.data.meta.code?(setTimeout(function(){window.location.href=window.location.origin+"/web/login"},2e3),Promise.reject("您的权限已被修改, 请重新登录")):Promise.reject(e.data.meta.message):e},function(e){return e.response.data.message?Promise.reject(e.response.data.message):Promise.reject("网络错误, 请联系管理员")}),new a["default"]({router:Rt,store:qt,render:function(e){var t=this.$route.meta,n={};return t&&t.showNav?n.layout="nav-layout":n.layout="blank-layout",e(ae,{props:n})}}).$mount("#app")},"667f":function(e,t,n){"use strict";var a=n("45fd"),s=n.n(a);s.a},"784b":function(e,t,n){"use strict";var a=n("bd42"),s=n.n(a);s.a},9556:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-upload",{ref:"customUpload",staticClass:"custom-avatar",attrs:{disabled:e.isDisabled,action:e.basePath,headers:e.headers,"file-list":e.fileList,"show-file-list":!1,"before-upload":e.beforeUpload,"on-success":e.uploadSuccess,data:e.data}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.uploadLoading,expression:"uploadLoading"}]},[e.resetAvatar?n("img",{staticClass:"avatar",class:e.size,attrs:{src:e.common.filePath+e.resetAvatar}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon",class:e.size})])])],1)},s=[],o=(n("7f7f"),n("55dd"),n("ac6a"),n("cadf"),n("551c"),n("097d"),{watch:{file:{handler:function(e,t){console.log(e)},deep:!0},avatar:{handler:function(e,t){this.resetAvatar=e,console.log(e)},deep:!0}},data:function(){return{headers:{},uploadLoading:!1,typeList:{jpg:"image/jpeg",gif:"image/gif",png:"image/png"},basePath:this.common.basePath+this.url,fileList:[],resetAvatar:this.avatar}},props:{url:{type:String,default:"/file/uplode"},fileTypes:{type:Array,default:function(){return[]}},showSuccessNotice:{default:!1},isDisabled:{type:Boolean,default:!1},size:{type:String,default:"mini"},data:{required:!1,type:Object,default:function(){}},avatar:{type:String,default:null}},mounted:function(){},methods:{beforeUpload:function(e){var t=this;console.log(e.type);var n=!1;if(0==this.fileTypes.length?n=!0:e.type?this.fileTypes.forEach(function(a,s){e.type==t.typeList[a]&&(n=!0)}):n=!1,!n)return this.$message.error("请上传".concat(this.fileTypes.join(", "),"格式的文件")),!1;try{sessionStorage.getItem("Access-Token")&&(this.headers["Access-Token"]=JSON.parse(sessionStorage.getItem("Access-Token")||null)),sessionStorage.getItem("Access-Key")&&(this.headers["Access-Key"]=JSON.parse(sessionStorage.getItem("Access-Key")||null))}catch(e){return this.$message.error("获取Access-Token 或 Access-Key 有误, 上传文件失败!"),!1}this.headers["nonce"]=Math.floor(1e16*Math.random()),this.headers["Time-Stamp"]=(new Date).valueOf(),this.headers["secret"]="labmiss",this.headers["type"]="PC";var a={nonce:this.headers.nonce,"Time-Stamp":this.headers["Time-Stamp"],secret:this.headers.secret,"Access-Key":this.headers["Access-Key"]},s=[];for(var o in a)s.push(o);s.sort();var r=[];s.forEach(function(e,t){r.push(a[e])}),this.headers["sign"]=window.md5Js(r.join("")),this.uploadLoading=!0},uploadSuccess:function(e,t,n){if(0==e.meta.code){var a={};e.data&&(a={name:t.name,path:t.response.data.path}),this.$emit("uploadSuccess",a),this.resetAvatar=a.path,this.showSuccessNotice&&this.$message.success("".concat(t.name," 上传成功!")),this.fileList=[],this.uploadLoading=!1}else this.$message.error(e.meta.message),this.fileList=[],this.uploadLoading=!1}}}),r=o,i=(n("26e1"),n("2877")),c=Object(i["a"])(r,a,s,!1,null,null,null);c.options.__file="UploadAvatar.vue";t["a"]=c.exports},a0ec:function(e,t,n){},aca7:function(e,t,n){e.exports=n.p+"0ed27b03dbcabcf6fbb883135284b647.jpg"},bd42:function(e,t,n){},c69f:function(e,t,n){},d0d8:function(e,t,n){"use strict";var a=n("3ac8"),s=n.n(a);s.a},d443:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-upload",{ref:"customUpload",attrs:{disabled:e.isDisabled,action:e.basePath,headers:e.headers,"file-list":e.fileList,"show-file-list":!1,"before-upload":e.beforeUpload,"on-success":e.uploadSuccess,data:e.data}},[n("el-button",{attrs:{disabled:e.isDisabled,type:"primary",size:e.size,loading:e.uploadLoading}},[e._v(e._s(e.uploadLoading?"上传中...":e.buttonText))])],1)],1)},s=[],o=(n("7f7f"),n("55dd"),n("ac6a"),{watch:{file:{handler:function(e,t){console.log(e)},deep:!0}},data:function(){return{headers:{},uploadLoading:!1,typeList:{xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",pdf:"application/pdf",jpg:"image/jpeg",gif:"image/gif",png:"image/png",mp4:"video/mp4",avi:"video/avi",mpeg:"video/mpeg"},basePath:this.common.basePath+this.url,fileList:[]}},props:{url:{type:String,default:"/file/uplode"},fileTypes:{type:Array,default:function(){return[]}},showSuccessNotice:{default:!1},buttonText:{type:String,default:"点击上传"},isDisabled:{type:Boolean,default:!1},size:{type:String,default:"mini"},data:{required:!1,type:Object,default:function(){}}},mounted:function(){},methods:{beforeUpload:function(e){var t=this;console.log(e.type);var n=!1;if(0==this.fileTypes.length?n=!0:e.type?this.fileTypes.forEach(function(a,s){e.type==t.typeList[a]&&(n=!0)}):n=!1,!n)return this.$message.error("请上传".concat(this.fileTypes.join(", "),"格式的文件")),!1;try{sessionStorage.getItem("Access-Token")&&(this.headers["Access-Token"]=JSON.parse(sessionStorage.getItem("Access-Token")||null)),sessionStorage.getItem("Access-Key")&&(this.headers["Access-Key"]=JSON.parse(sessionStorage.getItem("Access-Key")||null))}catch(e){return this.$message.error("获取Access-Token 或 Access-Key 有误, 上传文件失败!"),!1}this.headers["nonce"]=Math.floor(1e16*Math.random()),this.headers["Time-Stamp"]=(new Date).valueOf(),this.headers["secret"]="labmiss",this.headers["type"]="PC";var a={nonce:this.headers.nonce,"Time-Stamp":this.headers["Time-Stamp"],secret:this.headers.secret,"Access-Key":this.headers["Access-Key"]},s=[];for(var o in a)s.push(o);s.sort();var r=[];s.forEach(function(e,t){r.push(a[e])}),this.headers["sign"]=window.md5Js(r.join("")),this.uploadLoading=!0},uploadSuccess:function(e,t,n){if(0==e.meta.code){var a={};e.data&&(a={name:t.name,path:t.response.data.path}),this.$emit("uploadSuccess",a),this.showSuccessNotice&&this.$message.success("".concat(t.name," 上传成功!")),this.fileList=[],this.uploadLoading=!1}else this.$message.error(e.meta.message),this.fileList=[],this.uploadLoading=!1}}}),r=o,i=(n("41f3"),n("2877")),c=Object(i["a"])(r,a,s,!1,null,null,null);c.options.__file="Upload.vue";t["a"]=c.exports},e0a3:function(e,t,n){e.exports=n.p+"f23954aafece196d0a06e2f0303e4910.png"},e454:function(e,t,n){},e93b:function(e,t,n){e.exports=n.p+"8e9597d91b926034def707ec355c0a27.png"},ef95:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"custom-avatar",on:{click:function(t){!e.isDisabled&&(e.cropDialogVisible_=!0),e.resetAvatar?e.option.img=e.resetAvatar:e.option.img="",e.clear()}}},[n("div",{staticClass:"el-upload-avatar"},[e.resetAvatar?n("img",{staticClass:"avatar",class:e.size,attrs:{src:e.common.filePath+e.resetAvatar}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon",class:e.size})])]),n("el-dialog",{attrs:{title:"上传头像",top:"25vh",visible:e.cropDialogVisible_,width:"800px",modal:!0,"append-to-body":"",center:""},on:{"update:visible":function(t){e.cropDialogVisible_=t}}},[n("div",{staticStyle:{"min-width":"540px",width:"600px"}},[n("div",{staticClass:"eleme overflow-hidden"},[n("el-upload",{ref:"customUploadAvatar",staticClass:"custom-avatar",attrs:{"auto-upload":!1,disabled:e.isDisabled,action:e.basePath,headers:e.headers,"file-list":e.fileList,"show-file-list":!1,"before-upload":e.beforeUpload,"on-change":e.handleChange,data:e.data}},[n("el-button",{attrs:{slot:"trigger",size:"small",type:"primary",disabled:e.isDisabled},slot:"trigger"},[e._v("选取图片")]),n("div",{staticStyle:{display:"inline-block",position:"absolute","margin-left":"20px"}},[n("el-button",{attrs:{size:"small",type:"success",disabled:""==e.option.img,loading:e.uploadLoading},on:{click:e.submitUpload}},[e._v("\n\t\t\t        \t"+e._s(e.uploadLoading?"上传中...":e.buttonText)+"\n\t\t\t        ")]),n("span",{staticClass:"el-upload__tip marl10",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件")])],1)],1)],1),n("div",{staticClass:"overflow-hidden"},[n("br"),n("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-right",circle:"",title:"右旋转"},on:{click:e.rotateRight}}),n("el-button",{attrs:{type:"success",icon:"el-icon-refresh-left",circle:"",title:"左旋转"},on:{click:e.rotateLeft}}),n("el-button",{attrs:{type:"danger",icon:"el-icon-plus",circle:"",title:"放大"},on:{click:function(t){e.changeScale(1)}}}),n("el-button",{attrs:{type:"warning",icon:"el-icon-minus",circle:"",title:"缩小"},on:{click:function(t){e.changeScale(-1)}}})],1),n("div",{staticClass:"cropper"},[n("div",{staticClass:"cropper-content",staticStyle:{"margin-top":"60px","margin-left":"60px"}},[n("div",{staticClass:"cropper"},[n("vueCropper",{ref:"cropper",attrs:{img:e.option.img,outputSize:e.option.size,outputType:e.option.outputType,info:!0,full:e.option.full,canMove:e.option.canMove,canMoveBox:e.option.canMoveBox,original:e.option.original,autoCrop:e.option.autoCrop,autoCropWidth:e.option.autoCropWidth,autoCropHeight:e.option.autoCropHeight,fixedBox:e.option.fixedBox},on:{realTime:e.realTime,imgLoad:e.imgLoad}})],1),e.previews.url?n("div",{staticStyle:{"margin-left":"20px","margin-top":"-44px"}},[n("div",{staticClass:"show-preview",style:{width:"200px",height:"205px",overflow:"hidden",margin:"5px"}},[n("div",{staticClass:"preview",staticStyle:{width:"200px",height:"200px","border-radius":"50%"}},[n("img",{style:e.previews.img,attrs:{src:e.previews.url}})])]),n("div",{staticClass:"show-preview",style:{width:"70px",height:"75px",overflow:"hidden",margin:"5px","margin-left":"65px"}},[n("div",{staticClass:"preview",staticStyle:{width:"70px",height:"70px","border-radius":"50%"}},[n("img",{staticStyle:{width:"70px",height:"70px"},attrs:{src:e.previewsImageUrl}})])]),n("div",{staticClass:"show-preview",style:{width:"50px",height:"55px",overflow:"hidden",margin:"5px","margin-left":"70px"}},[n("div",{staticClass:"preview",staticStyle:{width:"50px",height:"50px","border-radius":"50%"}},[n("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.previewsImageUrl}})])])]):e._e()])])])])],1)},s=[],o=(n("7f7f"),n("55dd"),n("ac6a"),n("cadf"),n("551c"),n("097d"),n("7e79")),r={data:function(){return{cropDialogVisible_:!1,radio:"normal",previews:{},previewsImageUrl:"",option:{img:"",outputSize:1,full:!1,outputType:"png",canMove:!0,original:!1,canMoveBox:!0,autoCrop:!0,autoCropWidth:200,autoCropHeight:200,fixedBox:!0},headers:{},uploadLoading:!1,typeList:{jpg:"image/jpeg",gif:"image/gif",png:"image/png"},basePath:this.common.basePath+this.url,fileList:[],resetAvatar:this.avatar}},props:{url:{type:String,default:"/file/uplode"},fileTypes:{type:Array,default:function(){return[]}},showSuccessNotice:{default:!1},isDisabled:{type:Boolean,default:!1},cropDialogVisible:{type:Boolean,default:!1},size:{type:String,default:"mini"},data:{required:!1,type:Object,default:function(){}},avatar:{type:String,default:null},buttonText:{type:String,default:"上传头像"}},watch:{file:{handler:function(e,t){console.log(e)},deep:!0},avatar:{handler:function(e,t){this.resetAvatar=e,console.log(e)},deep:!0}},components:{VueCropper:o["VueCropper"]},methods:{clear:function(){void 0!=this.$refs.cropper&&""==this.option.img&&(this.$refs.cropper.imgs="",this.$refs.cropper.$refs.cropperImg.alt="",this.$refs.cropper.clearCrop())},beforeUpload:function(e){var t=this,n=!1;if(0==this.fileTypes.length?n=!0:e.type?this.fileTypes.forEach(function(a,s){e.type==t.typeList[a]&&(n=!0)}):n=!1,!n)return this.$message.error("请上传".concat(this.fileTypes.join(", "),"格式的文件")),!1;try{sessionStorage.getItem("Access-Token")&&(this.headers["Access-Token"]=JSON.parse(sessionStorage.getItem("Access-Token")||null)),sessionStorage.getItem("Access-Key")&&(this.headers["Access-Key"]=JSON.parse(sessionStorage.getItem("Access-Key")||null))}catch(e){return this.$message.error("获取Access-Token 或 Access-Key 有误, 上传文件失败!"),!1}this.headers["nonce"]=Math.floor(1e16*Math.random()),this.headers["Time-Stamp"]=(new Date).valueOf(),this.headers["secret"]="labmiss",this.headers["type"]="PC";var a={nonce:this.headers.nonce,"Time-Stamp":this.headers["Time-Stamp"],secret:this.headers.secret,"Access-Key":this.headers["Access-Key"]},s=[];for(var o in a)s.push(o);s.sort();var r=[];s.forEach(function(e,t){r.push(a[e])}),this.headers["sign"]=window.md5Js(r.join("")),this.uploadLoading=!0},submitUpload:function(e){this.finish("Blob")},handleChange:function(e){var t=window.URL.createObjectURL(new Blob([e.raw]));this.option.img=t},changeScale:function(e){e=e||1,this.$refs.cropper.changeScale(e)},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},change:function(e){"big"===e?(this.option.autoCropWidth=150,this.option.autoCropHeight=150):"normal"===e?(this.option.autoCropWidth=100,this.option.autoCropHeight=100):"small"===e&&(this.option.autoCropWidth=50,this.option.autoCropHeight=50)},finish:function(e){var t=this;new FormData;"Blob"===e?this.$refs.cropper.getCropBlob(function(e){var n=new FormData;n.append("file",e),t.axios.post("".concat(t.common.basePath,"/file/uplode"),n).then(function(e){var n={};e.data.data&&(n={name:e.data.data.name,path:e.data.data.path}),t.$emit("uploadSuccess",n),t.resetAvatar=n.path,console.log("头像路径",t.resetAvatar),t.showSuccessNotice&&t.$message.success("".concat(e.data.data.name," 上传成功!")),t.fileList=[],t.uploadLoading=!1,t.cropDialogVisible_=!1}).catch(function(e){t.fileList=[],t.cropDialogVisible_=!1,t.uploadLoading=!1,t.$message.error(e)})}):this.$refs.cropper.getCropData(function(e){})},realTime:function(e){var t=this;this.$refs.cropper.getCropBlob(function(e){var n=window.URL.createObjectURL(new Blob([e]));t.previewsImageUrl=n}),this.previews=e},imgLoad:function(e){console.log("图片加载"+e)}}},i=r,c=(n("667f"),n("2877")),l=Object(c["a"])(i,a,s,!1,null,null,null);l.options.__file="CropAvatar.vue";t["a"]=l.exports},f638:function(e,t,n){}});
//# sourceMappingURL=app.a2715bb2.js.map