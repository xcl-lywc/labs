{"version":3,"sources":["webpack:///./src/views/personManage/Authority.vue?dd7d","webpack:///src/views/personManage/Authority.vue","webpack:///./src/views/personManage/Authority.vue?53c6","webpack:///./src/views/personManage/Authority.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","separator-class","_v","directives","name","rawName","value","expression","common","checkAuthority","span","placeholder","clearable","model","callback","$$v","filterText","type","size","disabled","on","click","$event","addTree","ref","data","treeData","props","defaultProps","node-key","default-expand-all","expand-on-click-node","filter-node-method","filterNode","node-click","handleNodeClick","scopedSlots","_u","key","fn","node","mouseenter","tempId","id","mouseleave","_e","_s","label","stopPropagation","editTree","childrens","length","deleteTree","title","visible","dialogAuthorityVisible","width","update:visible","authorityForm","label-width","rules","prop","$set","slot","submitForm","staticRenderFns","Authorityvue_type_script_lang_js_","pageLoading","activeNode","children","tableData","rows","total","operateType","code","isRoot","required","message","trigger","watch","val","$refs","authorityTree","filter","mounted","initAuthorityTree","methods","_this","config","method","url","concat","basePath","axios","then","response","catch","errorMsg","$message","error","parent_id","clearForm","JSON","parse","stringify","_this2","$nextTick","_","clearValidate","formName","_this3","validate","valid","success","meta","_this4","$confirm","confirmButt才去onText","cancelButtonText","indexOf","personManage_Authorityvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"assets/js/1f54.7e6cdb73.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content-wrap-box\"},[_c('el-card',{staticClass:\"title-card\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',[_vm._v(\"权限管理\")])],1)],1),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.pageLoading),expression:\"pageLoading\"}],staticClass:\"router-view-wrap\"},[_c('div',{staticClass:\"router-view-content\"},[(_vm.common.checkAuthority('Authority-tree', true))?_c('el-row',{staticClass:\"padding-row\"},[_c('el-col',{attrs:{\"span\":24}},[_c('el-input',{attrs:{\"placeholder\":\"输入关键字进行过滤\",\"clearable\":\"\"},model:{value:(_vm.filterText),callback:function ($$v) {_vm.filterText=$$v},expression:\"filterText\"}})],1),_c('el-col',{attrs:{\"span\":24}},[_c('div',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"disabled\":!!_vm.filterText || !_vm.common.checkAuthority('Authority-add', true)},on:{\"click\":function($event){_vm.addTree(null, 1)}}},[_vm._v(\"添加顶级\")])],1),(_vm.treeData)?_c('el-tree',{ref:\"authorityTree\",attrs:{\"data\":_vm.treeData,\"props\":_vm.defaultProps,\"node-key\":\"id\",\"default-expand-all\":false,\"expand-on-click-node\":true,\"filter-node-method\":_vm.filterNode},on:{\"node-click\":_vm.handleNodeClick},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"fill-width\"},[_c('div',{on:{\"mouseenter\":function($event){_vm.tempId = data.id},\"mouseleave\":function($event){_vm.tempId = null}}},[_c('span',[(data.type == 1)?_c('i',{staticClass:\"fa fa-desktop text-primary\"}):_vm._e(),(data.type == 2)?_c('i',{staticClass:\"fa fa-mouse-pointer text-info\"}):_vm._e(),(data.type == 3)?_c('i',{staticClass:\"fa fa-sitemap text-warning\"}):_vm._e(),_vm._v(\"\\n                    \"+_vm._s(node.label)+\"  \\n                    \"),(_vm.tempId == data.id)?_c('span',[(data.type == 1 && _vm.common.checkAuthority('Authority-add', true))?_c('el-button',{attrs:{\"type\":\"text\",\"disabled\":!_vm.common.checkAuthority('Authority-add', true)},on:{\"click\":function($event){$event.stopPropagation();_vm.addTree(data, 2)}}},[_vm._v(\"添加权限\")]):_vm._e(),(_vm.common.checkAuthority('Authority-edit', true))?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){$event.stopPropagation();_vm.editTree(data)}}},[_vm._v(\"编辑\")]):_vm._e(),(!(data.childrens && data.childrens.length > 0) && _vm.common.checkAuthority('Authority-delete', true))?_c('el-button',{staticClass:\"text-danger\",attrs:{\"type\":\"text\"},on:{\"click\":function($event){$event.stopPropagation();_vm.deleteTree(data)}}},[_vm._v(\"删除\")]):_vm._e()],1):_vm._e()])])])}}])}):_vm._e()],1)],1):_vm._e()],1),_c('div',{staticClass:\"router-view-bottom\"})]),_c('el-dialog',{attrs:{\"title\":\"权限\",\"visible\":_vm.dialogAuthorityVisible,\"width\":\"50vw\"},on:{\"update:visible\":function($event){_vm.dialogAuthorityVisible=$event}}},[_c('el-form',{ref:\"authorityForm\",attrs:{\"model\":_vm.authorityForm,\"label-width\":\"100px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"权限名称：\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.authorityForm.name),callback:function ($$v) {_vm.$set(_vm.authorityForm, \"name\", $$v)},expression:\"authorityForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"权限编码：\",\"prop\":\"code\"}},[_c('el-input',{model:{value:(_vm.authorityForm.code),callback:function ($$v) {_vm.$set(_vm.authorityForm, \"code\", $$v)},expression:\"authorityForm.code\"}})],1),(_vm.authorityForm.type != 1)?_c('el-form-item',{attrs:{\"label\":\"是否必要：\",\"prop\":\"isRoot\"}},[_c('el-switch',{model:{value:(_vm.authorityForm.isRoot),callback:function ($$v) {_vm.$set(_vm.authorityForm, \"isRoot\", $$v)},expression:\"authorityForm.isRoot\"}})],1):_vm._e()],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogAuthorityVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.submitForm('authorityForm')}}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"content-wrap-box\">\r\n    <el-card class=\"title-card\">\r\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n        <el-breadcrumb-item>权限管理</el-breadcrumb-item> \r\n      </el-breadcrumb>\r\n    </el-card>\r\n    <div class=\"router-view-wrap\" v-loading=\"pageLoading\">\r\n      <!-- 页面主要内容 -->\r\n      <div class=\"router-view-content\">\r\n        <el-row class=\"padding-row\" v-if=\"common.checkAuthority('Authority-tree', true)\">\r\n          <el-col :span=\"24\">\r\n          <el-input placeholder=\"输入关键字进行过滤\" v-model=\"filterText\" clearable></el-input>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <div><el-button type=\"primary\" size=\"mini\" @click=\"addTree(null, 1)\" :disabled=\"!!filterText || !common.checkAuthority('Authority-add', true)\">添加顶级</el-button></div>\r\n            <el-tree\r\n              v-if=\"treeData\"\r\n              ref=\"authorityTree\"\r\n              :data=\"treeData\"\r\n              :props=\"defaultProps\"\r\n              node-key=\"id\"\r\n              @node-click=\"handleNodeClick\"\r\n              :default-expand-all=\"false\"\r\n              :expand-on-click-node=\"true\"\r\n              :filter-node-method=\"filterNode\">\r\n              <span class=\"fill-width\" slot-scope=\"{ node, data }\">\r\n                <!-- <el-tooltip :enterable=\"false\" :content=\"node.label\" placement=\"right-start\"> -->\r\n                  <div @mouseenter=\"tempId = data.id\" @mouseleave=\"tempId = null\">\r\n                  <!-- :class=\"{'text-primary' : activeNode == data.id }\"  -->\r\n                    <span>\r\n                      <i class=\"fa fa-desktop text-primary\" v-if=\"data.type == 1\"></i>\r\n                      <i class=\"fa fa-mouse-pointer text-info\" v-if=\"data.type == 2\"></i>\r\n                      <i class=\"fa fa-sitemap text-warning\" v-if=\"data.type == 3\"></i>\r\n                      {{ node.label }}&nbsp;&nbsp;\r\n                      <span v-if=\"tempId == data.id\">\r\n                        <!-- <el-button type=\"text\" v-if=\"data.type == 1\" @click.stop=\"addTree(data, 1)\">添加次级</el-button> -->\r\n                        <el-button v-if=\"data.type == 1 && common.checkAuthority('Authority-add', true)\" type=\"text\" @click.stop=\"addTree(data, 2)\" :disabled=\"!common.checkAuthority('Authority-add', true)\">添加权限</el-button>\r\n                        <el-button type=\"text\" @click.stop=\"editTree(data)\" v-if=\"common.checkAuthority('Authority-edit', true)\">编辑</el-button>\r\n                        <el-button type=\"text\" v-if=\"!(data.childrens && data.childrens.length > 0) && common.checkAuthority('Authority-delete', true)\" class=\"text-danger\"  @click.stop=\"deleteTree(data)\">删除</el-button>\r\n                      </span>\r\n                    </span>\r\n                  </div>\r\n                 <!-- </el-tooltip> -->\r\n               </span>\r\n            </el-tree>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n      <!-- 页面底部 -->\r\n      <div class=\"router-view-bottom\"></div>\r\n    </div>\r\n    <el-dialog title=\"权限\" :visible.sync=\"dialogAuthorityVisible\" width=\"50vw\">\r\n      <el-form ref=\"authorityForm\"  :model=\"authorityForm\" label-width=\"100px\" :rules=\"rules\">\r\n        <el-form-item label=\"权限名称：\" prop=\"name\"><el-input v-model=\"authorityForm.name\"></el-input></el-form-item>\r\n        <el-form-item label=\"权限编码：\" prop=\"code\"><el-input v-model=\"authorityForm.code\"></el-input></el-form-item>\r\n        <el-form-item label=\"是否必要：\" v-if=\"authorityForm.type != 1\" prop=\"isRoot\"><el-switch v-model=\"authorityForm.isRoot\"></el-switch></el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogAuthorityVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitForm('authorityForm')\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        pageLoading: false,\r\n\r\n        filterText:  \"\",\r\n        activeNode:  null,\r\n        tempId:      null, //鼠标浮动对应的节点id\r\n        treeData:    [],\r\n        defaultProps: {\r\n          children: 'children',\r\n          label: 'name'\r\n        },\r\n        tableData: {\r\n          rows: [],\r\n          total: 0\r\n        },\r\n\r\n        dialogAuthorityVisible: false,\r\n        operateType: \"new\",\r\n        authorityForm: {\r\n          name: null,\r\n          code: null,\r\n          isRoot: false,\r\n        },\r\n        rules: {\r\n          name: [{required: true, message: \"请输入权限名称\", trigger: \"blur\"}],\r\n          code: [{required: true, message: \"请输入权限编码\", trigger: \"blur\"}],\r\n        }\r\n      };\r\n    },\r\n    watch: {\r\n      filterText(val) {\r\n        this.$refs.authorityTree.filter(val);\r\n      }\r\n    },\r\n    mounted () {\r\n      this.initAuthorityTree()\r\n    },\r\n    methods: {\r\n      /**\r\n       * 获取权限树\r\n       * @return {[type]} [description]\r\n       */\r\n      initAuthorityTree() {\r\n        this.pageLoading = true\r\n        let config = {\r\n          method: \"get\",\r\n          url: `${this.common.basePath}/resource/tree`\r\n        }\r\n        this.axios(config).then((response) => {\r\n          this.treeData   = response.data.data\r\n          this.activeNode = response.data.data[0].id\r\n          // this.getAuthorityList(response.data.data[0].id)\r\n          this.pageLoading = false\r\n        }).catch((errorMsg) => {\r\n          this.pageLoading = false\r\n          this.$message.error(errorMsg)\r\n        })\r\n      },\r\n      /**\r\n       * 点击添加分类\r\n       * @param {[type]} parentId [description]\r\n       */\r\n      addTree(data, type) {\r\n        this.operateType = \"new\"\r\n        this.dialogAuthorityVisible = true\r\n        this.authorityForm = {\r\n          name: null,\r\n          code: null,\r\n          isRoot: false,\r\n          type: type\r\n        } \r\n        data ? this.authorityForm.parent_id = data.id : null //传入data 表示添加当前的子集\r\n        this.clearForm()\r\n      },\r\n      /**\r\n       * 点击编辑分类\r\n       * @param {[type]} parentId [description]\r\n       */\r\n      editTree(data) {\r\n        this.operateType = \"edit\"\r\n        if(data.type == 3) {\r\n          data.isRoot = true\r\n        } else {\r\n          data.isRoot = false\r\n        }\r\n        this.authorityForm = JSON.parse(JSON.stringify(data))\r\n        this.dialogAuthorityVisible = true\r\n        this.clearForm()\r\n      },\r\n      clearForm() {\r\n        this.$nextTick(_ => {\r\n          this.$refs.authorityForm.clearValidate()\r\n        })\r\n      },\r\n      /**\r\n       * 根据表单名 和 请求方法 提交表单\r\n       * @param  {[type]} formName 表单名称\r\n       * @return {[type]}          [description]\r\n       */\r\n      submitForm(formName) {\r\n        if(this[formName].isRoot) { // 勾选必要是设置type = 3\r\n          this[formName].type = 3\r\n        } else {\r\n          this[formName].type = 2\r\n        }\r\n        let config = {\r\n          method: this.operateType == \"edit\" ? \"patch\" : \"post\",\r\n          url: `${this.common.basePath}${this.operateType == \"edit\" ? \"/resource/update\" : \"/resource/add/notes\"}`,\r\n          data: this[formName]\r\n        }\r\n\r\n        this.$refs[formName].validate(valid => {\r\n          if(valid) {\r\n            this.axios(config).then((response) => {\r\n              this.$message.success(response.data.meta.message)\r\n              this.dialogAuthorityVisible = false\r\n              this.initAuthorityTree()\r\n            }).catch((errorMsg) => {\r\n              this.dialogAuthorityVisible = false\r\n              this.$message.error(errorMsg)\r\n            })\r\n          } else {\r\n            this.$message.error(\"请输入必填项\")\r\n          }\r\n        })\r\n      },\r\n      \r\n      /**\r\n       * 删除权限\r\n       * @param {[type]} parentId [description]\r\n       */\r\n      deleteTree(data) {\r\n        this.authorityForm = JSON.parse(JSON.stringify(data))\r\n\r\n        this.$confirm(\"删除后需要重新添加\", \"确认删除?\", {\r\n          confirmButt才去onText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\"\r\n        }).then(_ => {\r\n          let config = {\r\n            method: \"delete\",\r\n            url: `${this.common.basePath}/resource/delete/true/${this.authorityForm.id}`,\r\n          }\r\n          this.axios(config).then((response) => {\r\n            this.$message.success(response.data.meta.message)\r\n            this.dialogAuthorityVisible = false\r\n            this.initAuthorityTree()\r\n          }).catch((errorMsg) => {\r\n            this.dialogAuthorityVisible = false\r\n            this.$message.error(errorMsg)\r\n          })\r\n        }).catch(_ => {})\r\n      },\r\n      /**\r\n       * 点击某一项分类 查询对应的分类下的文章列表\r\n       * @param  {[type]} data [description]\r\n       * @return {[type]}      [description]\r\n       */\r\n      handleNodeClick(node, data) {\r\n        this.activeNode = node.id\r\n      },\r\n      filterNode(value, data) {\r\n        if (!value) return true;\r\n        return data.name.indexOf(value) !== -1;\r\n      }\r\n    }\r\n  };\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Authority.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Authority.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Authority.vue?vue&type=template&id=2cafa4cf&\"\nimport script from \"./Authority.vue?vue&type=script&lang=js&\"\nexport * from \"./Authority.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Authority.vue\"\nexport default component.exports"],"sourceRoot":""}